{"version":3,"sources":["app.js","vendor.js","code/AuthService.js","code/CacheData.js","code/MessageToaster.js","code/ResultHandler.js","code/Session.js","code/StateService.js","code/baiduService.js","code/code.js","code/filter.js","code/loadingAlert.js","config/config.js","config/constant.js","config/environmentConfig.js","config/httpDevConfig.js","config/httpRelConfig.js","directive/Directive.js","directive/ui-map.js","lib/DateFormat.js","modules/modules.js","tools/tools.js","modules/Login/Login.js","modules/Login/LoginCtrl.js","modules/Login/LoginRouter.js","modules/Login/LoginService.js","modules/Login/resetPswCtrl.js","modules/WxLogin/WxLogin.js","modules/WxLogin/WxLoginCtrl.js","modules/WxLogin/WxLoginRouter.js","modules/WxLogin/WxLoginService.js","modules/children/children.js","modules/children/childrenCtrl.js","modules/children/childrenRouter.js","modules/children/childrenService.js","modules/childrenSetting/childrenAddCtrl.js","modules/childrenSetting/childrenEditCtrl.js","modules/childrenSetting/childrenSetting.js","modules/childrenSetting/childrenSettingCtrl.js","modules/childrenSetting/childrenSettingRouter.js","modules/childrenSetting/childrenSettingService.js","modules/childrenSteam/childrenSteam.js","modules/childrenSteam/childrenSteamCtrl.js","modules/childrenSteam/childrenSteamRouter.js","modules/childrenSteam/childrenSteamService.js","modules/childrenSteam/videoCtrl.js","modules/comment/comment.js","modules/comment/commentService.js","modules/depositChildren/depositChildren.js","modules/depositChildren/depositChildrenCtrl.js","modules/depositChildren/depositChildrenRouter.js","modules/depositChildren/depositChildrenService.js","modules/depositChildren/teacherDepositChildrenCtrl.js","modules/eshop/eshopEntry.js","modules/eshop/eshopEntryCtrl.js","modules/eshop/eshopEntryRouter.js","modules/eshop/eshopService.js","modules/estimate/estimate.js","modules/estimate/estimateCtrl.js","modules/estimate/estimateDepositCtrl.js","modules/estimate/estimateRouter.js","modules/exit/exit.js","modules/exit/exitCtrl.js","modules/exit/exitRouter.js","modules/exit/exitService.js","modules/help/help.js","modules/help/helpCtrl.js","modules/help/helpDocCtrl.js","modules/help/helpRouter.js","modules/map/MapCtrl.js","modules/map/MapRouter.js","modules/map/MapService.js","modules/map/map.js","modules/message/message.js","modules/message/messageCtrl.js","modules/message/messageRouter.js","modules/message/messageService.js","modules/message/newMessageCtrl.js","modules/nearby/depositCommentCtrl.js","modules/nearby/depositCommentService.js","modules/nearby/nearby.js","modules/nearby/nearbyCtrl.js","modules/nearby/nearbyDepositInfoCtrl.js","modules/nearby/nearbyListCtrl.js","modules/nearby/nearbyRouter.js","modules/nearby/nearbyService.js","modules/order/depositListctrl.js","modules/order/order.js","modules/order/orderCtrl.js","modules/order/orderRouter.js","modules/order/orderService.js","modules/organizer/organizer.js","modules/organizer/organizerCtrl.js","modules/organizer/organizerEditCtrl.js","modules/organizer/organizerInfoCtrl.js","modules/organizer/organizerRouter.js","modules/organizer/organizerService.js","modules/parent/parent.js","modules/parent/parentCtrl.js","modules/parent/parentEditCtrl.js","modules/parent/parentInfoCtrl.js","modules/parent/parentRouter.js","modules/parent/parentService.js","modules/photo/photo.js","modules/photo/photoCtrl.js","modules/photo/photoRouter.js","modules/profile/profile.js","modules/profile/profileCtrl.js","modules/profile/profileRouter.js","modules/profile/profileService.js","modules/register/register.js","modules/register/registerCtrl.js","modules/register/registerRouter.js","modules/register/registerService.js","modules/settings/changePswCtrl.js","modules/settings/settings.js","modules/settings/settingsCtrl.js","modules/settings/settingsRouter.js","modules/tabs/tabs.js","modules/tabs/tabsCtrl.js","modules/tabs/tabsRouter.js","modules/tabs/tabsService.js","modules/teacher/teacher.js","modules/teacher/teacherCtrl.js","modules/teacher/teacherEditCtrl.js","modules/teacher/teacherRouter.js","modules/teacher/teacherService.js","modules/teacherSetting/teacherSetting.js","modules/teacherSetting/teacherSettingCtrl.js","modules/teacherSetting/teacherSettingRouter.js","modules/teacherSetting/teacherSettingService.js","modules/vipBuy/buyAppCtrl.js","modules/vipBuy/buyCtrl.js","modules/vipBuy/vipBuy.js","modules/vipBuy/vipBuyCtrl.js","modules/vipBuy/vipBuyRouter.js","modules/vipBuy/vipBuyService.js","modules/vipRecord/recordCtrl.js","modules/vipRecord/vipRecord.js","modules/vipRecord/vipRecordCtrl.js","modules/vipRecord/vipRecordRouter.js","modules/vipRecord/vipRecordService.js","modules/vipTips/vipTips.js","modules/vipTips/vipTipsCtrl.js","modules/vipTips/vipTipsRouter.js","modules/vipTips/vipTipsService.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1mBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3cA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["(function() {\n    \"use strict\";\n    angular.module('xhStarter', [\n        'vendor',\n        'config',\n        'code',\n        'directive',\n        'tools',\n        'modules'\n    ])\n\n    .run(function($ionicPlatform) {\n        $ionicPlatform.ready(function() {\n            // Hide the accessory bar by default (remove this to show the accessory bar above the keyboard\n            // for form inputs)\n            if (window.cordova && window.cordova.plugins && window.cordova.plugins.Keyboard) {\n                cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);\n                cordova.plugins.Keyboard.disableScroll(true);\n\n            }\n            if (window.StatusBar) {\n                // org.apache.cordova.statusbar required\n                StatusBar.styleDefault();\n            }\n        });\n    })\n\n    .config(function($ionicConfigProvider, $urlRouterProvider, $stateProvider, $httpProvider, $sceDelegateProvider) {\n            console.log(\"start app\");\n\n            if (!ionic.Platform.isIOS()) {\n                $ionicConfigProvider.scrolling.jsScrolling(false);\n            }\n            $sceDelegateProvider.resourceUrlWhitelist(['**']);\n            $httpProvider.interceptors.push([\n                '$injector',\n                function($injector) {\n                    return $injector.get('AuthInterceptor');\n                }\n            ]);\n            $ionicConfigProvider.platform.ios.tabs.style('standard');\n            $ionicConfigProvider.platform.ios.tabs.position('bottom');\n            $ionicConfigProvider.platform.android.tabs.style('standard');\n            $ionicConfigProvider.platform.android.tabs.position('bottom');\n\n            $ionicConfigProvider.platform.ios.navBar.alignTitle('center');\n            $ionicConfigProvider.platform.android.navBar.alignTitle('center');\n\n            $ionicConfigProvider.platform.ios.backButton.previousTitleText('').icon('ion-ios-arrow-thin-left');\n            $ionicConfigProvider.platform.android.backButton.previousTitleText('').icon('ion-android-arrow-back');\n\n            $ionicConfigProvider.platform.ios.views.transition('ios');\n            $ionicConfigProvider.platform.android.views.transition('android');\n\n            // $ionicConfigProvider.platform.android.tabs.position('bottom');\n            // $ionicConfigProvider.views.transition('none');\n            // $ionicConfigProvider.backButton.text('返回').icon('ion-ios-arrow-left');\n            // $ionicConfigProvider.tabs.style(\"standard\");\n            // $ionicConfigProvider.navBar.alignTitle('center');\n        })\n        .factory('AuthInterceptor', function($rootScope, $q, AUTH_EVENTS) {\n            return {\n                responseError: function(response) {\n                    $rootScope.$broadcast({\n                        401: AUTH_EVENTS.notAuthenticated,\n                        403: AUTH_EVENTS.notAuthorized,\n                        419: AUTH_EVENTS.sessionTimeout,\n                        440: AUTH_EVENTS.sessionTimeout\n                    }[response.status], response);\n                    return $q.reject(response);\n                }\n            };\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('vendor', [\n            'ionic',\n            'ngCordova',\n            'templates',\n            'ngStorage',\n            'toaster',\n            'ui.rCalendar.tpls',\n            'baiduMap',\n            'ionic-ratings'\n        ]);\n}());\n","(function() {\n  \"use strict\";\n  angular.module('AuthService', []).factory('AuthService', function(Session,Path,Role) {\n    'ngInject';\n\n    var authService = {\n      getLoginID: getLoginID,\n      getLoginToken: getLoginToken,\n      getUserRole: getUserRole,\n      getNextPath: getNextPath,\n      getWechatId:getWechatId,\n      setSession: setSession\n    };\n\n    function getLoginID() {\n      return Session.getData('userId');\n    };\n\n    function getLoginToken() {\n      return Session.getData('token');\n    };\n\n    function getUserRole() {\n      return Session.getData('userRole');\n    };\n    function getWechatId(){\n      return Session.getData('wechat');\n    }\n\n    function setSession(id,token,eshop,role,wechat){\n      Session.create(token,eshop,id,role,wechat);\n    };\n\n    function getNextPath() {\n      if(Session.getData('userRole')==Role.Organizer){\n        return Path.OrganizerRolePath;\n      }else if(Session.getData('userRole')==Role.Parent){\n        return Path.ParentRolePath;\n      }else if(Session.getData('userRole')==Role.Teacher){\n        return Path.TeacherRolePath;\n      }else if(Session.getData('userRole')==Role.visitor){\n        return Path.VisitorRolePath;\n      }\n    };\n\n    return authService;\n  });\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('CacheData', []).service('CacheData', function($window) {\n        'ngInject';\n\n        var cacheData = {\n            put: put,\n            get: get,\n            putObject: putObject,\n            getObject: getObject,\n            remove: remove,\n            clearAll: clearAll\n        };\n        function put(key, value) {\n            $window.localStorage[key] = value;\n        };\n\n        function get(key, defaultValue) {\n            return $window.localStorage[key] || defaultValue;\n        };\n\n        function putObject(key, value) {\n            $window.localStorage[key] = JSON.stringify(value);\n        };\n\n        function getObject(key) {\n            return JSON.parse($window.localStorage[key] || '{}');\n        };\n\n        function remove(key) {\n            $window.localStorage.removeItem(key);\n        };\n\n        function clearAll() {\n            $window.localStorage.clear();\n        };\n        return cacheData;\n    });\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('MessageToaster', []).service('MessageToaster', function(SuccessMessage, ErrorMessage, Constants, toaster) {\n        'ngInject';\n\n        var messageToaster = {\n            accessFail: accessFail,\n            info: info,\n            error: error,\n            success: success\n        };\n\n        function accessFail() {\n            toaster.pop('error', Constants.appTitle, ErrorMessage.ACCESS_FAIL);\n        }\n\n        function info(content) {\n            toaster.pop('info', Constants.appTitle, content);\n        }\n\n        function error(content, title) {\n            return toaster.pop('error', title || Constants.appTitle, content || ErrorMessage.ACCESS_FAIL);\n        }\n\n        function success(content, title) {\n            toaster.success('success', title || Constants.appTitle, content || SuccessMessage.OPERATION_SUCESS);\n        }\n\n\n        return messageToaster;\n    });\n\n}());","(function() {\n    \"use strict\";\n    angular.module('ResultHandler', []).service('ResultHandler', function($q) {\n        'ngInject';\n\n        var handler = {\n            successedFuc: successedFuc,\n            failedFuc: failedFuc\n        };\n\n        function successedFuc(response) {\n            //console.log(\"successedFuc\");\n            //console.log(response);\n            return response.data;\n            //if (response.data.errno == 0){\n            //    return response.data;\n            //} else {\n            //    return $q.reject(response.data.error);\n            //}\n        }\n\n        function failedFuc(error) {\n            //console.log(\"failedFuc\");\n            //console.log(error);\n            return $q.reject(error);\n        }\n\n        return handler;\n    });\n\n}());","(function() {\n    \"use strict\";\n    angular.module('Session', []).service('Session', function($http,$window) {\n        'ngInject';\n\n        var session = {\n            create: create,\n            destroy: destroy,\n            updateRoles: updateRoles,\n            setData:setData,\n            getData:getData,\n            rmData:rmData,\n        };\n\n        function create(token, eshop, userId, roles, wechat) {\n            $window.localStorage.setItem(\"token\", token);\n            $window.localStorage.setItem(\"eshop_auth\", JSON.stringify(eshop));\n            $window.localStorage.setItem(\"userId\", userId);\n            $window.localStorage.setItem(\"userRole\", roles);\n            $window.localStorage.setItem(\"wechat\", wechat);\n\n            if(token!=null){\n                //$http.defaults.headers.common.Authorization = \"Bearer-\"+token;\n                $http.defaults.headers.common.token = token;\n            }\n\n            //    $httpProvider.defaults.headers.common[\"Authorization\"] = \"Bearer-\"+token;\n            console.log(session);\n        }\n\n        function destroy() {\n            $window.localStorage.removeItem(\"eshop_auth\");\n            $window.localStorage.removeItem(\"token\");\n            $window.localStorage.removeItem(\"userId\");\n            $window.localStorage.removeItem(\"userRole\");\n            $window.localStorage.removeItem(\"wechat\");\n\n        }\n\n        function updateRoles(roles) {\n            $window.localStorage.setItem(\"userRole\", roles);\n        };\n\n        function setData(name,data) {\n            $window.localStorage.setItem(name, data);\n        }\n\n        function getData(name) {\n            return $window.localStorage.getItem(name);\n        }\n\n        function rmData(name) {\n            $window.localStorage.removeItem(name);\n        }\n\n        return session;\n    });\n\n}());\n","(function() {\n  'use strict';\n\n  angular.module('StateService', [])\n    .factory('StateService', StateService);\n\n  StateService.$inject = ['$ionicViewSwitcher', '$state', '$ionicHistory', '$timeout'];\n\n  function StateService($ionicViewSwitcher, $state, $ionicHistory, $timeout,AuthService) {\n    return {\n      go: go,\n      back: back,\n      goToHome: goToHome,\n      goToRoot: goToRoot,\n      backToState: backToState,\n      clearCacheByHistoryId: clearCacheByHistoryId,\n      clearAllAndGo: clearAllAndGo,\n      clearPreviousStateCache: clearPreviousStateCache\n    };\n\n    function go(state, params) {\n      $ionicViewSwitcher.nextDirection('forward');\n      $state.go(state, params);\n    }\n\n    function back() {\n      //var currentStateId = [$ionicHistory.currentView().stateId];\n      //$ionicViewSwitcher.nextDirection('back');\n      //$timeout(clearPreviousStateCache(currentStateId), 700);\n      $ionicHistory.goBack();\n\n    }\n\n    function clearPreviousStateCache(stateIds) {\n      return function() {\n        $ionicHistory.clearCache(stateIds);\n      };\n    }\n\n    function goToHome() {\n      $ionicHistory.nextViewOptions({\n        disableBack: true,\n        historyRoot: true,\n        disableAnimate: true\n      });\n      $ionicHistory.clearHistory();\n      $ionicHistory.clearCache()\n        .then(function() {\n          $state.go(AuthService.getNextPath());\n        });\n    }\n\n    function clearAllAndGo(state, params) {\n      $ionicHistory.nextViewOptions({\n        disableBack: true,\n        historyRoot: true,\n        disableAnimate: true\n      });\n      $ionicHistory.clearHistory();\n      $ionicHistory.clearCache()\n        .then(function() {\n          $state.go(state, params);\n        });\n    }\n\n    function goToRoot(state) {\n      $ionicHistory.nextViewOptions({\n        disableBack: true,\n        historyRoot: true,\n        disableAnimate: true\n      });\n      $state.go(state);\n      clearCacheByHistoryId($ionicHistory.currentHistoryId());\n    }\n\n    function clearCacheByHistoryId(historyId) {\n      var states = [];\n      var history = $ionicHistory.viewHistory().histories[historyId];\n      for (var i = history.stack.length - 1; i >= 0; i--) {\n        states.push(history.stack[i].stateId);\n      }\n      $ionicHistory.clearCache(states);\n    }\n\n    function backToState(state) {\n      var historyId = $ionicHistory.currentHistoryId();\n      var history = $ionicHistory.viewHistory().histories[historyId];\n      for (var i = history.stack.length - 1; i >= 0; i--) {\n        if (history.stack[i].stateId == state) {\n          $ionicHistory.goBack(i - history.stack.length + 1);\n          break;\n        }\n      }\n    }\n\n  }\n\n}());\n","(function() {\r\n  'use strict';\r\n\r\n/**\r\n * 机构搜索本地服务\r\n */\r\nangular.module('BaiduService',[])\r\n  .service('BaiduService', function ($q, $http, Constants) {\r\n\r\n      /**\r\n       * 转换原始路径为缩略图路径\r\n       * @param {*} imgUrl\r\n       */\r\n      function _convertThumbUrl(imgUrl){\r\n        if(!imgUrl) return;\r\n          return imgUrl.replace(/.(jpg|png|gif)/,'_400x200.$1');\r\n      }\r\n\r\n    /**\r\n     * 根据经纬度获取附近机构列表\r\n     * @param {*} longitude\r\n     * @param {*} latitude\r\n     */\r\n    function _getNearbyDeposits(longitude, latitude) {\r\n        var defer = $q.defer(),\r\n       // apiUrl = Constants.serverUrl+ 'nearbyDepositList/113.271/23.135';\r\n         apiUrl = Constants.serverUrl + 'nearbyDepositList/'+longitude+'/'+latitude;\r\n\r\n        $http.get(apiUrl).success(function (data, status, headers, congfig) {\r\n          defer.resolve(data.data);\r\n        }).error(function (err) {\r\n          defer.reject(err);\r\n        });\r\n        return defer.promise;\r\n      }\r\n\r\n      /**\r\n       * 获取机构详细信息\r\n       * @param {*} depositId\r\n       */\r\n      function _getDepositInfo(depositId) {\r\n        var defer = $q.defer(),\r\n          apiUrl = Constants.serverUrl + 'depositInfo/' + depositId;\r\n\r\n        $http.get(apiUrl).success(function (data, status, headers, congfig) {\r\n          defer.resolve(data.data);\r\n        }).error(function (err) {\r\n          defer.reject(err);\r\n        });\r\n\r\n        return defer.promise;\r\n      }\r\n\r\n      /**\r\n       * 获取机构评论列表\r\n       * @param {*} depositId\r\n       */\r\n      function _getDepositComments (depositId) {\r\n        var defer = $q.defer(),\r\n          apiUrl = Constants.serverUrl + 'comments/deposit?depositid=' + depositId;\r\n\r\n        $http.get(apiUrl).success(function (data, status, headers, congfig) {\r\n          defer.resolve(data.data);\r\n        }).error(function (err) {\r\n          defer.reject(err);\r\n        });\r\n\r\n        return defer.promise;\r\n      }\r\n\r\n      /**\r\n       * 获取机构详情并带有评论信息\r\n       * @param {*} depositId\r\n       */\r\n      function _getDepositInfoWithComments (depositId) {\r\n        var defer = $q.defer();\r\n\r\n        var getDepositDeferred = _getDepositInfo(depositId);\r\n        var getDepositCommentsDeferred = _getDepositComments(depositId);\r\n\r\n        $q.all([getDepositDeferred, getDepositCommentsDeferred]).then(function (results) {\r\n            var depositInfo = results[0],\r\n              commentsData = results[1];\r\n\r\n            depositInfo.Score = commentsData.scores || 0;\r\n            depositInfo.Comments = [];\r\n\r\n            //转换所有图片为数组，以用于轮播图片源\r\n            depositInfo.Images = [];\r\n            depositInfo.FrontDeskLink && depositInfo.Images.push(_convertThumbUrl(depositInfo.FrontDeskLink));\r\n            depositInfo.PublicZoneLink && depositInfo.Images.push(_convertThumbUrl(depositInfo.PublicZoneLink));\r\n            depositInfo.KitchenLink && depositInfo.Images.push(_convertThumbUrl(depositInfo.KitchenLink));\r\n            depositInfo.DiningRoomLink && depositInfo.Images.push(_convertThumbUrl(depositInfo.DiningRoomLink));\r\n            depositInfo.RestRoomLink1 && depositInfo.Images.push(_convertThumbUrl(depositInfo.RestRoomLink1));\r\n            depositInfo.RestRoomLink2 && depositInfo.Images.push(_convertThumbUrl(depositInfo.RestRoomLink2));\r\n            depositInfo.ClassRoomLink1 && depositInfo.Images.push(_convertThumbUrl(depositInfo.ClassRoomLink1));\r\n            depositInfo.ClassRoomLink2 && depositInfo.Images.push(_convertThumbUrl(depositInfo.ClassRoomLink2));\r\n\r\n            for (var j = 0; j < commentsData.comments.length; j++) {\r\n                depositInfo.Comments.push(commentsData.comments[j]);\r\n            }\r\n\r\n            defer.resolve(depositInfo);\r\n        }, function (err) {\r\n            defer.reject(err);\r\n        });\r\n\r\n        return defer.promise;\r\n      }\r\n\r\n      return {\r\n          getNearbyDeposits: _getNearbyDeposits,\r\n          getDepositInfo: _getDepositInfo,\r\n          getDepositComments: _getDepositComments,\r\n          getDepositInfoWithComments: _getDepositInfoWithComments\r\n      };\r\n  });\r\n\r\n}());\r\n","(function() {\n  \"use strict\";\n  angular.module('code', [\n    'Session',\n    'StateService',\n    'CacheData',\n    'AuthService',\n    'LoadingAlert',\n    'ResultHandler',\n    'MessageToaster',\n    'CustomFilter',\n    'BaiduService'\n  ]);\n\n}());\n","(function() {\n'use strict';\n\nvar app = angular.module('CustomFilter', []);\napp.filter('gendarChange', function () {\n    return function (input) {\n        if (input == \"1\")return \"男\";\n        else if (input == \"2\")return \"女\";\n        else return \"\";\n    };\n});\n\napp.filter('JSchange', function () {\n    return function (input) {\n        if (input == \"1\")return \"托管机构\";\n        else if (input == \"3\")return \"老师\";\n        else if (input == \"2\")return \"家长\";\n        else return \"游客\";\n    };\n});\n\napp.filter('PayStatus', function () {\n    return function (input) {\n        if (input == \"1\")return \"已付款\";\n        else if (input == \"0\")return \"未付款\";\n        else return \"未知\";\n    };\n});\n\napp.filter('PayType', function () {\n    return function (input) {\n        if (input == \"1\")return \"支付宝支付\";\n        else if (input == \"0\")return \"微信支付\";\n        else if (input == \"2\")return \"其它\";\n        else return \"未知\";\n    };\n});\n\napp.filter('relationshipChange', function () {\n    return function (input) {\n        if (input == \"1\")return \"父亲\";\n        else if (input == \"2\")return \"母亲\";\n        else if (input == \"3\")return \"爷爷\";\n        else if (input == \"4\")return \"奶奶\";\n        else return \"其它\";\n    };\n});\n\napp.filter('dateChange', function () {\n    return function (input) {\n        var d = new Date(input.replace(/-/g,   \"/\"));\n        var now = new Date();\n        var time=now.getTime()- d.getTime();\n        if(time>24*60*60*1000){\n            return d.Format('MM月dd日');\n        }else if(time>60*60*1000){\n            //return d.Format('hh')+\"小时前\";\n            var hour=parseInt(time/(60*60*1000));\n            return hour+\"小时前\";\n        }else{\n            //return d.Format('mm')+\"分钟前\";\n            var min=parseInt(time/(60*1000));\n            return min+\"分钟前\";\n        }\n    };\n});\n\napp.filter('ImageMin', function () {\n    return function (input) {\n        if(input!=null){\n            var fileExtension = input.substring(input.lastIndexOf('.') + 1);\n            var fileName = input.substring(0,input.lastIndexOf('.'));\n            if(fileExtension.toLowerCase()=='jpg' ||fileExtension.toLowerCase() =='png' || fileExtension.toLowerCase()=='gif'){\n                return fileName+\"_64x64\"+\".\"+fileExtension;\n            }return input;\n        }else{\n            return '';\n        }\n\n    };\n});\n\napp.filter('changeSize', function () {\n    return function (input,params) {\n        if(input!=null){\n            var fileExtension = input.substring(input.lastIndexOf('.') + 1);\n            var fileName = input.substring(0,input.lastIndexOf('.'));\n            if(fileExtension.toLowerCase()=='jpg' ||fileExtension.toLowerCase() =='png' || fileExtension.toLowerCase()=='gif'){\n                return fileName+\"_\"+params+\".\"+fileExtension;\n            }return input;\n        }else{\n            return '';\n        }\n\n    };\n});\n\napp.filter('statusChange', function () {\n    return function (input,rule) {\n        //var rule=[{dm:\"0\",mc:\"未办结\"},{dm:\"1\",mc:\"已办结\"}];\n        if(rule!=null&&rule.length>0) {\n            for (var i = 0; i < rule.length; i++) {\n                if(rule[i].dm==input)return rule[i].mc;\n            }\n        }else{\n            return input;\n        }\n    };\n});\n\n app.filter('formatDist', function () {\n      return function (dist) {\n          dist = dist || 0\n          if (dist > 0) {\n              return (dist / 1000).toFixed(2) + '千米';\n          } else {\n              return '';\n          }\n      };\n  });\n\n  app.filter('formatTime', function () {\n     return function (time) {\n         var now = new Date();\n         time = new Date(time) || now;\n\n         var timeSpan = now.getTime() - time.getTime(),\n               days = Math.floor(timeSpan / (24 * 3600 * 1000)),\n               months = Math.floor(days / (30)),\n               years = Math.floor(days / (365)),\n               leave1 = timeSpan % (24 * 3600 * 1000),\n               hours = Math.floor(leave1 / (3600 * 1000)),\n                leave2 = leave1 % (3600 * 1000),\n                minutes = Math.floor(leave2 / (60 * 1000));\n\n         if (years > 0) return years + '年前';\n         if (months > 0) return months + '月前';\n         if (days > 0) return days + '天前';\n         if (hours > 0) return hours + '小时前';\n         if (minutes > 0) return minutes + '分钟前';\n         return '';\n     };\n   });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('LoadingAlert', []).service('LoadingAlert', function($document, $rootScope) {\n        'ngInject';\n        var activeNavView;\n        return {\n            show: show,\n            hide: hide\n        };\n\n        function init() {\n            var body = angular.element($document[0].body);\n            var ionViewArr = body.find('ion-view');\n            for (var i = 0; i < ionViewArr.length; i++) {\n                if (angular.element(ionViewArr[i]).attr('nav-view') == 'active') {\n                    activeNavView = angular.element(ionViewArr[i]);\n                    activeNavView.append(\"<loading><div class=\\\"loading-alert-container\\\"><div class=\\\"loading-body\\\"><div class=\\\"loading-text\\\">加载中...<div><div></div></loading>\");\n                }\n            }\n        }\n\n        function show() {\n            init();\n        }\n\n        function hide() {\n            angular.element(activeNavView.find('loading')[0]).remove();\n        }\n\n    });\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('config', [\n    'environmentConfig',\n    'constant',\n    'httpRelConfig'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('constant', [])\n        .constant('Path',{\n            'ParentRolePath':'tabs.childrenSteam',\n            'OrganizerRolePath':'tabs.organizer',\n            'TeacherRolePath':'tabs.message',\n            'VisitorRolePath':'tabs.map'\n        })\n        .constant('Role',{\n            'visitor':'-1',\n            'Organizer':'1',\n            'Parent':'2',\n            'Teacher':'3',\n            'Children':'4',\n            'ThirdParty':'5',\n            'Consultant':'6'\n        })\n        .constant('Weixin', {\n        })\n        .constant('AUTH_EVENTS', {\n            loginSuccess: 'auth-login-success',\n            loginFailed: 'auth-login-failed',\n            logoutSuccess: 'auth-logout-success',\n            sessionTimeout: 'auth-session-timeout',\n            notAuthenticated: 'auth-not-authenticated',\n            notAuthorized: 'auth-not-authorized'\n        })\n        .constant('ErrorMessage', {\n            ACCESS_FAIL: '通讯异常，请稍后再试！',\n            TOKEN_INVALID: '连接超时，请重新登录！'\n        })\n        .constant('SuccessMessage', {\n            SUBMIT_SUCESS: '提交成功',\n            OPERATION_SUCESS:'操作完成'\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('environmentConfig', [])\n        .constant('Constants', {\n            'appTitle':'托管之家',\n            'serverUrl': 'http://wx.zxing-tech.cn/api/v1/',\n            'eshopApiUrl': 'http://api.mall.zxing-tech.cn/v2/',\n            'dfsUrl': 'http://wx.zxing-tech.cn/',\n            'buildID': '20170528v1',\n            'ENVIRONMENT':'release'\n        });\n}());\n//'serverUrl': 'http://120.76.226.47/api/v2/',\n//    'dfsUrl': 'http://120.76.226.47/',\n//http://localhost:8090/\n//http://wx.zxing-tech.cn\n","(function() {\n    \"use strict\";\n    angular.module('httpDevConfig', [])\n        .config(function($httpProvider) {\n            $httpProvider.defaults.headers.post[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n            $httpProvider.defaults.headers.put[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('httpRelConfig', [])\n    .config(function($httpProvider) {\n        $httpProvider.defaults.cache = false;\n        if (!$httpProvider.defaults.headers.get) {\n           $httpProvider.defaults.headers.get = {};\n        }\n        // disable IE ajax request caching\n        $httpProvider.defaults.headers.get['If-Modified-Since'] = '0';\n\n        // Disable IE ajax request caching\n        $httpProvider.defaults.headers.get['Cache-Control'] = 'no-cache';\n        $httpProvider.defaults.headers.get['Pragma'] = 'no-cache';\n    });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('directive', [\n      'BaiduMapDirective'\n    ]);\n\n}());\n","(function() {\r\n'use strict';\r\n\r\nvar app = angular.module('BaiduMapDirective', []);\r\n\r\n  app.directive('uiMap', function ($parse, $q, $window, $timeout, $ionicModal, $ionicSlideBoxDelegate, MessageToaster, BaiduService) {\r\n    'ngInject';\r\n      /**\r\n       * 加载百度地图\r\n       * @param {object}  $q angular $q\r\n       * @param {string} apiKey 百度apiKey\r\n       * @param {string} version 版本号\r\n       */\r\n      function loadMap(apiKey) {\r\n\r\n          // 判断是否执行过加载过程\r\n          if (window.loadBaiduPromise) {\r\n              return window.loadBaiduPromise;\r\n          }\r\n\r\n          var deferred = $q.defer(),\r\n            resolve = function () {\r\n                deferred.resolve(window.BMap ? window.BMap : false);\r\n            },\r\n            callbackName = 'loadBaiduMaps_' + (new Date().getTime()),\r\n            params = {\r\n                'ak': apiKey\r\n            };\r\n\r\n          if (window.BMap) {\r\n              resolve();\r\n          } else {\r\n              angular.extend(params, {\r\n                  'v': '2.0',\r\n                  'callback': callbackName\r\n              });\r\n\r\n              // 百度地图加载成功后回调用方法\r\n              window[callbackName] = function () {\r\n                  // 标识异步任务完成\r\n                  resolve();\r\n\r\n                  // 成功后删除全局回调方法\r\n                  $timeout(function () {\r\n                      try {\r\n                          delete window[callbackName];\r\n                      } catch (e) { }\r\n                  }, 20);\r\n              }\r\n\r\n              // 加载百度地图脚本\r\n              var head = document.getElementsByTagName('HEAD').item(0);\r\n              var bdscript = document.createElement('script');\r\n              bdscript.type = 'text/javascript';\r\n              bdscript.src = 'http://api.map.baidu.com/api?v=' + params.v + '&ak=' + params.ak + '&callback=' + params.callback;\r\n              head.appendChild(bdscript);\r\n          }\r\n          window.loadBaiduPromise = deferred.promise;\r\n\r\n          // 返回异步任务对象\r\n          return window.loadBaiduPromise;\r\n      }\r\n\r\n      /**\r\n       * 绑定地图事件，以便地图上触发的事件都转换为地图元素触发的对应事件\r\n       * @param {*} scope  范围\r\n       * @param {*} eventsStr 事件\r\n       * @param {*} baiduObject 百度地图对象\r\n       * @param {*} element 元素\r\n       * @param {*} prefix 地图事件前缀\r\n       */\r\n      function bindMapEvents(scope, baiduObject) {\r\n          var events = scope.$eval(attrs.mapEvent);\r\n          angular.forEach(events, function (uiEvent, eventName) {\r\n              var fn = $parse(uiEvent);\r\n\r\n              baiduObject.addEventListener(eventName, function (event) {\r\n                  var params = Array.prototype.slice.call(arguments);\r\n                  params = params.splice(1);\r\n                  fn(scope, {\r\n                      $event: evt,\r\n                      $params: params\r\n                  });\r\n                  if (!scope.$$phase) {\r\n                      scope.$apply();\r\n                  }\r\n              })\r\n          })\r\n      }\r\n\r\n      /**\r\n       * 在指定容器中构建渲染百度地图组件\r\n       * @param {*} container\r\n       * @param {*} options\r\n       */\r\n      function buildMap(container, options) {\r\n          if (!options.apiKey) {\r\n              throw new Error('请设置apiKey!');\r\n          }\r\n\r\n          var map = new window.BMap.Map(container, {\r\n              enableMapClick: true\r\n          });\r\n\r\n          if (options.enableScrollWheelZoom) {\r\n              map.enableScrollWheelZoom();\r\n          }\r\n\r\n          return map;\r\n      }\r\n\r\n      /**\r\n       * 根据位置做标记\r\n       * @param {*} map\r\n       * @param {*} point\r\n       * @param {*} clickCallback\r\n       * @param {*} poInfo\r\n       */\r\n      function addMapMarker(map, point, clickCallback, poInfo, icon,markText) {\r\n          var mk;\r\n\r\n          if (!!icon) {\r\n              var label = new BMap.Label(markText, { offset: new BMap.Size(-15, 25) });\r\n              mk = new BMap.Marker(point, { icon: icon });  // 创建标注\r\n              mk.setLabel(label)\r\n          } else {\r\n              mk = new BMap.Marker(point);\r\n          }\r\n\r\n          map.addOverlay(mk);\r\n          mk.babyPoi = poInfo;\r\n\r\n          if (clickCallback) {\r\n              mk.addEventListener('click', clickCallback);\r\n          }\r\n\r\n          return mk;\r\n      }\r\n\r\n      /**\r\n       * 添加地图导航控件\r\n       * @param {*} map\r\n       * @param {*} anchor\r\n       */\r\n      function addMapNavigation(map, anchor) {\r\n          var navigation = new window.BMap.NavigationControl({\r\n              anchor: anchor\r\n          });\r\n          map.addControl(navigation);\r\n      }\r\n\r\n      /**\r\n       * 获取当前位置\r\n       * @param {*} map\r\n       * @param {*} options\r\n       */\r\n      function getCurrentPosition(map, options) {\r\n          var deferred = $q.defer();\r\n\r\n          if (!!options.center) {\r\n              var point = new BMap.Point(options.center.longitude, options.center.latitude); // 定义一个中心点坐标\r\n              deferred.resolve(point);\r\n          } else {\r\n              if (typeof baidumap_location !== 'undefined') {\r\n                  // 获取GPS当前位置\r\n                  baidumap_location.getCurrentPosition(function (result) {\r\n                      var point = new BMap.Point(result.lontitude, result.latitude);\r\n                      deferred.resolve(point);\r\n                  }, function (error) {\r\n                      deferred.reject(error);\r\n                  });\r\n              } else {\r\n                  deferred.reject();\r\n              }\r\n          }\r\n          return deferred.promise;\r\n      }\r\n\r\n      /**\r\n       * 添加搜索框自动完成功能\r\n       * @param {*} map\r\n       * @param {*} scope\r\n       */\r\n      function addMapAutoComplete(map, scope) {\r\n          function onConfirm(e) {\r\n              var selectedVal = e.item.value;\r\n              var keywrod = selectedVal.province + selectedVal.city + selectedVal.district + selectedVal.street + selectedVal.business;\r\n              baiDuLocalSearchAndMark(map, keywrod).then(function (results) {\r\n                  scope.baiDuSearchResults = results;\r\n              }, function (err) {\r\n                  //ionicToast.show('检索异常!', 'middle', false, 3000);\r\n                  MessageToaster.error(\"检索异常!\");\r\n              });\r\n          }\r\n          var ac = new BMap.Autocomplete({\r\n              'input': 'mech-map-searchbox',\r\n              'location': map\r\n          });\r\n          ac.addEventListener('onconfirm', onConfirm);\r\n\r\n          var ac1 = new BMap.Autocomplete({\r\n              'input': 'mech-list-searchbox',\r\n              'location': map\r\n          });\r\n          ac1.addEventListener('onconfirm', onConfirm);\r\n      }\r\n\r\n      /**\r\n       * 根据关键字在百度搜索位置信息\r\n       * @param {*} map\r\n       * @param {*} keyword\r\n       */\r\n      function baiDuLocalSearch(map, keyword) {\r\n          var deferred = $q.defer();\r\n\r\n          function onSearchComplete(results) {\r\n              try {\r\n                  var pois = [];\r\n                  if (!angular.isArray(results)) {\r\n                      results = [results];\r\n                  }\r\n                  for (var j = 0; j < results.length; j++) {\r\n                      var result = results[j];\r\n                      for (let i = 0; i < result.ur.length; i++) {\r\n                          var poi = result.getPoi(i),\r\n                            tempPoi = {\r\n                                AccountID: 0,\r\n                                OrgName: poi.title,\r\n                                Address: poi.address,\r\n                                Tel: poi.phoneNumber,\r\n                                Latitude: poi.point.lat,\r\n                                Longitude: poi.point.lng\r\n                            };\r\n\r\n                          if (!!map.scope.currentPosition) {\r\n                              tempPoi[\"Dist\"] = map.getDistance(poi.point, map.scope.currentPosition).toFixed(2);\r\n                          }\r\n                          pois.push(tempPoi);\r\n                      }\r\n                  }\r\n\r\n                  deferred.resolve(pois);\r\n              } catch (err) {\r\n                  deferred.reject(err);\r\n              }\r\n          }\r\n          var local = new BMap.LocalSearch(map, {\r\n              onSearchComplete: onSearchComplete,\r\n              pageCapacity: 10\r\n          });\r\n          local.search(keyword);\r\n          return deferred.promise;\r\n      }\r\n\r\n      /**\r\n       * 根据关键字搜索百度数据并打标记\r\n       * @param {*} map\r\n       * @param {*} keyword\r\n       */\r\n      function baiDuLocalSearchAndMark(map, keyword) {\r\n          var deferred = $q.defer();\r\n\r\n          baiDuLocalSearch(map, keyword).then(function (results) {\r\n              map.clearOverlays();\r\n              var point;\r\n              for (var i = 0; i < results.length; i++) {\r\n                  point = new BMap.Point(results[i].Longitude, results[i].Latitude);\r\n                  addMapMarker(map, point, openInfoWindow, results[i]);\r\n              }\r\n              point && map.panTo(point);\r\n\r\n              deferred.resolve(results);\r\n          }, function (err) {\r\n              deferred.reject(err);\r\n          });\r\n\r\n          return deferred.promise;\r\n      }\r\n\r\n      /**\r\n       * 根据位置搜索本地系统维护的后台数据\r\n       * @param {*} point\r\n       */\r\n      function babyPlanLocalSearch(point) {\r\n          return BaiduService.getNearbyDeposits(point.lng, point.lat);\r\n      }\r\n\r\n      /**\r\n       * 打开当前位置标记的详情页面\r\n       * @param {*} e\r\n       */\r\n      function openInfoWindow(e) {\r\n          var p = e.target,\r\n            map = e.target.map;\r\n\r\n          if (!p.babyPoi) {\r\n              return;\r\n          }\r\n\r\n          if (p.babyPoi.AccountID > 0) {\r\n              map.scope.openDepositInfoForm(p.babyPoi);\r\n          } else {\r\n              var opts = {\r\n                  width: 250, // 信息窗口宽度\r\n                  height: 80, // 信息窗口高度\r\n                  title: p.babyPoi.OrgName,\r\n                  enableMessage: true // 设置允许信息窗发送短息\r\n              },\r\n                content = p.babyPoi.Address;\r\n              var point = new BMap.Point(p.babyPoi.Longitude, p.babyPoi.Latitude);\r\n              var infoWindow = new BMap.InfoWindow(content, opts);\r\n              map.openInfoWindow(infoWindow, point);\r\n          }\r\n      }\r\n\r\n\r\n      return {\r\n          restrict: 'EA',\r\n          scope: {\r\n              mapOptions: '='\r\n          },\r\n          templateUrl: 'ui-map.html',\r\n          replace: true,\r\n          link: function (scope, elm, attrs) {\r\n              var opts = angular.extend({}, scope.mapOptions);\r\n\r\n              var MAP_MODES = scope.MAP_MODES = {\r\n                  MAP_SHOW: 0,\r\n                  MAP_SEARCH: 1,\r\n                  LIST_SHOW: 2,\r\n                  LIST_SEARCH: 3\r\n              };\r\n              if(opts.mode){\r\n                scope.currMode = opts.mode;\r\n              }else{\r\n                scope.currMode = MAP_MODES.MAP_SHOW;\r\n              }\r\n              scope.baiDuSearchResults = [];\r\n              scope.babyPlanSearchResults = [];\r\n              scope.keyword1 = '';\r\n              scope.keyword2 = '';\r\n              scope.depositInfo = {};\r\n              // scope.depositInfo = {\r\n              //   OrgName: '南科大',\r\n              //   Address: '学苑大道1088号',\r\n              //   FrontDeskLink1: 'http://120.76.226.47/group1/M00/00/03/Ci5ek1jxwpWAD29ZAC84O4JhWyE096.jpg',\r\n              //   LicenseType: null,\r\n              //   ContactPhone: '1311111111',\r\n              //   Score: 50,\r\n              //   Remark: '宝宝的托管机构，宝宝的安全托管机构',\r\n              //   Images: ['http://120.76.226.47/group1/M00/00/03/Ci5ek1jxwpWAD29ZAC84O4JhWyE096.jpg', null],\r\n              //   Comments: [{comment: '对于缩略图视图，您可以在文件夹上放一个图片来提醒您它的内容。',create_date: '2017-4-23 12:00:00',creator: 'X*'}, {comment: '机构不错',create_date: '2017-4-21 12:00:00',creator: 'X*'}]\r\n              // }\r\n\r\n              /**\r\n               * 拨打电话\r\n               */\r\n              scope.dial = function (tel) {\r\n                  $window.location.href = 'tel:' + tel;\r\n              };\r\n\r\n              /**\r\n               * 定位\r\n               */\r\n              scope.location = function (poi) {\r\n                  // 切换到地图模式\r\n                  scope.currMode = MAP_MODES.MAP_SHOW;\r\n\r\n                  // 清除所有标记，并添加当前位置标记\r\n                  scope.map.clearOverlays();\r\n                  var point = new BMap.Point(poi.Longitude, poi.Latitude);\r\n                  addMapMarker(scope.map, point, openInfoWindow, poi);\r\n\r\n                  $timeout(function () {\r\n                      scope.map.panTo(point);\r\n                  }, 20);\r\n              };\r\n\r\n              /**\r\n               * 定位到当前位置\r\n               */\r\n              scope.locationCurrent = function () {\r\n                  $timeout(function () {\r\n\r\n                      // 指定Marker的icon属性为Symbol\r\n                      var symbol = new BMap.Symbol(BMap_Symbol_SHAPE_POINT, {\r\n                          scale: 1,//图标缩放大小\r\n                          fillColor: \"orange\",//填充颜色\r\n                          fillOpacity: 0.8//填充透明度\r\n                      });\r\n                      addMapMarker(scope.map, scope.currentPosition, openInfoWindow, null, symbol,'我的位置');\r\n                      scope.currentPosition && scope.map.panTo(scope.currentPosition);\r\n                  }, 20);\r\n              };\r\n\r\n              /**\r\n               * 定位标记所有位置\r\n               */\r\n              scope.locationAll = function () {\r\n                  // 切换到地图模式\r\n                  scope.currMode = MAP_MODES.MAP_SHOW;\r\n\r\n                  // 清除所有标记，并添加当前位置标记\r\n                  scope.map.clearOverlays();\r\n\r\n                  var poi, point;\r\n                  for (var i = 0; i < scope.baiDuSearchResults.length; i++) {\r\n                      poi = scope.baiDuSearchResults[i];\r\n                      point = new BMap.Point(poi.Longitude, poi.Latitude);\r\n                      addMapMarker(scope.map, point, openInfoWindow, poi);\r\n                  }\r\n\r\n                  for (var i = 0; i < scope.babyPlanSearchResults.length; i++) {\r\n                      poi = scope.babyPlanSearchResults[i];\r\n                      point = new BMap.Point(poi.Longitude, poi.Latitude);\r\n                      addMapMarker(scope.map, point, openInfoWindow, poi);\r\n                  }\r\n\r\n                  $timeout(function () {\r\n                      try {\r\n                          point && scope.map.panTo(point);\r\n                      } catch (e) { }\r\n                  }, 20);\r\n              };\r\n\r\n              /**\r\n               * 关闭详情页面\r\n               */\r\n              scope.closeDepositInfoForm = function () {\r\n                  scope.modal.hide();\r\n              };\r\n\r\n              /**\r\n               * 打开详情页面\r\n               */\r\n              scope.openDepositInfoForm = function (deposit) {\r\n                  if (!deposit || deposit.AccountID == 0) return;\r\n\r\n                  // 根据ID获取机构详情和评论信息\r\n                  BaiduService.getDepositInfoWithComments(deposit.AccountID).then(function (depositInfo) {\r\n                      scope.depositInfo = depositInfo;\r\n\r\n                      // 判断详情页面是否已经加载，如果已经加载过直接打开，否则加载并打开页面\r\n                      if (!scope.modal) {\r\n                          $ionicModal.fromTemplateUrl('ui-map-info.html', {\r\n                              scope: scope,\r\n                              animation: 'slide-in-up'\r\n                          }).then(function (modal) {\r\n                              scope.modal = modal;\r\n                              scope.modal.show();\r\n                          });\r\n                      } else {\r\n                          scope.modal.show();\r\n                      }\r\n                  }, function (err) {\r\n                      //ionicToast.show('获取机构详情信息失败!', 'middle', false, 3000);\r\n                      MessageToaster.error(\"获取机构详情信息失败!\");\r\n                  })\r\n              };\r\n\r\n              /**\r\n               * 回退到地图模式\r\n               */\r\n              scope.backToMapView = function () {\r\n                  scope.currMode = MAP_MODES.MAP_SHOW;\r\n              };\r\n\r\n              /**\r\n               * 切换模式\r\n               */\r\n              scope.switchMode = function (mode) {\r\n                  //\r\n                  if (scope.currMode === mode) return;\r\n\r\n                  // 如果切换的目标模式为空，根据当前模式修正为正确目标模式\r\n                  if (!mode) {\r\n                      switch (scope.currMode) {\r\n                          case MAP_MODES.MAP_SEARCH:\r\n                              mode = MAP_MODES.MAP_SHOW;\r\n                              break;\r\n                          case MAP_MODES.MAP_SHOW:\r\n                              mode = MAP_MODES.LIST_SHOW;\r\n                              break;\r\n\r\n                          case MAP_MODES.LIST_SEARCH:\r\n                              mode = MAP_MODES.LIST_SHOW;\r\n                              break;\r\n                          case MAP_MODES.LIST_SHOW:\r\n                              mode = MAP_MODES.MAP_SHOW;\r\n                              break;\r\n                      }\r\n                  }\r\n\r\n                  // 切换关键字\r\n                  // if (scope.currMode <= MAP_MODES.MAP_SEARCH && mode > MAP_MODES.MAP_SEARCH) {\r\n                  //   scope.keyword2 = scope.keyword1\r\n                  // } else if (scope.currMode > MAP_MODES.MAP_SEARCH && mode <= MAP_MODES.MAP_SEARCH) {\r\n                  //   scope.keyword1 = scope.keyword2\r\n                  // }\r\n                  //\r\n\r\n                  // 根据当前模式不同触发不同的行为\r\n                  switch (scope.currMode) {\r\n                      case MAP_MODES.MAP_SEARCH:\r\n                          // if (!scope.keyword1) {\r\n                          //  // ionicToast.show('请录入搜索关键字!', 'middle', false, 3000)\r\n                          //   return\r\n                          // }\r\n                          !!scope.keyword1 && baiDuLocalSearchAndMark(scope.map, scope.keyword1).then(function (results) {\r\n                              scope.baiDuSearchResults = results;\r\n                          }, function (err) {\r\n                              //ionicToast.show('百度本地搜索失败!', 'middle', false, 3000);\r\n                              MessageToaster.error(\"百度本地搜索失败!\");\r\n                          });\r\n                          break;\r\n                      case MAP_MODES.LIST_SEARCH:\r\n                          // if (!scope.keyword2) {\r\n                          //   ionicToast.show('请录入搜索关键字!', 'middle', false, 3000)\r\n                          //   return\r\n                          // }\r\n                          !!scope.keyword2 && baiDuLocalSearchAndMark(scope.map, scope.keyword2).then(function (results) {\r\n                              scope.baiDuSearchResults = results;\r\n                          }, function (err) {\r\n                              //ionicToast.show('百度本地搜索失败!', 'middle', false, 3000);\r\n                              MessageToaster.error(\"百度本地搜索失败!\");\r\n                          });\r\n                          break;\r\n                      case MAP_MODES.LIST_SHOW:\r\n                          mode === MAP_MODES.MAP_SHOW && scope.locationAll();\r\n                          break;\r\n                  }\r\n\r\n                  scope.currMode = mode;\r\n              };\r\n\r\n              /**\r\n               * 地图组件销毁时处理逻辑\r\n               */\r\n              scope.$on('$destroy', function () {\r\n                  scope.modal && scope.modal.remove();\r\n              });\r\n\r\n              var onLoadMapSuccessed = function () {\r\n\r\n                  try{\r\n\r\n                      // 创建百度地图\r\n                      var map = scope.map = buildMap(document.getElementById('map'), opts);\r\n                      map.scope = scope;\r\n\r\n                      // 添加导航栏\r\n                      addMapNavigation(map, BMAP_ANCHOR_BOTTOM_RIGHT);\r\n\r\n                      // 添加地图搜索框自动完成功能\r\n                      addMapAutoComplete(map, scope);\r\n\r\n                      // 设置地图可视区中心位置\r\n                      getCurrentPosition(map, opts).then(function (p) {\r\n                          // 记录当前位置并标记\r\n                          scope.currentPosition = p;\r\n\r\n                          // 指定Marker的icon属性为Symbol\r\n                          var symbol = new BMap.Symbol(BMap_Symbol_SHAPE_POINT, {\r\n                              scale: 1,//图标缩放大小\r\n                              fillColor: \"orange\",//填充颜色\r\n                              fillOpacity: 0.8//填充透明度\r\n                          });\r\n                          var marker = addMapMarker(map, p, openInfoWindow, null, symbol,'我的位置');\r\n                          // 设置为中心\r\n                          map.centerAndZoom(p, 16);\r\n\r\n                          // 根据关键字检索百度相关位置数据和根据当前位置检索后台维护附近数据\r\n                          var bpSearchDeferred = babyPlanLocalSearch(p);\r\n                          var bdSearchDeferred = baiDuLocalSearch(map, opts.keywords);\r\n                          $q.all([bpSearchDeferred, bdSearchDeferred]).then(function (results) {\r\n\r\n                              // 缓存结果\r\n                              scope.baiDuSearchResults = results[1];\r\n                              scope.babyPlanSearchResults = results[0];\r\n\r\n                              // 对满足条件的位置进行标记，\r\n                              var point;\r\n                              for (var j = 0; j < results.length; j++) {\r\n                                  var result = results[j];\r\n                                  for (var i = 0; i < result.length; i++) {\r\n                                      point = new BMap.Point(result[i].Longitude, result[i].Latitude);\r\n                                      addMapMarker(map, point, openInfoWindow, result[i]);\r\n                                  }\r\n                              }\r\n\r\n                              // 把最后一个位置移动到地图中心\r\n                              // point && map.panTo(point)\r\n                          }, function (err) {\r\n                              //ionicToast.show('获取位置信息失败!', 'middle', false, 3000);\r\n                              MessageToaster.error(\"获取位置信息失败!\");\r\n                          })\r\n                      })\r\n                  } catch (err) {\r\n                      alert(\"error\" + err.message);\r\n                  }\r\n\r\n                  // 通知地图加载完成\r\n                  elm.triggerHandler('map-loaded', {\r\n                      bmap: map\r\n                  });\r\n              };\r\n\r\n              // 加载地图失败处理逻辑\r\n              var onLoadMapFailed = function () {\r\n                  opts.onMapLoadFailded();\r\n              };\r\n\r\n              // 加载地图\r\n              loadMap(opts.apiKey).then(onLoadMapSuccessed, onLoadMapFailed);\r\n          }\r\n      }\r\n  });\r\n}());\r\n","Date.prototype.Format = function(fmt) {\n    var o = {\n        \"M+\": this.getMonth() + 1, //月份\n        \"d+\": this.getDate(), //日\n        \"h+\": this.getHours(), //小时\n        \"m+\": this.getMinutes(), //分\n        \"s+\": this.getSeconds(), //秒\n        \"q+\": Math.floor((this.getMonth() + 3) / 3), //季度\n        \"S\": this.getMilliseconds() //毫秒\n    };\n    if (/(y+)/.test(fmt))\n        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n    for (var k in o)\n        if (new RegExp(\"(\" + k + \")\").test(fmt))\n            fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\n    return fmt;\n};","(function() {\n    \"use strict\";\n    angular.module('modules', [\n        'LoginModule',\n        'WxLoginModule',\n        'childrenSteamModule',\n        'registerModule',\n        'tabsModule',\n        'childrenModule',\n        'nearbyModule',\n        'orderModule',\n        'profileModule',\n        'organizerModule',\n        'messageModule',\n        'parentModule',\n        'childrenSettingModule',\n        'teacherModule',\n        'teacherSettingModule',\n        'depositChildrenModule',\n        'vipBuyModule',\n        'vipRecordModule',\n        'vipTipsModule',\n        'commentModule',\n        'exitModule',\n        'photoModule',\n        'MapModule',\n        'eshopEntryModule',\n        'estimateModule',\n        'helpModule',\n        'settingsModule'\n    ]);\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('tools', []).service('tools', tools);\n    function tools() {\n        'ngInject';\n\n        var tools = {\n            getAgent: getAgent\n        };\n\n        function getAgent() {\n           var browser = {\n               versions: function () {\n                   var u = navigator.userAgent,\n                       app = navigator.appVersion;\n                   return { //移动终端浏览器版本信息\n                       trident: u.indexOf('Trident') > -1, //IE内核\n                       presto: u.indexOf('Presto') > -1, //opera内核\n                       webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核\n                       gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核\n                       mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端\n                       ios: !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端\n                       android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或uc浏览器\n                       iPhone: u.indexOf('iPhone') > -1, //是否为iPhone或者QQHD浏览器\n                       iPad: u.indexOf('iPad') > -1, //是否iPad\n                       webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部\n                   };\n               }(),\n               language: (navigator.browserLanguage || navigator.language).toLowerCase()\n           };\n           if (browser.versions.mobile) {\n               var ua = navigator.userAgent.toLowerCase(); //获取判断用的对象\n               if (ua.match(/MicroMessenger/i) == \"micromessenger\") {\n                   return 'wx';\n               } else if (ua.match(/QQ/i) == \"qq\") {\n                   return 'qq';\n               } else\n                   return 'mobile';\n           } else {\n               return 'pc';\n           }\n       }\n\n      return tools;\n    };\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('LoginModule', [\n        'LoginCtrl',\n        'resetPswCtrl',\n        'LoginRouter',\n        'LoginService'\n    ])\n}());\n","(function () {\r\n    \"use strict\";\n    angular.module('LoginCtrl', [])\n        .controller('LoginCtrl', function (Constants, AuthService, MessageToaster, LoginService, $timeout, $scope, Session, $stateParams, StateService, $ionicModal, Role, $http, eshopService) {\r\n            'ngInject';\n\n            var vm = this;\n            vm.isDev = Constants.ENVIRONMENT == 'dev' ? true : false;\n            vm.type = '2';\n            $scope.$on('$ionicView.beforeEnter', validate);\n            //vm.user = { userId: 18603070911, password: \"82267049\" }\n            function validate() {\r\n                if (Session.getData('userId') && Session.getData('token') && Session.getData('userId') != '-1') {\n                    //AuthService.setSession(response.data.uid, response.data.token, response.data.eshop, response.data.type);\n                    $http.defaults.headers.common.token = Session.getData('token');\n                    StateService.clearAllAndGo(AuthService.getNextPath());\r\n                } else {\r\n                    console.log(\"normal login\");\r\n                }\r\n            }\n\n            //WeuiModalLoading\n            vm.login = function (user) {\n                //test\n                //AuthService.setSession('1', '123', '1');\n                //StateService.go(AuthService.getNextPath());\n                //test\n                if (user) {\r\n                    LoginService.login(user.userId, user.password).then(function (response) {\r\n                        console.log(response);\n                        if (response.errno == 0) {\n                            //MessageToaster.success(response.message);\n                            //AuthService.setSession(response.data.uid, response.data.token, response.data.eshop, response.data.type);\n                            //StateService.clearAllAndGo(AuthService.getNextPath());\n\n                            //登录ESHOP\n                            eshopService.signin(response.data.uid, user.password).then(function (data) {\r\n                                AuthService.setSession(response.data.uid, response.data.token, data, response.data.type);\n                                StateService.clearAllAndGo(AuthService.getNextPath());\r\n                            }, function (ex) {\r\n                                MessageToaster.error(ex.error);\r\n                            });\r\n                        } else {\r\n                            MessageToaster.error(response.error);\r\n                        }\r\n                    },\n                    function (error) {\r\n                        MessageToaster.error(error);\r\n                    }).finally(function () {\n                        //WeuiModalLoading.hide();\n                    });\r\n                } else {\r\n                    MessageToaster.error(\"请输入正确账号密码\");\r\n                }\r\n            }\n\n            vm.reset = function(){\n\n              StateService.go(\"resetPsw\");\n            }\n\n            vm.visit = function () {\r\n                AuthService.setSession('-1', '-1', '-1', '-1');\n                StateService.clearAllAndGo(AuthService.getNextPath());\r\n            }\n\n            vm.register = function () {\r\n                StateService.clearAllAndGo(\"register\", { type: vm.type });\r\n            }\r\n\n\n        });\r\n}());\n","(function() {\n  'use strict';\n\n  angular.module('LoginRouter', [])\n    .config(LoginRouter);\n\n\n  function LoginRouter($stateProvider,$urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n    .state('login', {\n      url: \"/login\",\n      templateUrl: 'Login/login.html',\n      controller: 'LoginCtrl',\n      controllerAs: 'vm'\n    })\n    .state('resetPsw', {\n      url: \"/resetPsw\",\n      templateUrl: 'Login/resetPsw.html',\n      controller: 'resetPswCtrl',\n      controllerAs: 'vm'\n    });\n    ;\n  }\n}());\n","(function() {\n    'use strict';\n\n    angular.module('LoginService', [])\n        .factory('LoginService', LoginService);\n\n    function LoginService($q, $http, ResultHandler, Constants) {\n        'ngInject';\n        var service = {\n            login: login,\n            logout: logout\n        };\n\n        function logout() {\n\n        }\n\n        function login(userId, password) {\n            var data = {\n                username: userId,\n                password: password,\n                type: 2\n            };\n            var url = Constants.serverUrl + 'parentLogin';\n            console.log(url);\n            return $http({\n                method: 'post',\n                url: url,\n                data: data\n            }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n        }\n\n        return service;\n\n\n    }\n\n}());\n","(function () {\r\n    \"use strict\";\n    angular.module('resetPswCtrl', [])\n        .controller('resetPswCtrl', function (Constants, AuthService, MessageToaster, LoginService, $timeout, $scope, Session, $stateParams, StateService, $ionicModal, Role, $http, parentService) {\r\n            'ngInject';\n\n            var vm = this;\n            $scope.$on('$ionicView.beforeEnter', validate);\n            function validate() {\r\n              vm.id=\"\";\n            }\n\n            vm.back = function () {\r\n                StateService.back();\n            }\n\n            vm.reset = function () {\r\n              if(vm.id!=\"\"){\r\n                parentService.resetPsw(vm.id).then(function(data) {\r\n                    console.log(data);\r\n                    if(data.errno==0){\r\n                        StateService.back();\r\n                        MessageToaster.info(\"请登录到你的邮箱查询你的新密码\");\r\n                    }else{\r\n                        if(data.errno==10009){\r\n                          MessageToaster.error(\"电子邮件没法发出\");\r\n                        }else if(data.errno==10010){\r\n                          MessageToaster.error(\"帐号未设置电子邮箱，无法重置密码\");\r\n                        }else if(data.errno==10002){\r\n                          MessageToaster.error(\"无此帐号\");\r\n                        }else{\r\n                          MessageToaster.error(data.error);\r\n                        }\r\n                    }\r\n                });\r\n              }else{\r\n                MessageToaster.error(\"帐号和密码不能为空\");\r\n              }\r\n            }\r\n        });\r\n}());\n","(function() {\n    \"use strict\";\n    angular.module('WxLoginModule', [\n        'WxLoginCtrl',\n        'WxLoginRouter',\n        'WxLoginService'\n    ]).run(function($rootScope, Session, StateService,$location,tools) {\n        $rootScope.$on('$stateChangeStart', function(event, next) {\n          console.log(\"stateChangeStart\");\n          console.log(next);\n\n          if (next.url.indexOf('wxlogin')>0 ) {\n              console.log(\"wxlogin\");\n              //alert($location.absUrl());\n              var url = $location.absUrl();\n              //获取ticket参数，因为angualr的路径不规范，会出现http://10.20.68.73:8080/casOauth/?ticket=ST-16-HzIjcAlxbKvlyJQAX2XI-cas01.sustc.edu.cn#/login，无法用公共方法获取\n              var start = url.indexOf('user=') + 5;\n              var end = url.indexOf('&type=');\n              if(!start<=5 && end <= 0){\n                StateService.clearAllAndGo('login');\n              }else{\n                //如果是http://10.20.68.73:8080/casOauth?ticket=ST-16-HzIjcAlxbKvlyJQAX2XI-cas01.sustc.edu.cn这种情况\n                //或者是是http://10.20.68.73:8080/casOauth/#/login?ticket=ST-16-HzIjcAlxbKvlyJQAX2XI-cas01.sustc.edu.cn这种情况\n                if (end == -1 || end < start) end = url.length;\n                console.log(\"wxlogin 1\" + start + \" - \" + end);\n                var myUser = url.toString().substring(start, end);\n                console.log(\"get user = \" + myUser);\n\n                var start = url.indexOf('&type=') + 6;\n                var end = url.indexOf('#/wxlogin');\n                if (end == -1 || end < start) end = url.length;\n                console.log(\"wxlogin 2\" + start + \" - \" + end);\n                var myType = url.toString().substring(start, end);\n                console.log(\"get type = \" + myType);\n                StateService.clearAllAndGo('wxlogin',{user:myUser,type:myType});\n              }\n          }else if(next.url.indexOf('login')>0){\n              console.log(\"login\");\n          }else if(next.url.indexOf('register')>0){\n              //未绑定用户者,进入注册绑定页面\n              console.log(\"register\");\n          }else if(next.url.indexOf('resetPsw')>0){\n              console.log(\"resetPsw\");\n          }else{\n            if (Session.getData('userId') && Session.getData('token')) {\n                //login successed\n            } else {\n                console.log(\"user not login with \");\n                event.preventDefault();\n                if (tools.getAgent() != 'wx')\n                    StateService.clearAllAndGo('login');\n                else\n                    StateService.clearAllAndGo('wxlogin');\n            }\n          }\n        });\n\n    });\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('WxLoginCtrl', [])\n        .controller('WxLoginCtrl', function(Constants, AuthService, MessageToaster, LoginService, $timeout, $scope, Session, $stateParams, StateService, $ionicModal, Role) {\n            'ngInject';\n\n            var vm = this;\n            vm.wxlogin = wxlogin;\n            vm.isDev = Constants.ENVIRONMENT == 'dev' ? true : false;\n            $scope.$on('$ionicView.beforeEnter', validate);\n\n            function validate() {\n                vm.user = $stateParams.user;\n                vm.type = $stateParams.type;\n                console.log(\"vm.type = \"+vm.type+\" with \"+vm.user);\n            /////////////////////////////////////////////////////////\n            //    vm.user = \"o_Nkcw4CsZh5dbE2v8XVLUxfd96A\";//\"oVyGDuNPkAbtljfJKusP4oaCrYG0\";//test\n            //    vm.type = 2;//test\n            ////////////////////////////////////////////////////////\n                //MessageToaster.info('user = '+vm.user);\n                if (vm.user) {\n                    //login failed\n                    //MessageToaster.info('logining....');\n                    vm.info = \"正在登录，请稍后...\";\n                    vm.showLoginModal = showLoginModal;\n                    //vm.roleList = [{type:1,user:'1111'}];//test\n                    vm.showChooseModal = showChooseModal;\n                    vm.login = login;\n                    vm.select = selectChoose;\n                    //获取到微信uid后先尝试登陆对应的用户类型\n                    if(vm.type){\n                        vm.wxlogin(vm.user,vm.type);\n                    }else{\n                        vm.showChooseModal();\n                    }\n                }\n            }\n\n            function wxlogin(userid,type) {\n                console.log(userid+\"  type = \"+type);\n                //MessageToaster.info('准备登录');\n                LoginService.wxLogin(userid,type).then(function(response) {\n                    console.log(response);\n                    if(response.errno==0) {\n                        var result = response.data;\n                        if (result instanceof Array && result.length > 1) {\n                            //modal select type\n                            vm.roleList=result;\n                            //MessageToaster.info(\"have select \"+result.length);\n                            vm.showChooseModal();\n                        }else{\n                            var u=result[0];\n                            if (u.uid != null && u.token != null && u.type != null) {\n                                AuthService.setSession(u.uid, u.token, u.eshop, u.type,userid);\n                                StateService.clearAllAndGo(AuthService.getNextPath());\n                            }\n                        }\n                    }else{\n                        if(response.errno==12004){\n                            //no data found\n                            AuthService.setSession(null, null, null, Role.unknown,userid);\n\n                            StateService.clearAllAndGo(\"register\",{type:vm.type});\n                        }\n                        //MessageToaster.error(response.error);\n                    }\n                });\n            };\n\n            //WeuiModalLoading\n            function login(user) {\n                //WeuiModalLoading.show();\n                //test\n                AuthService.setSession('1', '123', '1');\n                StateService.go(AuthService.getNextPath());\n                //test\n\n                LoginService.login(user.userId, user.password).then(function(response) {\n                    if (vm.modal)\n                        vm.closeDetailsModal();\n                    MessageToaster.success(response.message);\n                    AuthService.setSession(response.data.uid, response.data.token,response.data.eshop,response.data.type);\n                    StateService.clearAllAndGo(AuthService.getNextPath());\n                }).finally(function() {\n                    //WeuiModalLoading.hide();\n                });\n            }\n\n            function showLoginModal() {\n                $ionicModal.fromTemplateUrl('Login/LoginModal.html', {\n                    scope: $scope,\n                    animation: 'slide-in-up'\n                }).then(function(modal) {\n                    vm.modal = modal;\n                    vm.modal.show();\n                });\n\n                vm.closeDetailsModal = function() {\n                    vm.modal.remove();\n                };\n                $scope.$on('$ionicView.leave', function() {\n                    vm.modal.remove();\n                });\n            }\n\n            function showChooseModal() {\n                $ionicModal.fromTemplateUrl('Login/ChooseModal.html', {\n                    scope: $scope,\n                    animation: 'slide-in-up'\n                }).then(function(modal) {\n                    vm.cmodal = modal;\n                    vm.cmodal.show();\n                });\n\n                vm.closeChooseModal = function() {\n                    vm.cmodal.remove();\n                };\n                $scope.$on('$ionicView.leave', function() {\n                    vm.cmodal.remove();\n                });\n            }\n\n            function selectChoose(){\n                if(vm.choose!=null){\n                    //know user choose then login agin with type\n                    wxlogin(vm.user, vm.choose);\n                }\n            }\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('WxLoginRouter', [])\n    .config(wxLoginRouter);\n\n\n  function wxLoginRouter($stateProvider,$urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n    .state('wxlogin', {\n      url: \"/wxlogin?:user&:type\",\n      params:{\n        user:null,\n        type:0\n      },\n      templateUrl: 'WxLogin/wxlogin.html',\n      controller: 'WxLoginCtrl',\n      controllerAs: 'vm'\n    });\n    // $urlRouterProvider.when('', '/wxlogin');\n    //$urlRouterProvider.otherwise('/wxlogin');\n    $urlRouterProvider.otherwise(function($injector, $location) {\n          //console.log(\"Could not find \" + $location);\n          $location.path('/login');\n    });\n\n  }\n}());\n","(function() {\n    'use strict';\n\n    angular.module('WxLoginService', [])\n        .factory('WxLoginService', wxLoginService);\n\n    function wxLoginService($q, $http, ResultHandler, Constants) {\n        'ngInject';\n        var service = {\n            login: login,\n            logout: logout,\n            wxLogin: wxLogin\n        };\n\n        function logout() {\n\n        }\n\n        function login(userId, password) {\n            var data = {\n                id: md5(userId),\n                psw: md5(password)\n            };\n            var url = Constants.serverUrl + 'login';\n            return $http({\n                method: 'post',\n                url: url,\n                data: data\n            }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n        }\n\n        //POST /api/v1/login\n        //Request Body:\n        //{\n        //    \"weixinno\": \"xxxxxx\"\n        //}\n        //Response Body:\n        //{\n        //    \"errno\":0,\n        //    \"error\":\"\",\n        //    \"data\":{\n        //        \"token\":\"fdddsdsdddsssssdfff\",\n        //        \"uid\":\"用户id\",\n        //        \"type\":\"用户类型\"   uid的第一位数\n        //    }\n        //}\n        function wxLogin(wxId,type) {\n            var data = {\n                weixinno: wxId\n            };\n            var end=\"\";\n            if(type!=null){\n                //console.log(\"include type \"+type);\n                data.type=type;\n                end=\"?type=\"+type;\n            }\n            var url = Constants.serverUrl + 'login'+end;\n            return $http({\n                method: 'post',\n                url: url,\n                data: data\n            }).then(function (response) {\n                return response.data;\n            }, function (error) {\n                return $q.reject(error);\n            });\n        }\n\n\n        return service;\n\n\n    }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('childrenModule', [\n    'childrenCtrl',\n    'childrenRouter',\n    'childrenService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('childrenCtrl', [])\n        .controller('childrenCtrl', function($scope, Constants,childrenService,AuthService,Session, StateService,$ionicModal, $ionicSlideBoxDelegate) {\n            'ngInject';\n            console.log(\"childrenCtrl\");\n            var vm = this;\n            vm.activated = false;\n            vm.parent={};\n            vm.fingerprintLogs=[];\n            vm.fingerprintLogSample=[];\n            vm.messages=[];\n            vm.simpleFilter='';\n            vm.offset=0;\n            vm.limit=30;\n            vm.canLoadMore=true;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                //从微信获取家长的基本信息\n                vm.getWechatInfo(AuthService.getWechatId());\n                //vm.parent.wechat={\n                //    \"nickname\": \"Band\",\n                //    \"sex\": 1,\n                //    \"language\": \"zh_CN\",\n                //    \"city\": \"广州\",\n                //    \"province\": \"广东\",\n                //    \"country\": \"中国\",\n                //    \"headimgurl\":  \"http://wx.qlogo.cn/mmopen/g3MonUZtNHkdmzicIlibx6iaFqAc56vxLSUfpb6n5WKSYVY0ChQKkiaJSgQ1dZuTOgvLLrhJbERQQ4eMsv84eavHiaiceqxibJxCfHe/0\"\n                //};\n                vm.getChildrenInfo(AuthService.getLoginID(),vm.offset,vm.limit);\n\n                vm.getChildren();\n            };\n\n            vm.doRefresh = function(offset){\n                vm.getChildrenInfo(AuthService.getLoginID(),offset,vm.limit);\n            };\n\n            vm.getChildrenInfo = function(pId,offset,limit){\n                childrenService.getChildrenAllInfo(pId,offset,limit).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(\"getChildrenAllInfo: \");\n                        console.log(data.data);\n                        if(vm.messages.length == 0)\n                            vm.messages=data.data;\n                        else\n                            vm.messages=vm.messages.concat(data.data);\n                        console.log(vm.messages);\n                        vm.offset+=data.data.length;\n                        if(data.data.length < vm.limit){\n                            console.log(\"it is the last data\");\n                            vm.canLoadMore = false;\n                        }else{\n                            vm.canLoadMore = true;\n                        }\n                        $scope.$broadcast('scroll.refreshComplete');\n                        $scope.$broadcast('scroll.infiniteScrollComplete');\n                    }else{\n                        console.log(data);\n                    }\n                });\n            };\n\n            vm.getWechatInfo = function(wId){\n                console.log(\"wechat id : \"+wId);\n                childrenService.getWechatInfo(wId).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(\"wechat info: \");\n                        console.log(data.data);\n                        vm.parent.wechat = data.data;\n                    }\n                });\n            };\n\n            vm.getImg = function(type){\n                if(type == 1){\n                    return {name:\"就餐\",src:\"img/dinner.png\"};\n                }else if(type == 2){\n                    return {name:\"培训\",src:\"img/traning.png\"};\n                }else if(type == 3){\n                    return {name:\"活动\",src:\"img/play.png\"};\n                }else if(type == 4){\n                    return {name:\"作业\",src:\"img/homework.png\"};\n                }else if(type == 5){\n                    return {name:\"接入\",src:\"img/login.png\"};\n                }else if(type == 6){\n                    return {name:\"送到\",src:\"img/logout.png\"};\n                }else{\n                    return {name:\"未知信息类型\",src:\"img/unknown.png\"};\n                }\n            };\n\n            vm.goPhoto=function(msgIndex,index){\n                Session.setData('temp',vm.msg[msgIndex]);\n                StateService.go(\"photo\",{index:index});\n            };\n\n            vm.star = function(){\n                console.log(\"add star\");\n            };\n\n            vm.getChildren = function(){\n                childrenService.getChildren(AuthService.getLoginID()).then(function(data) {\n                    var title=\"\";\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.childs = data.data;\n                        for(var i=0;i<vm.childs.length;i++){\n                            if(i==vm.childs.length-1)\n                                title+=(vm.childs[i].name+\"的家长\");\n                            else\n                                title+=(vm.childs[i].name+\",\");\n                            //vm.getMsg(vm.childs[i].uid);\n                            //vm.getChildSignIn(vm.childs[i].uid,vm.childs[i].name);\n                        }\n                        vm.parent.title=title;\n                    }\n                    //vm.fingerprintLogs.sort(function(a,b){return a.log-b.log});\n                });\n            };\n\n            vm.change = function(){\n                if(vm.simpleFilterSelect==='-1'){\n                    vm.simpleFilter=\"\";\n                }else if(vm.simpleFilterSelect==='0'){\n                    vm.simpleFilter={datatype:'2'};\n                }else if(vm.simpleFilterSelect==='1'){\n                    vm.simpleFilter={datatype:'1',InfoType:'1'};\n                }else if(vm.simpleFilterSelect==='2'){\n                    vm.simpleFilter={datatype:'1',InfoType:'2'};\n                }else if(vm.simpleFilterSelect==='3'){\n                    vm.simpleFilter={datatype:'1',InfoType:'3'};\n                }else if(vm.simpleFilterSelect==='4'){\n                    vm.simpleFilter={datatype:'1',InfoType:'4'};\n                }else if(vm.simpleFilterSelect==='5'){\n                    vm.simpleFilter={datatype:'1',InfoType:'5'};\n                }else if(vm.simpleFilterSelect==='6'){\n                    vm.simpleFilter={datatype:'1',InfoType:'6'};\n                }\n            };\n\n            vm.getImages=function(msg){\n                vm.imgCount=0;\n                if(msg.PhotoLink1!=null && msg.PhotoLink1!=\"\"){\n                    var data={src:msg.PhotoLink1,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.PhotoLink2!=null && msg.PhotoLink2!=\"\"){\n                    var data={src:msg.PhotoLink2,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.PhotoLink3!=null && msg.PhotoLink3!=\"\"){\n                    var data={src:msg.PhotoLink3,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.PhotoLink4!=null && msg.PhotoLink4!=\"\"){\n                    var data={src:msg.PhotoLink4,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.PhotoLink5!=null && msg.PhotoLink5!=\"\"){\n                    var data={src:msg.PhotoLink5,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.PhotoLink6!=null && msg.PhotoLink6!=\"\"){\n                    var data={src:msg.PhotoLink6,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                console.log(vm.images);\n            };\n\n            $ionicModal.fromTemplateUrl('message/image-modal.html', {\n                scope: $scope,\n                animation: 'slide-in-up'\n            }).then(function(modal) {\n                $scope.modal = modal;\n            });\n\n            $scope.openModal = function() {\n                $ionicSlideBoxDelegate.slide(0);\n                $scope.modal.show();\n            };\n\n            $scope.closeModal = function() {\n                $scope.modal.hide();\n            };\n\n            // Cleanup the modal when we're done with it!\n            $scope.$on('$destroy', function() {\n                $scope.modal.remove();\n            });\n            // Execute action on hide modal\n            $scope.$on('modal.hide', function() {\n                // Execute action\n            });\n            // Execute action on remove modal\n            $scope.$on('modal.removed', function() {\n                // Execute action\n            });\n            $scope.$on('modal.shown', function() {\n                console.log('Modal is shown!');\n            });\n\n            // Call this functions if you need to manually control the slides\n            $scope.next = function() {\n                $ionicSlideBoxDelegate.next();\n            };\n\n            $scope.previous = function() {\n                $ionicSlideBoxDelegate.previous();\n            };\n\n            $scope.goToSlide = function(index,msg) {\n                vm.images=[];\n                vm.getImages(msg);\n                $scope.modal.show();\n                $ionicSlideBoxDelegate.slide(index);\n            };\n\n            // Called each time the slide changes\n            $scope.slideChanged = function(index) {\n                $scope.slideIndex = index;\n            };\n\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('childrenRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.children', {\n        url: \"/children\",\n          views: {\n            'tab-children': {\n              templateUrl: 'children/children.html',\n              controller: 'childrenCtrl',\n              controllerAs: 'vm'\n            }\n          }\n      })\n      .state('tabs.childrenSignIn', {\n        url: \"/childrenSignIn\",\n        views: {\n          'tab-children': {\n            templateUrl: 'children/childrenSignIn.html',\n            controller: 'childrenCtrl',\n            controllerAs: 'vm'\n          }\n        }\n      });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('childrenService', [])\n    .factory('childrenService', childrenService);\n\n  function childrenService( $q, $http,Constants,ResultHandler) {\n    'ngInject';\n    var service = {\n      getMsg:getMsg,\n      getChildrenMsg:getChildrenMsg,\n      getChildren:getChildren,\n      getChildSignIn:getChildSignIn,\n      getChildrenSignIn:getChildrenSignIn,\n      getWechatInfo:getWechatInfo,\n      getChildrenAllInfo:getChildrenAllInfo\n    };\n\n    //字段名\t类型\t备注\n    //InfoID \tint64 \t信息编号，自增即可\n    //PublisherID \tint64 \t发布老师的账号\n    //DepositID \tint64 \t托管机构账号\n    //Longitude \tfloat \t信息发布的位置经度\n    //Latitude \tfloat \t信息发布的位置纬度\n    //ClickCount \tint64 \t总浏览次数\n    //InfoType \tint32 \t信息类型（1：就餐；2：培训；3：活动；4：作业）\n    //Description \tvarchar2 \t老师的描述，不超出1000字\n    //PhotoLink1 \tvarchar2 \t照片/视频1的信息\n    //PhotoLink2 \tvarchar2 \t照片/视频2的信息\n    //PhotoLink3 \tvarchar2 \t照片/视频3的信息\n    //PhotoLink4 \tvarchar2 \t照片/视频4的信息\n    //PhotoLink5 \tvarchar2 \t照片/视频5的信息\n    //PhotoLink6 \tvarchar2 \t照片/视频6的信息\n    //Status\tint\t1:正常发布，2:撤回,\n    //CreateTime \tdatetime \t创建时间\n\n\n    /*\n     GET /api/v1/children/information/{$childuid}\n     return\n     {\n     \"errno\":0,\n     \"error\":\"\",\n     \"data\":{\n     \"childuid\":41000001,\n     \"childname\":\"xxx\",\n     \"childavatarlink\":\"http://xxxxxxx.jpg\",\n     \"timeline\":[\n     {\n     \"timestamp\":1468051200,\n     \"actiontype\":0,\n     \"actionname\":\"signin\",\n     \"actiondata\":{}\n     },\n     {\n     \"timestamp\":146805200,\n     \"actiontype\":1,\n     \"actionname\":\"dining\",\n     \"actiondata\":{\n     \"imgs\":[\"http://xxxxxxxxxx1.jpg\", \"http://xxxxxxxxx2.jpg\",...],\n     \"desc\":\"孩子们愉快的享受着美味\"\n     }\n     },\n     ]\n     \"signin\":1468051200,\n     \"name\":\"yyy\",\n     \"avatarlink\":\"http://yyyyyyyyyyy.jpg\",\n     }\n     ]\n     }\n     */\n    function getMsg(childId) {\n        var url = Constants.serverUrl + 'parent/children/information/'+childId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    /*\n     GET /api/v1/parent/childrenlist/{$parentuid}\n     return\n     {\n     \"errno\":0,\n     \"error\":\"\",\n     \"data\":[\n     {\n     \"uid\":41000001,\n     \"name\":\"xxx\",\n     \"avatarlink\":\"http://xxxxxxx.jpg\",\n     },\n     {\n     \"uid\":41000002,\n     \"name\":\"yyy\",\n     \"avatarlink\":\"http://yyyyyyyyyyy.jpg\",\n     }\n     ]\n     }\n     */\n    function getChildren(parentId) {\n        var url = Constants.serverUrl + 'parent/childrenList/'+parentId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getChildSignIn(childId) {\n        var url = Constants.serverUrl + 'parent/children/signin/'+childId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getChildrenMsg(parentId) {\n        var url = Constants.serverUrl + 'parent/children/allInformation/'+parentId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getChildrenSignIn(parentId) {\n        var url = Constants.serverUrl + 'parent/children/allSignin/'+parentId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getChildrenAllInfo(parentId,offset,count){\n        var url = Constants.serverUrl + 'parent/childrenInformation/fetch/'+parentId+'?offset='+offset+'&limitcount='+count;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    }\n\n    function getWechatInfo(wid) {\n        var url = Constants.serverUrl + 'wechat/'+wid;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n\n  }\n\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('childrenAddCtrl', [])\n        .controller('childrenAddCtrl', function($scope, $stateParams, Constants, StateService, childrenSettingService, AuthService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            vm.page = 1;\n            vm.child = {\n                \"name\": \"\",\n                \"sex\": \"1\",\n                \"remark\": \"\",\n                \"birthday\": \"\",\n                \"relationship\": \"\",\n                \"guardian1\": \"\",\n                \"guardianPhone1\": \"\",\n                \"guardianWorkplace1\": \"\",\n                \"guardian2\": \"\",\n                \"guardianPhone2\": \"\",\n                \"guardianWorkplace2\": \"\",\n                \"homeAddr\": \"\",\n                \"allergyRemark\": \"\",\n                \"allergy\": \"0\",\n                \"favoriteFood\": \"\",\n                \"grade\": \"\",\n                \"schoolName\": \"\",\n                \"classTeacherPhone\": \"\"\n            };//{sex:'1'};\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                //console.log($stateParams);\n                //vm.cid = $stateParams.cid;\n                ////0:query 1:create 2:update\n                //vm.type = $stateParams.type;\n                //if(vm.type=='0')vm.isEditing = false;\n                //else vm.isEditing = true;\n\n                vm.activated = true;\n                vm.version = Constants.buildID;\n\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.next=function(){\n                if(vm.page==5){\n                    //save data\n                    //alert('尚未开放');\n                    console.log(vm.child.birthday);\n                    var date=new Date();\n                    console.log(vm.child.birthday.getTime());\n\n                    childrenSettingService.registerChild(vm.child, AuthService.getLoginID()).then(function (data) {\n                        console.log(data);\n                        if (data.errno == 0) {\n                            //var userId = data.data.uid;\n                            //wxlogin(vm.user.wechat);\n                            StateService.back();\n                        }\n                    });\n                }else{\n                    vm.page++;\n                }\n            };\n\n            vm.prev=function(){\n                if(vm.page==1){\n                    // it is the first,no prev\n                }else{\n                    vm.page--;\n                }\n            };\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('childrenEditCtrl', [])\n        .controller('childrenEditCtrl', function($scope, $stateParams,$filter, Constants, StateService,childrenSettingService,AuthService,Session,MessageToaster) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n\n            vm.query = function(id){\n                console.log(\"child id = \"+id);\n                vm.child=Session.getData('temp');\n                childrenSettingService.queryChild(id).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n\n                        //日期格式字符串转日期\n                        data.data.Birthday =data.data.Birthday && new Date(data.data.Birthday);\n                        vm.child = data.data;\n                    }\n                });\n\n            };\n\n\n            $scope.$on('$ionicView.afterEnter', activate);\n            function activate() {\n                console.log($stateParams);\n                vm.cid = $stateParams.cid;\n                //0:query 1:create 2:update\n                vm.type = $stateParams.type;\n                if(vm.type=='0')vm.isEditing = false;\n                else vm.isEditing = true;\n\n                vm.activated = true;\n                vm.version = Constants.buildID;\n\n                if(vm.type!='1')vm.query(vm.cid);\n                else {\n                    vm.child = {\n                        \"Name\": \"\",\n                        \"Sex\": \"\",\n                        \"Remark\": \"\",\n                        \"Birthday\": \"\",\n                        \"Guardian1\": \"\",\n                        \"Guardianphone1\": \"\",\n                        \"Guardianworkplace1\": \"\",\n                        \"Guardian2\": \"\",\n                        \"Guardianphone2\": \"\",\n                        \"Guardianworkplace2\": \"\",\n                        \"HomeAddr\": \"\",\n                        \"AllergyRemark\": \"\",\n                        \"Allergy\": \"\",\n                        \"FavoriteFood\": \"\",\n                        \"Grade\": \"\",\n                        \"SchoolName\": \"\",\n                        \"ClassTeacherPhone\": \"\",\n                        \"Course\": \"\",\n                        \"OpenTime\": \"\",\n                        \"DepositCardID\": \"\",\n                        \"DepositType\": \"\",\n                        \"Benefit\": \"\"\n                    };\n                }\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.save=function(valid,dirty){\n                //console.log(\"valid = \"+valid+\" dirty = \"+dirty);\n                if (valid && dirty) {\n\n                    //日期转为日期格式字符串\n                    vm.child.Birthday = vm.child.Birthday && $filter('date')(vm.child.Birthday, \"yyyy-MM-dd hh:mm\");\n\n                    //save\n                    if (vm.type == '1') {\n                        //create\n                        childrenSettingService.registerChild(vm.child, AuthService.getLoginID()).then(function (data) {\n                            if (data.errno == 0) {\n                                //var userId = data.data.uid;\n                                //wxlogin(vm.user.wechat);\n                                StateService.back();\n                            }\n                        });\n                    } else {\n                        //update\n                        childrenSettingService.updateChild(vm.child).then(function (data) {\n                            console.log(data);\n                            if (data.errno == 0) {\n                                StateService.back();\n                            }\n                        });\n                    }\n                }else{\n                    if(!valid){\n                        MessageToaster.info(\"内容不全，无法更新\");\n                    }else if(!dirty) {\n                        MessageToaster.info(\"无内容修改，无需更新\");\n                    }\n                }\n            };\n\n\n        });\n}());\n","(function() {\n  \"use strict\";\n  angular.module('childrenSettingModule', [\n    'childrenSettingCtrl',\n    'childrenEditCtrl',\n    'childrenAddCtrl',\n    'childrenSettingRouter',\n    'childrenSettingService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('childrenSettingCtrl', [])\n        .controller('childrenSettingCtrl', function($scope,Constants,StateService,$ionicListDelegate,$ionicPopup,AuthService,parentService,Session,childrenSettingService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.getChildren();\n            }\n\n            vm.getChildren = function(){\n                parentService.queryChildren(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.children = data.data;\n                    }\n                });\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.goTo=function(id,child){\n                //查看孩子信息\n                $ionicListDelegate.closeOptionButtons();\n                Session.setData('temp',child);\n                StateService.go('childrenEdit',{cid:id,type:0});\n            };\n\n            vm.newChild=function(){\n                //创建新的孩子信息\n                $ionicListDelegate.closeOptionButtons();\n                StateService.go('childrenEdit',{type:1});\n            };\n\n            vm.newChild2=function(){\n                //创建新的孩子信息,使用新局部编写界面\n                $ionicListDelegate.closeOptionButtons();\n                StateService.go('childrenAdd');\n            };\n\n            vm.editChild=function(id,child){\n                //编辑孩子信息\n                $ionicListDelegate.closeOptionButtons();\n                Session.setData('temp',child);\n                StateService.go('childrenEdit',{cid:id,type:2});\n            };\n\n            vm.delChild=function(child){\n                //删除孩子信息\n                $ionicListDelegate.closeOptionButtons();\n\n                var confirmPopup = $ionicPopup.confirm({\n                    title: '确定要删除此孩子:'+child.name,\n                    buttons: [\n                        {text: '取消', type: 'button-positive'},\n                        {text: '确定', type: 'button-assertive',onTap: function(e) { return true}}\n                    ]\n                });\n                confirmPopup.then(function(result) {\n                    if(result) {\n                        console.log('confirm to del this child '+child.uid);\n                        //delete(id);\n                        childrenSettingService.deleteChild(child.uid).then(function(data) {\n                            console.log(data);\n                            if (data.errno == 0) {\n                                console.log(data.data);\n                              \n                            }\n                        });\n                    } else {\n                        console.log('cancel delete');\n                    }\n                });\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('childrenSettingRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('childrenSetting', {\n        url: \"/childrenSetting\",\n        templateUrl: 'childrenSetting/childrenSetting.html',\n        controller: 'childrenSettingCtrl',\n        controllerAs: 'vm'\n      })\n      .state('childrenAdd', {\n        url: \"/childrenAdd\",\n        templateUrl: 'childrenSetting/childrenAdd.html',\n        controller: 'childrenAddCtrl',\n        controllerAs: 'vm'\n      })\n      .state('childrenEdit', {\n        url: \"/childrenEdit?:cid&:type\",\n        params: {\n          cid : null,\n          type : '0'\n        },\n        templateUrl: 'childrenSetting/childrenEdit.html',\n        controller: 'childrenEditCtrl',\n        controllerAs: 'vm'\n      })\n    ;\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('childrenSettingService', [])\n    .factory('childrenSettingService', childrenSettingService);\n\n  function childrenSettingService( $q, $http, Constants, ResultHandler) {\n    'ngInject';\n    var service = {\n      queryChild:queryChild,\n      updateChild:updateChild,\n      deleteChild:deleteChild,\n      registerChild:registerChild\n    };\n\n    //POST\n    //URL: /api/v1/account/register/children\n    //Request Body:\n    //{\n    //  \"name\":\"小强\",\n    //    \"sex\":1,\n    //    \"fingerfeature\":\"value\"\n    //}\n    //Response Body:\n    //{\n    //  \"errno\":0,\n    //    \"error\":\"\",\n    //    \"data\":{\n    //      \"uid\":40000001\n    //    }\n    //}\n    //need token in headers\n    // \"name\", \"sex\", \"fingerfeature\", \"remark\", \"grade\", \"birthday\", \"homeaddr\", \"allergy\", \"allergyremark\",\"favoritefood\",\n    //\"guardian1\",\"guardianphone1\",\"guardianworkplace1\", \"guardian2\", \"guardianphone2\", \"guardianworkplace2\", \"schoolname\", \"classteacherphone\",\n    //    \"course\",\"opentime\", \"depositcardid\", \"deposittype\", \"benefit\n    function registerChild(child,parentId) {\n      var time=child.birthday.toISOString().slice(0, 19).replace('T', ' ');\n      var data = {\n        \"p_uid\":parentId,\n        \"name\": child.name,\n        \"sex\": child.sex,\n        \"relationship\": child.relationship,\n        \"remark\": child.remark,\n        \"birthday\":time,\n        \"guardian1\":child.guardian1,\n        \"guardianphone1\":child.guardianPhone1,\n        \"guardianworkplace1\":child.guardianWorkplace1,\n        \"guardian2\":child.guardian2,\n        \"guardianphone2\":child.guardianPhone2,\n        \"guardianworkplace2\":child.guardianWorkplace2,\n        \"homeaddr\":child.homeAddr,\n        \"allergyremark\":child.allergyRemark,\n        \"allergy\":child.allergy,\n        \"favoritefood\":child.favoriteFood,\n        \"grade\":child.grade,\n        \"schoolname\":child.schoolName,\n        \"classteacherphone\":child.classTeacherPhone\n      };\n      console.log(JSON.stringify(data));\n      var url = Constants.serverUrl + 'account/register/children';\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    //http://172.18.1.166/api/v1/account/children/update/40000015     POST 更新孩子信息\n    function updateChild(child) {\n      var data = {\n        \"name\": child.Name,\n        \"sex\": child.Sex,\n        \"remark\": child.Remark!=null?child.Remark:\"\",\n        \"birthday\":child.Birthday!=null?child.Birthday:\"\",\n        \"guardian1\":child.Guardian1!=null?child.Guardian1:\"\",\n        \"guardianphone1\":child.GuardianPhone1!=null?child.GuardianPhone1:\"\",\n        \"guardianworkplace1\":child.GuardianWorkplace1!=null?child.GuardianWorkplace1:\"\",\n        \"guardian2\":child.Guardian2!=null?child.Guardian2:\"\",\n        \"guardianphone2\":child.GuardianPhone2!=null?child.GuardianPhone2:\"\",\n        \"guardianworkplace2\":child.GuardianWorkplace2!=null?child.GuardianWorkplace2:\"\",\n        \"homeaddr\":child.HomeAddr!=null?child.HomeAddr:\"\",\n        \"allergyremark\":child.AllergyRemark!=null?child.AllergyRemark:\"\",\n        \"allergy\":child.Allergy!=null?child.Allergy:\"0\",\n        \"favoritefood\":child.FavoriteFood!=null?child.FavoriteFood:\"\",\n        \"grade\":child.Grade!=null?child.Grade:\"0\",\n        \"schoolname\":child.SchoolName!=null?child.SchoolName:\"\",\n        \"classteacherphone\":child.ClassTeacherPhone!=null?child.ClassTeacherPhone:\"\",\n        \"course\":child.Course!=null?child.Course:\"\",\n        \"opentime\":child.OpenTime!=null?child.OpenTime:\"\",\n        \"depositcardid\":child.DepositCardID!=null?child.DepositCardID:\"\",\n        \"deposittype\":child.DepositType!=null?child.DepositType:\"0\",\n        \"benefit\":child.Benefit!=null?child.Benefit:\"0\"\n      };\n      console.log(JSON.stringify(data));\n      var url = Constants.serverUrl + 'account/children/update/'+child.AccountID;\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    //http://172.18.1.166/api/v1/account/children/query/40000015    GET 获取孩子信息\n    function queryChild(childId) {\n      var url = Constants.serverUrl + 'account/children/query/'+childId;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function deleteChild(childId) {\n      var url = Constants.serverUrl + 'account/children/delete/'+childId;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('childrenSteamModule', [\n    'childrenSteamCtrl',\n    'childrenSteamRouter',\n    'childrenSteamService',\n    'videoCtrl'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('childrenSteamCtrl', [])\n        .controller('childrenSteamCtrl', function($scope,$ionicPopup,$sce,Constants,childrenService,childrenSteamService,AuthService,Session, StateService,$ionicModal, $ionicSlideBoxDelegate) {\n            'ngInject';\n            console.log(\"childrenSteamCtrl\");\n            var vm = this;\n            vm.activated = false;\n            vm.parent={};\n            vm.deposits={};\n            vm.fingerprintLogs=[];\n            vm.messages=[];\n            vm.cameras=[];\n            vm.myComment;\n            vm.simpleFilter='';\n            vm.offset=[0,0,0];\n            vm.limit=30;\n            vm.canLoadMore=[true,true,true];\n            $scope.$on('$ionicView.afterEnter', activate);\n            vm.steam=1;\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.user = AuthService.getLoginID();\n                //从微信获取家长的基本信息\n                //vm.getWechatInfo(AuthService.getWechatId());\n                //vm.parent.wechat={\n                //    \"nickname\": \"Band\",\n                //    \"sex\": 1,\n                //    \"language\": \"zh_CN\",\n                //    \"city\": \"广州\",\n                //    \"province\": \"广东\",\n                //    \"country\": \"中国\",\n                //    \"headimgurl\":  \"http://wx.qlogo.cn/mmopen/g3MonUZtNHkdmzicIlibx6iaFqAc56vxLSUfpb6n5WKSYVY0ChQKkiaJSgQ1dZuTOgvLLrhJbERQQ4eMsv84eavHiaiceqxibJxCfHe/0\"\n                //};\n                //vm.getChildrenInfo(AuthService.getLoginID(),vm.offset,vm.limit);\n                //vm.getChildren();\n                vm.getChildrenDeposit();\n                vm.steam=Session.getData('steam');\n\n                if(vm.steam===null){\n                  vm.steam=1;\n                  console.log('steam = '+vm.steam);\n                }\n                vm.changeSteam(vm.steam);\n            };\n\n            vm.changeSteam = function(index){\n              Session.setData('steam',index);\n              if(index===0){\n                vm.showCamera=true;\n                vm.showFingerPrint=false;\n                vm.showNotificatin=false;\n                if(vm.cameras.length===0)vm.getCamera();\n              }else if(index===1){\n                vm.showCamera=false;\n                vm.showFingerPrint=true;\n                vm.showNotificatin=false;\n                console.log('fingerprintLogs = '+vm.fingerprintLogs);\n                if(vm.fingerprintLogs.length===0)vm.getFingerPrint(0,vm.limit);\n              }else if(index===2){\n                vm.showCamera=false;\n                vm.showFingerPrint=false;\n                vm.showNotificatin=true;\n                if(vm.messages.length===0)vm.getMessage(0,vm.limit);\n              }\n            };\n\n            vm.watchVideo = function(video,name){\n              video.deposit_name=name;\n              Session.setData('video',JSON.stringify(video));\n              StateService.go('video');\n            };\n\n            vm.getChildrenDeposit = function(){\n              childrenSteamService.getChildrenDeposit(AuthService.getLoginID()).then(function(data) {\n                  if (data.errno == 0) {\n                      console.log(data.data);\n                      vm.deposits=data.data;\n                  }\n              });\n            };\n\n            vm.getCamera = function(){\n              //获取摄像头信息\n              for(var i=0;i<vm.deposits.length;i++){\n                var id=vm.deposits[i].DepositID;\n                //get camera\n                if(id!=null){\n                  //console.log('http://v.zxing-tech.cn/?v='+id);\n                  //vm.cameraSrc = $sce.trustAsResourceUrl('http://v.zxing-tech.cn/?v='+id);\n                  childrenSteamService.getCamera(id).then(function(data) {\n                      vm.cameras[vm.cameras.length]=data.data;\n                  });\n                }\n              }\n            };\n\n            vm.getFingerPrint = function(offset,limit){\n              console.log(\"getFingerPrint\");\n              childrenSteamService.getAllChildrenSignIn(AuthService.getLoginID(),offset,limit).then(function(data) {\n                  if (data.errno == 0) {\n                      console.log(data.data);\n                      if(vm.fingerprintLogs.length == 0)\n                          vm.fingerprintLogs=data.data;\n                      else\n                          vm.fingerprintLogs=vm.fingerprintLogs.concat(data.data);\n                      console.log(vm.fingerprintLogs);\n                      vm.offset[1]+=data.data.length;\n                      if(data.data.length < vm.limit){\n                          console.log(\"it is the last data\");\n                          vm.canLoadMore[1] = false;\n                      }else{\n                          vm.canLoadMore[1] = true;\n                      }\n                      $scope.$broadcast('scroll.refreshComplete');\n                      $scope.$broadcast('scroll.infiniteScrollComplete');\n                  }else{\n                      console.log(data);\n                  }\n              });\n            };\n\n            vm.getMessage = function(offset,limit){\n              console.log(\"getMessage\");\n              childrenSteamService.getAllChildrenMsg(AuthService.getLoginID(),offset,limit).then(function(data) {\n                  if (data.errno == 0) {\n                      console.log(data.data);\n                      var start=0;\n                      if(vm.messages.length == 0)\n                          vm.messages=data.data;\n                      else{\n                          start=vm.messages.length;\n                          vm.messages=vm.messages.concat(data.data);\n                        }\n                      console.log(vm.messages);\n                      //update comment\n                      for(var i=0;i<data.data.length;i++){\n                        //vm.messages[start+i]\n                        childrenSteamService.getDailyComment(vm.messages[start+i].InfoID,start+i).then(function(sdata) {\n                            if (data.errno == 0) {\n                                console.log(\"getDailyComment: \");\n                                console.log(sdata.data);\n                                var index=sdata.data.index;\n                                vm.messages[index].comments = sdata.data.comments;\n                                vm.messages[index].likes = sdata.data.likes;\n                            }\n                        });\n                      }\n                      vm.offset[2]+=data.data.length;\n                      if(data.data.length < vm.limit){\n                          console.log(\"it is the last data\");\n                          vm.canLoadMore[2] = false;\n                      }else{\n                          vm.canLoadMore[2] = true;\n                      }\n                      $scope.$broadcast('scroll.refreshComplete');\n                      $scope.$broadcast('scroll.infiniteScrollComplete');\n                  }else{\n                      console.log(data);\n                  }\n              });\n            };\n\n            vm.doRefresh = function(type,offset){\n                if(index===0){\n                  vm.getCamera();\n                }else if(index===1){\n                  vm.getFingerPrint(offset,vm.limit);\n                }else if(index===2){\n                  vm.getMessage(offset,vm.limit);\n                }\n            };\n\n            vm.getChildrenInfo = function(pId,offset,limit){\n                childrenService.getChildrenAllInfo(pId,offset,limit).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(\"getChildrenAllInfo: \");\n                        console.log(data.data);\n                        if(vm.messages.length == 0)\n                            vm.messages=data.data;\n                        else\n                            vm.messages=vm.messages.concat(data.data);\n                        console.log(vm.messages);\n                        vm.offset+=data.data.length;\n                        if(data.data.length < vm.limit){\n                            console.log(\"it is the last data\");\n                            vm.canLoadMore = false;\n                        }else{\n                            vm.canLoadMore = true;\n                        }\n                        $scope.$broadcast('scroll.refreshComplete');\n                        $scope.$broadcast('scroll.infiniteScrollComplete');\n                    }else{\n                        console.log(data);\n                    }\n                });\n            };\n\n            vm.getWechatInfo = function(wId){\n                console.log(\"wechat id : \"+wId);\n                childrenService.getWechatInfo(wId).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(\"wechat info: \");\n                        console.log(data.data);\n                        vm.parent.wechat = data.data;\n                    }\n                });\n            };\n\n            vm.getImg = function(type){\n                if(type == 1){\n                    return {name:\"就餐\",src:\"img/dinner.png\"};\n                }else if(type == 2){\n                    return {name:\"培训\",src:\"img/traning.png\"};\n                }else if(type == 3){\n                    return {name:\"活动\",src:\"img/play.png\"};\n                }else if(type == 4){\n                    return {name:\"作业\",src:\"img/homework.png\"};\n                }else if(type == 5){\n                    return {name:\"接入\",src:\"img/login.png\"};\n                }else if(type == 6){\n                    return {name:\"送到\",src:\"img/logout.png\"};\n                }else{\n                    return {name:\"未知信息类型\",src:\"img/unknown.png\"};\n                }\n            };\n\n            vm.goPhoto=function(msgIndex,index){\n                Session.setData('temp',vm.msg[msgIndex]);\n                StateService.go(\"photo\",{index:index});\n            };\n\n            vm.star = function(){\n                console.log(\"add star\");\n            };\n\n            vm.getDailyComments = function(infoid,index){\n              console.log(\"getDailyComments index = \"+index);\n              childrenSteamService.getDailyComment(infoid,index).then(function(sdata) {\n                  if (sdata.errno == 0) {\n                      console.log(\"getDailyComment: \");\n                      console.log(sdata.data);\n                      var sindex=sdata.data.index;\n                      vm.messages[sindex].comments = sdata.data.comments;\n                      vm.messages[sindex].likes = sdata.data.likes;\n                  }\n              });\n            };\n\n            vm.like = function(info,index){\n              //如果已经like，去like\n              //没有like，加like\n              console.log(info+\" and index=\"+index);\n              var needAdd = true;\n              for (var i=0;i<info.likes.length;i++){\n                if(info.likes[i].CommentBy==vm.user){\n                  //remove\n                  needAdd=false;\n                  childrenSteamService.delDailyComment(info.likes[i].CommentID).then(function(data) {\n                      console.log('rmComment likes');\n                      console.log(data);\n                      vm.getDailyComments(info.InfoID,index);\n                      return;\n                  });\n                }\n              }\n              //add\n              if(needAdd){\n                var comment = {infoid:info.InfoID,commentby:vm.user,commentdata:null};\n                childrenSteamService.createDailyComment(comment).then(function(data) {\n                    console.log('addComment likes');\n                    console.log(data);\n                    vm.getDailyComments(info.InfoID,index);\n                    return;\n                });\n              }\n            };\n\n            vm.comment = function(info,index){\n                console.log(info+\" and index=\"+index);\n                vm.showPopup(info,index);\n            };\n\n            vm.rmComment = function(comment,index){\n              childrenSteamService.delDailyComment(comment.CommentID).then(function(data) {\n                  console.log('rmComment');\n                  console.log(data);\n                  vm.getDailyComments(comment.InfoID,index);\n              });\n            };\n\n            vm.showPopup = function(info,index) {\n                var myPopup = $ionicPopup.show({\n                  template: '<input type=\"edittext\" ng-model=\"vm.myComment\">',\n                  title: '请输入评论内容',\n                  scope: $scope,\n                  buttons: [\n                    { text: '取消' },\n                    {\n                      text: '<b>提交</b>',\n                      type: 'button-positive',\n                      onTap: function(e) {\n                        if (!vm.myComment) {\n                          e.preventDefault();\n                        } else {\n                          return vm.myComment;\n                        }\n                      }\n                    }\n                  ]\n                  });\n\n                  myPopup.then(function(res) {\n                    console.log('Tapped!', res);\n                    //add comment\n                    if(res.length>0){\n                      var comment = {infoid:info.InfoID,commentby:vm.user,commentdata:res};\n                      childrenSteamService.createDailyComment(comment).then(function(data) {\n                          console.log('addComment comments');\n                          console.log(data);\n                          vm.myComment = null;\n                          vm.getDailyComments(info.InfoID,index);\n                          return;\n                      });\n                    }\n                  });\n            };\n\n            vm.getChildren = function(){\n                childrenService.getChildren(AuthService.getLoginID()).then(function(data) {\n                    var title=\"\";\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.childs = data.data;\n                        for(var i=0;i<vm.childs.length;i++){\n                            if(i==vm.childs.length-1)\n                                title+=(vm.childs[i].name+\"的家长\");\n                            else\n                                title+=(vm.childs[i].name+\",\");\n                            //vm.getMsg(vm.childs[i].uid);\n                            //vm.getChildSignIn(vm.childs[i].uid,vm.childs[i].name);\n                        }\n                        vm.parent.title=title;\n                    }\n                    //vm.fingerprintLogs.sort(function(a,b){return a.log-b.log});\n                });\n            };\n\n            vm.change = function(){\n                if(vm.simpleFilterSelect==='-1'){\n                    vm.simpleFilter=\"\";\n                }else if(vm.simpleFilterSelect==='0'){\n                    vm.simpleFilter={datatype:'2'};\n                }else if(vm.simpleFilterSelect==='1'){\n                    vm.simpleFilter={datatype:'1',InfoType:'1'};\n                }else if(vm.simpleFilterSelect==='2'){\n                    vm.simpleFilter={datatype:'1',InfoType:'2'};\n                }else if(vm.simpleFilterSelect==='3'){\n                    vm.simpleFilter={datatype:'1',InfoType:'3'};\n                }else if(vm.simpleFilterSelect==='4'){\n                    vm.simpleFilter={datatype:'1',InfoType:'4'};\n                }else if(vm.simpleFilterSelect==='5'){\n                    vm.simpleFilter={datatype:'1',InfoType:'5'};\n                }else if(vm.simpleFilterSelect==='6'){\n                    vm.simpleFilter={datatype:'1',InfoType:'6'};\n                }\n            };\n\n            vm.getImages=function(msg){\n                vm.imgCount=0;\n                if(msg.PhotoLink1!=null && msg.PhotoLink1!=\"\"){\n                    var data={src:msg.PhotoLink1,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.PhotoLink2!=null && msg.PhotoLink2!=\"\"){\n                    var data={src:msg.PhotoLink2,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.PhotoLink3!=null && msg.PhotoLink3!=\"\"){\n                    var data={src:msg.PhotoLink3,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.PhotoLink4!=null && msg.PhotoLink4!=\"\"){\n                    var data={src:msg.PhotoLink4,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.PhotoLink5!=null && msg.PhotoLink5!=\"\"){\n                    var data={src:msg.PhotoLink5,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.PhotoLink6!=null && msg.PhotoLink6!=\"\"){\n                    var data={src:msg.PhotoLink6,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                console.log(vm.images);\n            };\n\n            $ionicModal.fromTemplateUrl('message/image-modal.html', {\n                scope: $scope,\n                animation: 'slide-in-up'\n            }).then(function(modal) {\n                $scope.modal = modal;\n            });\n\n            $scope.openModal = function() {\n                $ionicSlideBoxDelegate.slide(0);\n                $scope.modal.show();\n            };\n\n            $scope.closeModal = function() {\n                $scope.modal.hide();\n            };\n\n            // Cleanup the modal when we're done with it!\n            $scope.$on('$destroy', function() {\n                $scope.modal.remove();\n            });\n            // Execute action on hide modal\n            $scope.$on('modal.hide', function() {\n                // Execute action\n            });\n            // Execute action on remove modal\n            $scope.$on('modal.removed', function() {\n                // Execute action\n            });\n            $scope.$on('modal.shown', function() {\n                console.log('Modal is shown!');\n            });\n\n            // Call this functions if you need to manually control the slides\n            $scope.next = function() {\n                $ionicSlideBoxDelegate.next();\n            };\n\n            $scope.previous = function() {\n                $ionicSlideBoxDelegate.previous();\n            };\n\n            $scope.goToSlide = function(index,msg) {\n                vm.images=[];\n                vm.getImages(msg);\n                $scope.modal.show();\n                $ionicSlideBoxDelegate.slide(index);\n            };\n\n            // Called each time the slide changes\n            $scope.slideChanged = function(index) {\n                $scope.slideIndex = index;\n            };\n\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('childrenSteamRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.childrenSteam', {\n        url: \"/childrenSteam\",\n          views: {\n            'tab-childrenSteam': {\n              templateUrl: 'childrenSteam/childrenSteam.html',\n              controller: 'childrenSteamCtrl',\n              controllerAs: 'vm'\n            }\n          }\n      })\n      .state('video', {\n        url: \"/video\",\n        templateUrl: 'childrenSteam/video.html',\n        controller: 'videoCtrl',\n        controllerAs: 'vm'\n      });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('childrenSteamService', [])\n    .factory('childrenSteamService', childrenSteamService);\n\n  function childrenSteamService( $q, $http,Constants,ResultHandler) {\n    'ngInject';\n    var service = {\n      getMsg:getMsg,\n      getChildrenMsg:getChildrenMsg,\n      getChildren:getChildren,\n      getChildSignIn:getChildSignIn,\n      getChildrenSignIn:getChildrenSignIn,\n      getWechatInfo:getWechatInfo,\n      getChildrenAllInfo:getChildrenAllInfo,\n      getAllChildrenSignIn:getAllChildrenSignIn,\n      getAllChildrenMsg:getAllChildrenMsg,\n      getChildrenDeposit:getChildrenDeposit,\n      getDailyComment:getDailyComment,\n      createDailyComment:createDailyComment,\n      delDailyComment:delDailyComment,\n      getCamera:getCamera\n    };\n\n    //字段名\t类型\t备注\n    //InfoID \tint64 \t信息编号，自增即可\n    //PublisherID \tint64 \t发布老师的账号\n    //DepositID \tint64 \t托管机构账号\n    //Longitude \tfloat \t信息发布的位置经度\n    //Latitude \tfloat \t信息发布的位置纬度\n    //ClickCount \tint64 \t总浏览次数\n    //InfoType \tint32 \t信息类型（1：就餐；2：培训；3：活动；4：作业）\n    //Description \tvarchar2 \t老师的描述，不超出1000字\n    //PhotoLink1 \tvarchar2 \t照片/视频1的信息\n    //PhotoLink2 \tvarchar2 \t照片/视频2的信息\n    //PhotoLink3 \tvarchar2 \t照片/视频3的信息\n    //PhotoLink4 \tvarchar2 \t照片/视频4的信息\n    //PhotoLink5 \tvarchar2 \t照片/视频5的信息\n    //PhotoLink6 \tvarchar2 \t照片/视频6的信息\n    //Status\tint\t1:正常发布，2:撤回,\n    //CreateTime \tdatetime \t创建时间\n\n\n    /*\n     GET /api/v1/children/information/{$childuid}\n     return\n     {\n     \"errno\":0,\n     \"error\":\"\",\n     \"data\":{\n     \"childuid\":41000001,\n     \"childname\":\"xxx\",\n     \"childavatarlink\":\"http://xxxxxxx.jpg\",\n     \"timeline\":[\n     {\n     \"timestamp\":1468051200,\n     \"actiontype\":0,\n     \"actionname\":\"signin\",\n     \"actiondata\":{}\n     },\n     {\n     \"timestamp\":146805200,\n     \"actiontype\":1,\n     \"actionname\":\"dining\",\n     \"actiondata\":{\n     \"imgs\":[\"http://xxxxxxxxxx1.jpg\", \"http://xxxxxxxxx2.jpg\",...],\n     \"desc\":\"孩子们愉快的享受着美味\"\n     }\n     },\n     ]\n     \"signin\":1468051200,\n     \"name\":\"yyy\",\n     \"avatarlink\":\"http://yyyyyyyyyyy.jpg\",\n     }\n     ]\n     }\n     */\n    function getMsg(childId) {\n        var url = Constants.serverUrl + 'parent/children/information/'+childId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    /*\n     GET /api/v1/parent/childrenlist/{$parentuid}\n     return\n     {\n     \"errno\":0,\n     \"error\":\"\",\n     \"data\":[\n     {\n     \"uid\":41000001,\n     \"name\":\"xxx\",\n     \"avatarlink\":\"http://xxxxxxx.jpg\",\n     },\n     {\n     \"uid\":41000002,\n     \"name\":\"yyy\",\n     \"avatarlink\":\"http://yyyyyyyyyyy.jpg\",\n     }\n     ]\n     }\n     */\n    function getChildren(parentId) {\n        var url = Constants.serverUrl + 'parent/childrenList/'+parentId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getChildSignIn(childId) {\n        var url = Constants.serverUrl + 'parent/children/signin/'+childId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getChildrenMsg(parentId) {\n        var url = Constants.serverUrl + 'parent/children/allInformation/'+parentId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getChildrenSignIn(parentId) {\n        var url = Constants.serverUrl + 'parent/children/allSignin/'+parentId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getAllChildrenSignIn(parentId,offset,count) {\n        var url = Constants.serverUrl + 'parent/children/fp/'+parentId+'?offset='+offset+'&limitcount='+count;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getAllChildrenMsg(parentId,offset,count){\n        var url = Constants.serverUrl + 'parent/children/msg/'+parentId+'?offset='+offset+'&limitcount='+count;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getChildrenAllInfo(parentId,offset,count){\n        var url = Constants.serverUrl + 'parent/childrenInformation/fetch/'+parentId+'?offset='+offset+'&limitcount='+count;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getWechatInfo(wid) {\n        var url = Constants.serverUrl + 'wechat/'+wid;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getChildrenDeposit(pid) {\n        var url = Constants.serverUrl + 'parent/children/deposit/'+pid;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getDailyComment(infoId,index) {\n        var url = Constants.serverUrl + 'dailyComment/'+infoId+'?index='+index;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function createDailyComment(data) {\n        var url = Constants.serverUrl + 'dailyComment';\n        return $http({\n            method: 'post',\n            url: url,\n            data: data\n        }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function delDailyComment(id) {\n        var url = Constants.serverUrl + 'dailyComment/'+id;\n        return $http.delete(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getCamera(did){\n      //var url =  Constants.serverUrl +\"cgi-bin/video.pl?did=\"+did;\n      var url =  Constants.serverUrl +\"camera/\"+did;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n\n  }\n\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('videoCtrl', [])\n        .controller('videoCtrl', function($scope, Session, StateService, Constants) {\n            'ngInject';\n\n            var vm = this;\n            vm.activated = false;\n\n            $scope.$on('$ionicView.afterEnter', activate);\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.video=JSON.parse(Session.getData('video'));\n\n                console.log(vm.video);\n            }\n\n            vm.back = function(){\n                StateService.back();\n            };\n        });\n}());\n","(function() {\n  \"use strict\";\n  angular.module('commentModule', [\n    'commentService'\n  ]);\n\n}());\n","(function() {\n  'use strict';\n\n  angular.module('commentService', [])\n    .factory('commentService', commentService);\n\n  function commentService($q, $http, Constants, ResultHandler) {\n    'ngInject';\n    var service = {\n        queryDepositComment:queryDepositComment\n    };\n\n    //http://172.18.1.166/api/v1/comment/deposit/fetch/:depositid\n    function queryDepositComment(id) {\n        var url = Constants.serverUrl + 'comment/deposit/fetch/'+id;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('depositChildrenModule', [\n    'depositChildrenCtrl',\n    'teacherDepositChildrenCtrl',\n    'depositChildrenRouter',\n    'depositChildrenService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('depositChildrenCtrl', [])\n        .controller('depositChildrenCtrl', function($scope,Constants,StateService,depositChildrenService,AuthService,MessageToaster) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.queryChildren();\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.goTo=function(id,item){\n                //查看孩子的更多家长信息列表\n                StateService.go('teacherEdit',{cid:id,type:0});\n            };\n\n            vm.queryChildren = function(){\n                depositChildrenService.queryDepositChildren(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.children = data.data;\n                    }else{\n                        MessageToaster.error(\"查不到任何数据 \"+response.error);\n                    }\n                });\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('depositChildrenRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.depositChildren', {\n        url: \"/depositChildren\",\n        views: {\n          'tab-depositChildren': {\n            templateUrl: 'depositChildren/depositChildren.html',\n            controller: 'teacherDepositChildrenCtrl',\n            controllerAs: 'vm'\n          }\n        }\n      })\n      .state('depositChildren', {\n        url: \"/depositChildren\",\n        templateUrl: 'depositChildren/depositChildren.html',\n        controller: 'depositChildrenCtrl',\n        controllerAs: 'vm'\n      })\n    ;\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('depositChildrenService', [])\n    .factory('depositChildrenService', depositChildrenService);\n\n  function depositChildrenService( $q, $http, Constants, ResultHandler) {\n    'ngInject';\n    var service = {\n      queryDepositChildren:queryDepositChildren\n    };\n\n    //'/deposit/children/:depositid',\n    function queryDepositChildren(id) {\n      var url = Constants.serverUrl + 'deposit/children/'+id;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n\n  }\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('teacherDepositChildrenCtrl', [])\n        .controller('teacherDepositChildrenCtrl', function($scope,Constants,StateService,depositChildrenService,AuthService,MessageToaster,teacherService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                teacherService.queryTeacherDeposit(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        if(data.data!=null&&data.data.length>0) {\n                            vm.teacher = data.data[0];\n                            vm.queryChildren(vm.teacher.depositid);\n                        }\n                    } else {\n                        MessageToaster.error(\"查不到任何数据 \" + data.error);\n                    }\n                });\n\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.goTo=function(id,item){\n                //查看孩子的更多家长信息列表\n                StateService.go('teacherEdit',{cid:id,type:0});\n            };\n\n            vm.queryChildren = function(id){\n                depositChildrenService.queryDepositChildren(id).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.children = data.data;\n                    }else{\n                        MessageToaster.error(\"查不到任何数据 \"+response.error);\n                    }\n                });\n            };\n        });\n}());\n","(function() {\n  \"use strict\";\n  angular.module('eshopEntryModule', [\n    'eshopEntryRouter',\n    'eshopEntryCtrl',\n    'eshopService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('eshopEntryCtrl', [])\n        .controller('eshopEntryCtrl', function($scope, $sce, Constants, $location, StateService) {\n            'ngInject';\n            window.location.href='./eshop/index.html';\n            \n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                //vm.src = $sce.trustAsResourceUrl('./eshop/index.html');//iframe redirect\n                //$location.path(\"myEShop/index.html\");\n                //$location.replace();\n            }\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('eshopEntryRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.eshop', {\n        url: \"/eshop\",\n          views: {\n            'tab-eshop': {\n              templateUrl: 'eshop/eshopEntry.html',\n              controller: 'eshopEntryCtrl',\n              controllerAs: 'vm'\n            }\n          }\n      });\n  }\n}());\n","/**\r\n * 商城API服务\r\n */\r\n\r\nangular.module('eshopService', [])\n  .service('eshopService', function ($q, $http, $window, Constants) {\r\n\r\n      /**\r\n        * 注册\r\n        * @param {*} userName 账号 \r\n        * @param {*} password 密码 \r\n        * @param {*} email    邮箱 \r\n        */\r\n      function _signup(userName, password, email) {\r\n          var defer = $q.defer(),\r\n           apiUrl = Constants.eshopApiUrl + 'ecapi.auth.default.signup';\r\n\r\n          var singUpInfo = {\r\n              username: userName,\r\n              password: password,\r\n              email: email\r\n          };\r\n\r\n          $http({\r\n              method: 'POST',\r\n              url: apiUrl,\r\n              params: null,\r\n              data: singUpInfo\r\n          }).success(function (data) {\r\n              if (!!data[\"error_code\"] && data[\"error_code\"] > 0) {\r\n                  defer.reject(data[\"error_desc\"]);\r\n              } else {\r\n                  $window.localStorage.setItem(\"eshop_auth\", JSON.stringify(data));\r\n                  defer.resolve(data);\r\n              }\r\n          }).error(function (err) {\r\n              defer.reject(err);\r\n          });\r\n\r\n          return defer.promise;\r\n      }\r\n\r\n      /**\r\n        * 登录\r\n        * @param {*} userName 账号 \r\n        * @param {*} password 密码 \r\n        */\r\n      function _signin(userName, password) {\r\n          var defer = $q.defer(),\r\n           apiUrl = Constants.eshopApiUrl + 'ecapi.auth.signin';\r\n\r\n          var singInInfo = {\r\n              username: userName,\r\n              password: password,\r\n          };\r\n\r\n          $http({\r\n              method: 'POST',\r\n              url: apiUrl,\r\n              params: null,\r\n              data: singInInfo\r\n          }).success(function (data) {\r\n              if (!!data[\"error_code\"] && data[\"error_code\"] > 0) {\r\n                  defer.reject(data[\"error_desc\"]);\r\n              } else {\r\n                  $window.localStorage.setItem(\"eshop_auth\", JSON.stringify(data));\r\n                  defer.resolve(data);\r\n              }\r\n          }).error(function (err) {\r\n              defer.reject(err);\r\n          });\r\n\r\n          return defer.promise;\r\n      }\r\n\r\n\r\n\r\n      /**\r\n        * 更改密码\r\n        * @param {*} oldPassword 账号 \r\n        * @param {*} password 密码 \r\n        */\r\n      function _changePassword(oldPassword, password) {\r\n          var defer = $q.defer(),\r\n           apiUrl = Constants.eshopApiUrl + 'ecapi.user.password.update';\r\n\r\n          var changePwdInfo = {\r\n              old_password: oldPassword,\r\n              password: password,\r\n          };\r\n\r\n          var header=null,\r\n              authInfo = $window.localStorage.getItem(\"eshop_auth\");\r\n          if (!!authInfo) {\r\n              authInfo = JSON.parse(authInfo);\r\n              header={\"X-ECAPI-Authorization\":authInfo.token};\r\n          }\r\n\r\n          $http({\r\n              method: 'POST',\r\n              url: apiUrl,\r\n              params: null,\r\n              data: changePwdInfo,\r\n              headers: header\r\n          })\r\n          .success(function (data) {\r\n              if (!!data[\"error_code\"] && data[\"error_code\"] > 0) {\r\n                  defer.reject(data[\"error_desc\"]);\r\n              } else {\r\n                  defer.resolve();\r\n              }\r\n          }).error(function (err) {\r\n              defer.reject(err);\r\n          });\r\n\r\n          return defer.promise;\r\n      }\r\n\r\n      /**\r\n       * 注销\r\n       */\r\n      function _signout() {\r\n          $window.localStorage.removeItem(\"eshop_auth\");\r\n      }\r\n\r\n      return {\r\n          signup: _signup,\r\n          signin: _signin,\r\n          changePassword: _changePassword,\r\n          signout: _signout\r\n      };\r\n  });\r\n","(function() {\n  \"use strict\";\n  angular.module('estimateModule', [\n    'estimateCtrl',\n    'estimateDepositCtrl',\n    'estimateRouter'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('estimateCtrl', [])\n        .controller('estimateCtrl', function($scope, Constants, StateService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            };\n\n            vm.goTo = function(addr){\n                console.log('go to path : '+addr);\n                StateService.go(addr);\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('estimateDepositCtrl', [])\n        .controller('estimateDepositCtrl', function($scope, Constants, StateService, BaiduService, AuthService, childrenSteamService, MessageToaster, $ionicModal) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n\n            $scope.$on('$ionicView.afterEnter', activate);\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.list=[];\n                vm.getChildrenDeposit();\n            };\n\n            vm.getChildrenDeposit = function(){\n              childrenSteamService.getChildrenDeposit(AuthService.getLoginID()).then(function(data) {\n                  if (data.errno == 0) {\n                      console.log(data.data);\n                      var de=data.data;\n                      for(var i=0;i<de.length;i++){\n                        console.log(de[i]);\n                        if(de[i].DepositID!=null){\n                          BaiduService.getDepositInfoWithComments(de[i].DepositID).then(function (depositInfo) {\n                              console.log(depositInfo);\n                              depositInfo.show=false;\n                              vm.list.push(depositInfo);\n                          }, function (err) {\n                              //ionicToast.show('获取机构详情信息失败!', 'middle', false, 3000);\n                              //MessageToaster.error(\"获取机构详情信息失败!\");\n                          })\n                        }\n                      }\n                  }\n              });\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.gotoEdit=function(did){\n              StateService.go('depositComment', {id: did,type:1});\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('estimateRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n        .state('estimate', {\n          url: \"/estimate\",\n          templateUrl: 'estimate/estimate.html',\n          controller: 'estimateCtrl',\n          controllerAs: 'vm'\n        })\n        .state('myEstimate', {\n          url: \"/myEstimate\",\n          templateUrl: 'estimate/myEstimateDeposit.html',\n          controller: 'estimateDepositCtrl',\n          controllerAs: 'vm'\n        })\n        .state('estimateDeposit', {\n          url: \"/estimateDeposit\",\n          templateUrl: 'estimate/estimateDeposit.html',\n          controller: 'estimateDepositCtrl',\n          controllerAs: 'vm'\n        })\n  }\n}());\n","(function() {\n  \"use strict\";\n  angular.module('exitModule', [\n    'exitCtrl',\n    'exitRouter',\n    'exitService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('exitCtrl', [])\n        .controller('exitCtrl', function($scope, $state, Constants, StateService,exitService,AuthService,MessageToaster,Session) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            vm.text='确定要退出';//'正在退出...';\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.exit=function(){\n                vm.text='正在退出...';\n                if(AuthService.getLoginID().substring(0,1)=='2'){\n                  Session.destroy();\n                  StateService.clearAllAndGo(\"login\");\n                }else{\n                  exitService.exit(AuthService.getLoginID()).then(function(data) {\n                      if (data.errno == 0) {\n                          console.log(data.data);\n                          vm.text='退出';\n                          //需清楚缓存\n                          Session.destroy();\n                          StateService.clearAllAndGo(\"register\");\n                          //StateService.clearAllAndGo(AuthService.getNextPath());\n                      }else{\n                          console.log(data.error);\n                          vm.text='未能退出';\n                          MessageToaster.error('退出失败');\n                      }\n                  },function(error){\n                      console.log(error);\n                      vm.text='退出失败';\n                  });\n               }\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('exitRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n        .state('exit', {\n          url: \"/exit\",\n          templateUrl: 'exit/exit.html',\n          controller: 'exitCtrl',\n          controllerAs: 'vm'\n        })\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('exitService', [])\n    .factory('exitService', eService);\n\n  function eService( $q, $http,Constants,ResultHandler) {\n    'ngInject';\n    var service = {\n      exit:exit\n    };\n\n    function exit(id) {\n        var url;\n        if(id.substring(0,1)=='3'){\n          url = Constants.serverUrl + 'exitTeacher/'+id;\n        }else if(id.substring(0,1)=='1'){\n          url = Constants.serverUrl + 'exitDeposit/'+id;\n        }else{\n          return $q.reject('不支持此业务');\n        }\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('helpModule', [\n    'helpCtrl',\n    'helpDocCtrl',\n    'helpRouter'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('helpCtrl', [])\n        .controller('helpCtrl', function($scope, Constants, StateService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.goTo = function(addr){\n                console.log('go to path : '+addr);\n                StateService.go(addr);\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('helpDocCtrl', [])\n        .controller('helpDocCtrl', function($scope, Constants, StateService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.goTo = function(addr){\n                console.log('go to path : '+addr);\n                StateService.go(addr);\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('helpRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n        .state('help', {\n          url: \"/help\",\n          templateUrl: 'help/help.html',\n          controller: 'helpCtrl',\n          controllerAs: 'vm'\n        })\n        .state('helpDoc', {\n          url: \"/helpDoc\",\n          templateUrl: 'help/helpDoc.html',\n          controller: 'helpDocCtrl',\n          controllerAs: 'vm'\n        })\n  }\n}());\n","(function() {\n    \"use strict\";\n    angular.module('MapCtrl', [])\n        .controller('MapCtrl', function($scope, $state, $stateParams,Constants, StateService, $ionicModal, $window,BaiduService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n            $scope.mapOpts = {\n                apiKey: 'IGp7UfrinXNxV6IwrQTC0PWoDCQlf0TR',\n              //  center: {longitude:113.271,latitude:23.1353},\n                keywords: ['托管'],\n                zoom: 16,\n                onMapLoadFailded: function () {\n                    //ionicToast.show('地图加载失败!', 'middle', false, 3000)\n                    console.log('地图加载失败');\n                }\n            };\n            vm.type = $stateParams.type;\n            vm.nav = $stateParams.nav;\n            console.log(\"vm.type = \"+vm.type+\" vm.nav = \"+vm.nav);\n            if(vm.type==1)$scope.mapOpts.mode = 2;\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.goTo = function(addr){\n                console.log(addr);\n                StateService.go(addr);\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('MapRouter', [])\n    .config(MapRouter);\n\n\n  function MapRouter($stateProvider,$urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n    .state('tabs.map', {\n      url: \"/map\",\n      views: {\n        'tab-map': {\n          templateUrl: 'map/map.html',\n          controller: 'MapCtrl',\n          controllerAs: 'vm'\n        }\n      }\n    })\n    .state('orgmap', {\n      url: \"/orgmap?:type&:nav\",\n      templateUrl: 'map/map.html',\n      params:{\n        type:0,\n        nav:false\n      },\n      controller: 'MapCtrl',\n      controllerAs: 'vm'\n    });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('MapService', [])\n    .factory('MapService', mapService);\n\n  function mapService( $q, $http) {\n    'ngInject';\n    var service = {\n    };\n    return service;\n\n\n  }\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('MapModule', [\n        'MapCtrl',\n        'MapRouter',\n        'MapService'\n    ])\n}());\n","(function() {\n  \"use strict\";\n  angular.module('messageModule', [\n    'messageCtrl',\n    'newMessageCtrl',\n    'messageRouter',\n    'messageService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('messageCtrl', [])\n        .controller('messageCtrl', function($scope, Constants, messageService, AuthService, StateService,Session,$ionicModal, $ionicSlideBoxDelegate) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                messageService.getMsg(AuthService.getLoginID()).then(function(data) {\n                    console.log(data);\n                    vm.msg=data.data;\n                });\n            }\n\n            vm.goPhoto=function(msgIndex,index){\n                Session.setData('temp',vm.msg[msgIndex]);\n                StateService.go(\"photo\",{index:index});\n            };\n\n            vm.new=function(id){\n                //创建信息\n                StateService.go('newMessage');\n            };\n\n            vm.getImages=function(msg){\n                vm.imgCount=0;\n                if(msg.photolink1!=null && msg.photolink1!=\"\"){\n                    var data={src:msg.photolink1,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.photolink2!=null && msg.photolink2!=\"\"){\n                    var data={src:msg.photolink2,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.photolink3!=null && msg.photolink3!=\"\"){\n                    var data={src:msg.photolink3,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.photolink4!=null && msg.photolink4!=\"\"){\n                    var data={src:msg.photolink4,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.photolink5!=null && msg.photolink5!=\"\"){\n                    var data={src:msg.photolink5,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.photolink6!=null && msg.photolink6!=\"\"){\n                    var data={src:msg.photolink6,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                console.log(vm.images);\n            };\n\n            $ionicModal.fromTemplateUrl('message/image-modal.html', {\n                scope: $scope,\n                animation: 'slide-in-up'\n            }).then(function(modal) {\n                $scope.modal = modal;\n            });\n\n            $scope.openModal = function() {\n                $ionicSlideBoxDelegate.slide(0);\n                $scope.modal.show();\n            };\n\n            $scope.closeModal = function() {\n                $scope.modal.hide();\n            };\n\n            // Cleanup the modal when we're done with it!\n            $scope.$on('$destroy', function() {\n                $scope.modal.remove();\n            });\n            // Execute action on hide modal\n            $scope.$on('modal.hide', function() {\n                // Execute action\n            });\n            // Execute action on remove modal\n            $scope.$on('modal.removed', function() {\n                // Execute action\n            });\n            $scope.$on('modal.shown', function() {\n                console.log('Modal is shown!');\n            });\n\n            // Call this functions if you need to manually control the slides\n            $scope.next = function() {\n                $ionicSlideBoxDelegate.next();\n            };\n\n            $scope.previous = function() {\n                $ionicSlideBoxDelegate.previous();\n            };\n\n            $scope.goToSlide = function(index,msg) {\n                vm.images=[];\n                vm.getImages(msg);\n                $scope.modal.show();\n                $ionicSlideBoxDelegate.slide(index);\n            };\n\n            // Called each time the slide changes\n            $scope.slideChanged = function(index) {\n                $scope.slideIndex = index;\n            };\n\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('messageRouter', [])\n    .config(myRouter);\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.message', {\n        url: \"/message\",\n          views: {\n            'tab-message': {\n              templateUrl: 'message/message.html',\n              controller: 'messageCtrl',\n              controllerAs: 'vm'\n            }\n          }\n      })\n      .state('newMessage', {\n          url: \"/newMessage\",\n          templateUrl: 'message/newMessage.html',\n          controller: 'newMessageCtrl',\n          controllerAs: 'vm'\n      });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('messageService', [])\n    .factory('messageService', messageService);\n\n  function messageService($http,Constants,ResultHandler) {\n    'ngInject';\n    var service = {\n      getMsg:getMsg,\n      newMsg:newMsg,\n      postPhoto:postPhoto\n    };\n\n    function getMsg(depositid) {\n      var url = Constants.serverUrl + 'deposit/allInformation/'+depositid;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function newMsg(data) {\n      var url = Constants.serverUrl + 'deposit/publish';\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    //function postPhoto(data){\n    //  var url = Constants.serverUrl + 'upload?filename=photo'+new Date().getTime()+'.jpg';\n    //  return $http({\n    //    method: 'put',\n    //    url: url,\n    //    data: data\n    //  }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    //};\n    //\"Content-Type\": \"multipart/form-data\"\n   // Content-Type\tmultipart/form-data; boundary=----WebKitFormBoundaryVCKz6Byvi4TF2rpa\n    function postPhoto(data){\n      var fd = new FormData();\n      fd.append('file', data);\n      var url = Constants.dfsUrl + 'upload';\n      console.log(fd);\n      return $http({\n        method: 'post',\n        url: url,\n        data: fd,\n        headers:{\n          'Content-Type':undefined\n        },\n        transformRequest: angular.identity\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n\n    return service;\n\n\n  }\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('newMessageCtrl', [])\n        .controller('newMessageCtrl', function($scope, Constants, messageService, AuthService, StateService, teacherService, MessageToaster) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n            vm.id=AuthService.getLoginID();\n            vm.dailyType='3';\n            vm.desc=\"\";\n            vm.imgPosition=0;\n            vm.imgCal=0;\n            vm.imgs=[];\n            vm.imgshow=[];\n            vm.isClicked=false;\n            vm.btnText='提交';\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                teacherService.queryTeacherDeposit(vm.id).then(function(data) {\n                    console.log(data);\n                    if(data!=null && data.data !=null && data.data.length>0)vm.deposit=data.data[0];\n                    else MessageToaster.error('找不到老师的机构信息');\n                });\n            }\n\n            vm.save=function(which){\n                if (vm.imgs.length > 0) {\n                    vm.isClicked = true;\n                    vm.btnText='正在提交';\n                    MessageToaster.info('上传信息中，请稍等...');\n                    var data = vm.imgs[which];\n                    if (data != null)messageService.postPhoto(data).then(function (e) {\n                        console.log(e);\n                        console.log(e.data.fileurl);\n                        vm.imgs[vm.imgCal] = e.data.fileurl;\n                        vm.imgCal++;\n                        if (vm.imgCal == vm.imgs.length) {\n                            console.log(vm.imgs);\n                            vm.saveData();\n                        } else {\n                            vm.save(vm.imgCal);\n                        }\n                    });\n                } else {\n                    vm.saveData();\n                }\n            };\n\n            //infotype:信息类型（1：就餐；2：培训；3：活动；4：作业）\n            vm.saveData=function(){\n                var data={\n                    \"depositid\": Number(vm.deposit.depositid),\n                    \"publisherid\": Number(vm.id),\n                    \"infotype\":Number(vm.dailyType),\n                    \"latitude\":0,\n                    \"longitude\":0,\n                    \"description\":vm.desc,\n                    \"imgs\":vm.imgs\n                };\n                messageService.newMsg(data).then(function(data) {\n                    console.log(data);\n                    vm.isClicked=false;\n                    vm.btnText='提交';\n                    if(data.errno==0){\n                        StateService.back();\n                    }else{\n                        MessageToaster.error(data.error);\n                    }\n                });\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            $scope.fileSelect=function(event){\n                //console.log(event);\n                var files = event.target.files;\n                $scope.fileName=files[0].name;\n                var fileReader = new FileReader();\n                console.log(files);\n                vm.imgs[vm.imgPosition] = files[0];\n                console.log(files[0]);\n                //vm.imgPosition++;\n                $scope.$apply();\n                fileReader.readAsDataURL(files[0]);\n                fileReader.onload = function(e) {\n                    //console.log(e);\n                    vm.imgshow[vm.imgPosition] = this.result;\n                    //console.log(this.result);\n                    vm.imgPosition++;\n                    $scope.$apply();\n                };\n            }\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('depositCommentCtrl', [])\n        .controller('depositCommentCtrl', function($scope, Constants,$stateParams,StateService,AuthService,depositCommentService,MessageToaster) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            vm.item = {\n                \"scores\":{\n                    \"kitchen\":0,\n                    \"food\":0,\n                    \"roadsafety\":0,\n                    \"edufiresafety\":0,\n                    \"teacherresp\":0\n                },\n                \"commenttext\":\"\"\n            };\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                console.log($stateParams);\n                vm.cid = $stateParams.id;\n                vm.type = $stateParams.type;\n                if(vm.type==1)vm.edit();\n                //vm.cid='10000002';//test\n                console.log(\"deposit id = \"+vm.cid);\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.getComment(AuthService.getLoginID(),vm.cid);\n                //vm.getCommentScores(vm.cid);//test\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.cancel=function(){\n                vm.isEditing=false;\n                //data return\n                vm.item=angular.copy(vm.itembackup);\n                vm.itembackup=null;\n            };\n\n            vm.edit=function(){\n                vm.isEditing=true;;\n                vm.itembackup=angular.copy(vm.item);\n            };\n\n            vm.save=function(){\n                //check data\n                vm.item.depositid=vm.cid;\n                vm.item.parentid=AuthService.getLoginID();\n                depositCommentService.saveDepositComment(vm.item).then(function(data) {\n                    console.log(data);\n                    if (data.errno == 0) {\n                        //vm.item = data.data;\n                        vm.isEditing=false;\n                        vm.itembackup=null;\n                        MessageToaster.success(\"更新成功\");\n                        vm.getComment(AuthService.getLoginID(),vm.cid);\n                    }else{\n                        console.log('error,get comment fail');\n                        console.log(data);\n                    }\n                });\n\n            };\n\n            vm.getComment=function(pid,did){\n                depositCommentService.getDepositComment(pid,did).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.item = data.data;\n                    }else{\n                        console.log(data);\n                        if(data.errno==10003){\n                            vm.edit();\n                        }else{\n                            console.log('error,get comment fail');\n                        }\n                    }\n                });\n            };\n\n            vm.getCommentScores=function(id){\n                depositCommentService.getTotalDepositScore(id).then(function(data) {\n                        console.log(data);\n                });\n            };\n        });\n}());\n","(function() {\n    'use strict';\n\n    angular.module('depositCommentService', [])\n        .factory('depositCommentService', myService);\n\n    function myService( $q, $http,Constants,ResultHandler) {\n        'ngInject';\n        var service = {\n            saveDepositComment:saveDepositComment,\n            getDepositComment:getDepositComment,\n            getTotalDepositScore:getTotalDepositScore\n        };\n\n\n        //1.家长评分\n        //POST\n        //URL: /api/v1/comments/parent/deposit\n        //Request Body:\n        //{\n        //    \"depositid\":10000001,\n        //    \"parentid\": 31000001,\n        //    \"scores\":{\n        //    \"kitchen\":8,\n        //        \"food\":8,\n        //        \"road_safety\":8,\n        //        \"edu_fire_safety\":8,\n        //        \"teacher_responsibility\":8\n        //      },\n        //    \"comments_text\":\"老师责任心很好\"\n        //}\n        function saveDepositComment(data) {\n            var url = Constants.serverUrl + 'comments/parent/deposit';\n            return $http({\n                method: 'post',\n                url: url,\n                data: data\n            }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n        };\n\n        //2.获取家长评分\n        //GET\n        //URL: /api/v1/comments/parent/deposit/?parentid=30000001&depositid=10000001\n        //    Response Body:\n        //{\n        //    \"errno\":0,\n        //    \"error\":\"\",\n        //    \"data\":{\n        //    \"scores\":{\n        //        \"kitchen\":8,\n        //            \"food\":8,\n        //            \"road_safety\":8,\n        //            \"edu_fire_safety\":8,\n        //            \"teacher_responsibility\":8\n        //        },\n        //    \"comments_text\":\"老师责任心很好\"\n        //    }\n        //}\n        function getDepositComment(pid,did) {\n            var url = Constants.serverUrl + 'comments/parent/deposit?parentid='+pid+\"&depositid=\"+did;\n            return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n        };\n\n        //3.获取总评分\n        //总评分计算公式： 总评分 = 公司评分 * 40% + 所有家长的各项评分的总平均分 * 60%\n        //GET\n        //URL: /api/v1/comments/deposit/?depositid=10000001\n        //Response Body:\n        //{\n        //    \"errno\":0,\n        //    \"error\":\"\",\n        //    \"data\":{\n        //        \"scores\":8\n        //    }\n        //}\n        function getTotalDepositScore(did) {\n            var url = Constants.serverUrl + 'comments/deposit?depositid='+did;\n            console.log(url);\n            return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n        };\n\n        return service;\n\n\n    }\n\n}());","(function() {\n  \"use strict\";\n  angular.module('nearbyModule', [\n    'nearbyCtrl',\n    'nearbyListCtrl',\n    'nearbyDepositInfoCtrl',\n    'depositCommentCtrl',\n    'nearbyRouter',\n    'depositCommentService',\n    'nearbyService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('nearbyCtrl', [])\n        .controller('nearbyCtrl', function($scope, Constants,nearbyService,MessageToaster,StateService,CacheData) {\n            'ngInject';\n\n            var vm = this;\n            vm.activated = false;\n            vm.map = null;\n            vm.point = null;\n            vm.city = 'shenzhen';\n            vm.show=false;\n            vm.distance = 5000;\n            vm.changeName = '列表';\n            $scope.temp={mine:null,baidu:null};\n            vm.list=[];\n\n            var watch = $scope.$watchGroup(['temp.mine','temp.baidu'],function(newValue, oldValue, scope){\n                console.log(newValue);\n                //console.log(oldValue);\n                if(newValue[0]!=null && newValue[1]!=null){\n                    console.log('ok ,do it');\n                    //确认距离，锁定在10000\n                    for(var i=0;i<newValue[0].length;i++){\n                        if(newValue[0][i].Dist < vm.distance*2){\n                            vm.list.push(newValue[0][i]);\n                            var marker = new BMap.Marker(new BMap.Point(newValue[0][i].Longitude,newValue[0][i].Latitude));  // 创建标注\n                            var number = vm.list.length;\n                            var label=new BMap.Label(''+number);\n                            var margin=4;\n                            if(number>9)margin=0;\n                            label.setStyle({\n                                \"color\":\"white\",\n                                \"background\":\"none\",\n                                \"fontSize\":\"14px\",\n                                \"margin-left\":margin+\"px\",\n                                \"border\":\"0\"});\n                            marker.setLabel(label);\n                            var content=vm.getOrgContent(newValue[0][i]);\n                            marker.setTitle(newValue[0][i].OrgName);\n                            vm.map.addOverlay(marker);\n                            vm.addClickHandler(content,marker);\n                        }\n                    }\n\n                    console.log(vm.list);\n                    //检查百度是否有我们的数据一样的信息\n                    //将百度数据转成我们的\n                    for(var i=0;i<newValue[1].length;i++){\n                            var tmp={\n                                AccountID: i,\n                                Address: newValue[1][i].address,\n                                Dist: vm.map.getDistance(vm.point,newValue[1][i].point).toFixed(0),\n                                FrontDeskLink: \"./img/place.png\",\n                                Latitude: newValue[1][i].point.lat,\n                                Longitude:newValue[1][i].point.lng,\n                                OrgName: newValue[1][i].title\n                            };\n                            vm.list.push(tmp);\n                        var marker = new BMap.Marker(newValue[1][i].point);  // 创建标注\n                        var number = vm.list.length;\n                        var label=new BMap.Label(''+number);\n                        var margin=4;\n                        var content=vm.getOrgContent(tmp);\n                        if(number>9)margin=0;\n                        label.setStyle({\n                            \"color\":\"white\",\n                            \"background\":\"none\",\n                            \"fontSize\":\"14px\",\n                            \"margin-left\":margin+\"px\",\n                            \"border\":\"0\"});\n                        marker.setLabel(label);\n                        marker.setTitle(newValue[1][i].title);\n                        vm.map.addOverlay(marker);              // 将标注添加到地图中\n                        vm.addClickHandler(content,marker);\n                    }\n                    console.log(vm.list);\n                    //清空tmp\n                    $scope.temp={mine:null,baidu:null};\n                    //vm.show=true;\n                    //显示在列表，\n\n                    //显示在图片\n                }else if(newValue[0]!=null){\n                    console.log('get babyplan data');\n                }else if(newValue[1]!=null){\n                    console.log('get baidu map data');\n                }\n            });\n\n            vm.addClickHandler=function(content,marker){\n                marker.addEventListener(\"click\",function(e){\n                        vm.openInfo(content,e)}\n                );\n            };\n\n            vm.openInfo=function(content,e){\n                var p = e.target;\n                var point = new BMap.Point(p.getPosition().lng, p.getPosition().lat);\n                var infoWindow = new BMap.InfoWindow(content,{enableCloseOnClick:true});  // 创建信息窗口对象\n                vm.map.openInfoWindow(infoWindow,point); //开启信息窗口\n            };\n\n            vm.getOrgContent = function(org){\n                var sContent =\n                    \"<h4 style='margin:0 0 5px 0;padding:0.2em 0'>\"+org.OrgName+\"</h4>\" +\n                    \"<img style='margin:4px' id='imgDemo' src='\"+org.FrontDeskLink+\"' width='139' height='104' title='\"+org.OrgName+\"'/>\" +\n                    \"<p style='margin:0;line-height:1.5;font-size:13px;text-indent:2em'>\"+org.Address+\"</p>\" ;\n                if(org.AccountID.length==8){\n                    sContent+=\"<a class='button' href='#nearbyDepositInfo?id=\"+org.AccountID+\"' target='_self' >更多信息</a>\";\n                }\n                return sContent;\n            };\n\n            vm.search=function(){\n                vm.list=[];\n                vm.searchOurInfo();\n                vm.searchNearBy(vm.inputData);\n            };\n\n            vm.change=function(){\n                vm.show=!vm.show;\n                if(vm.show){\n                    vm.changeName = '地图';\n                }else {\n                    vm.changeName = '列表';\n                }\n            };\n\n            vm.searchOurInfo=function(){\n                if(vm.point != null) {\n                    nearbyService.findNearbyDeposit(vm.point.lng, vm.point.lat).then(function (data) {\n                        if (data.errno == 0) {\n                            console.log(data.data);\n                            //是否要删除圆形范围内\n                            $scope.temp.mine = data.data;\n                        } else {\n                            console.log('error,find nearby deposit fail');\n                            console.log(data);\n                        }\n                    });\n                }else{\n                    MessageToaster.error(\"定位不成功\");\n                }\n            };\n\n            //renderOptions: {map: vm.map, panel: \"r-result\"},\n            vm.searchNearBy=function(data){\n                var myPoint=null;\n                if(data!=null) {\n                    var myGeo = new BMap.Geocoder();\n                    // 将地址解析结果显示在地图上,并调整地图视野\n                    console.log(data);\n                    myGeo.getPoint(data, function (point) {\n                        if (point) {\n                            console.log(\"change address point\");\n                            console.log(point);\n                            myPoint=point;\n                            vm.map.clearOverlays();\n                            vm.map.centerAndZoom(point, 15);\n                            vm.map.addOverlay(new BMap.Marker(point));\n                            vm.map.panTo(point);\n\n                            var local = new BMap.LocalSearch(vm.map, {\n                                renderOptions:{},\n                                onSearchComplete: vm.onSearchComplete\n                            });\n                            local.searchNearby('托管',myPoint, vm.distance);\n                        } else {\n                            alert(\"您选择地址没有解析到结果!\");\n                        }\n                    }, vm.city);\n                }else{\n                    myPoint=vm.point;\n                }\n                var local = new BMap.LocalSearch(vm.map, {\n                    renderOptions:{},\n                    onSearchComplete: vm.onSearchComplete\n                    });\n                local.searchNearby('托管',myPoint, vm.distance);\n                //local.search(\"托管\");\n            };\n\n            vm.onSearchComplete=function(results){\n                console.log(results);\n                $scope.temp.baidu = results.wr;\n            };\n\n            vm.setMapControl=function(map){\n                // 添加定位控件\n                var geolocationControl = new BMap.GeolocationControl();\n                geolocationControl.addEventListener(\"locationSuccess\", function(e){\n                    // 定位成功事件\n                    var address = '';\n                    address += e.addressComponent.province;\n                    address += e.addressComponent.city;\n                    address += e.addressComponent.district;\n                    address += e.addressComponent.street;\n                    address += e.addressComponent.streetNumber;\n                    alert(\"当前定位地址为：\" + address);\n\n                });\n                geolocationControl.addEventListener(\"locationError\",function(e){\n                    // 定位失败事件\n                    alert(e.message);\n                });\n                map.addControl(geolocationControl);\n\n                //添加地图类型控件\n                map.addControl(new BMap.MapTypeControl());\n            };\n\n            vm.setBaiduMap=function(){\n                vm.map = new BMap.Map(\"allmap\");    // 创建Map实例\n                vm.setMapControl(vm.map);\n                //get position\n                var geolocation = new BMap.Geolocation();\n                geolocation.getCurrentPosition(function(r){\n                    if(this.getStatus() == BMAP_STATUS_SUCCESS){\n                        vm.city = r.address.city;\n                        vm.map.setCurrentCity(vm.city);\n                        vm.point = r.point;\n                        vm.map.centerAndZoom(vm.point , 15);  // 初始化地图,设置中心点坐标和地图级别\n                        var myIcon = new BMap.Icon(\"http://api.map.baidu.com/img/markers.png\", new BMap.Size(23, 25), {\n                            offset: new BMap.Size(10, 25), // 指定定位位置\n                            imageOffset: new BMap.Size(0, 0 - 10 * 25) // 设置图片偏移\n                        });\n                        var mk = new BMap.Marker(r.point,{icon:myIcon});\n                        vm.map.addOverlay(mk);\n                        vm.map.panTo(r.point);\n                    } else {\n                        alert('failed'+this.getStatus());\n                    }\n                },{enableHighAccuracy: true})\n            };\n\n            vm.goto=function(item){\n                if(item.AccountID.length!=8){\n                    MessageToaster.error(\"暂不提供此信息\");\n                }else {\n                    CacheData.putObject(item.AccountID, item);\n                    StateService.go('nearbyDepositInfo', {id: item.AccountID});\n                }\n            };\n\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.setBaiduMap();\n            }\n        });\n\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('nearbyDepositInfoCtrl', [])\n        .controller('nearbyDepositInfoCtrl', function($scope, Constants,nearbyService,CacheData,$stateParams,StateService,organizerService,depositCommentService,parentService,AuthService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                console.log($stateParams);\n                vm.cid = $stateParams.id;\n                console.log(\"id = \"+vm.cid);\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.item =CacheData.getObject(vm.cid);\n                console.log(vm.item);\n                vm.getMoreInfo(vm.cid);\n                vm.getComment(vm.cid);\n                vm.getParentChildren();\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.gotoDepositComment=function(){\n                if(vm.access) {\n                    StateService.go('depositComment', {id: vm.cid});\n                }else{\n                    console.log('not allow');\n                }\n            };\n\n            vm.getParentChildren=function() {\n                parentService.queryChildren(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.deposits = data.data;\n                        for(var i=0;i<vm.deposits.length;i++){\n                            if( vm.cid == vm.deposits[i].depositid){\n                                vm.access=true;\n                                break;\n                            }\n                        }\n\n                    }else{\n                        console.log(data);\n                    }\n                });\n            };\n\n            vm.getMoreInfo=function(id){\n                organizerService.queryDepositInfo(id).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.more = data.data;\n                    }else{\n                        console.log('error,find nearby deposit fail');\n                        console.log(data);\n                    }\n                });\n            };\n\n            vm.getComment=function(id){\n                depositCommentService.getTotalDepositScore(id).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.scores = data.data.scores;\n                    }else{\n                        console.log(data);\n                        if(data.errno==10003){\n                            vm.scores=0;\n                        }else{\n                            console.log('error,get comment fail');\n                        }\n                    }\n                });\n            };\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('nearbyListCtrl', [])\n        .controller('nearbyListCtrl', function($scope, Constants,nearbyService,StateService,CacheData) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            vm.isMapMode=true;\n\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            $scope.offlineOpts = {\n                retryInterval: 10000,\n                txt: 'Offline Mode'\n            };\n            var longitude = 114.2;\n            var latitude = 22.5;\n            $scope.mapOptions = {\n                center: {\n                    longitude: longitude,\n                    latitude: latitude\n                },\n                zoom: 11,\n                city: 'ShenZhen',\n                markers: [{\n                    longitude: longitude,\n                    latitude: latitude,\n                    icon: 'img/mappiont.png',\n                    width: 49,\n                    height: 60,\n                    title: 'Where',\n                    content: '这是哪里'\n                }]\n            };\n\n            $scope.loadMap = function(map) {\n                console.log(map);//gets called while map instance created\n            };\n\n            vm.loadData=function(longitude,latitude){\n                nearbyService.findNearbyDeposit(longitude,latitude).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.list = data.data;\n                    }else{\n                        console.log('error,find nearby deposit fail');\n                        console.log(data);\n                    }\n                });\n            };\n\n            vm.goto=function(item){\n                CacheData.putObject(item.AccountID,item);\n                StateService.go('nearbyDepositInfo',{id:item.AccountID});\n            };\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.loadData(longitude,latitude);\n            }\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('nearbyRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.nearbyList', {\n        url: \"/nearbyList\",\n          views: {\n            'tab-nearby': {\n              templateUrl: 'nearby/nearbyList.html',\n              controller: 'nearbyListCtrl',\n              controllerAs: 'vm'\n            }\n          }\n      })\n      .state('tabs.nearby', {\n        url: \"/nearby\",\n        views: {\n          'tab-nearby': {\n            templateUrl: 'nearby/nearby.html',\n            controller: 'nearbyCtrl',\n            controllerAs: 'vm'\n          }\n        }\n      })\n      .state('nearbyDepositInfo', {\n        url: \"/nearbyDepositInfo?:id\",\n        params: {\n          id : null\n        },\n        templateUrl: 'nearby/nearbyDepositInfo.html',\n        controller: 'nearbyDepositInfoCtrl',\n        controllerAs: 'vm'\n      })\n      .state('depositComment', {\n        url: \"/depositComment?:id\",\n        params: {\n          id : null,\n          type : 0\n        },\n        templateUrl: 'nearby/depositComment.html',\n        controller: 'depositCommentCtrl',\n        controllerAs: 'vm'\n      });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('nearbyService', [])\n    .factory('nearbyService', myService);\n\n  function myService( $q, $http,Constants,ResultHandler) {\n    'ngInject';\n    var service = {\n      findNearbyDeposit:findNearbyDeposit\n    };\n\n    //http://172.18.1.166/api/v1/nearbyDepositList/113.271/23.1353     附近的机构列表\n    function findNearbyDeposit(x,y) {\n      var url = Constants.serverUrl + 'nearbyDepositList/'+x+\"/\"+y;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n\n  }\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('depositListctrl', [])\n        .controller('depositListctrl', function($scope,Constants,StateService,$ionicListDelegate,$ionicPopup,AuthService,parentService,vipBuyService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.getRecords();\n            };\n\n            vm.getDeposits = function(){\n                parentService.queryChildren(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.deposits = [];\n                        var array=[];\n                        //获取deposits，取出唯一\n                        data.data.forEach(function(item){\n                            var obj={};\n                            obj.depositid=item.depositid;\n                            obj.orgname=item.orgname;\n                            //console.log(array);\n                            // console.log(item.depositid);\n                            if(!array.includes(item.depositid)&& item.depositid ){\n                                array[array.length]=item.depositid;\n                                vm.deposits[vm.deposits.length]=obj;\n                            }\n                            //获取机构信息，获取权限是否能查看编辑\n                        });\n                    }\n                });\n            };\n\n            vm.getRecords = function () {\n                vipBuyService.getOrders(AuthService.getLoginID()).then(function(data) {\n                    var isDO=false;\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        data.data.forEach(function(item){\n                            if(item.PayStatus==1){\n                                if(!isDO) {\n                                    vm.getDeposits();\n                                    isDO = true;\n                                }\n                            }\n\n                        });\n                        return false;\n                    }\n                });\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.goToDepositComment=function(did){\n                StateService.go('depositComment', {id: did});\n            };\n\n        });\n}());\n","(function() {\n  \"use strict\";\n  angular.module('orderModule', [\n    'orderCtrl',\n    'depositListctrl',\n    'orderRouter',\n    'orderService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('orderCtrl', [])\n        .controller('orderCtrl', function($scope, Constants, StateService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            console.log(\"tabs come\");\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.goTo=function(where){\n                StateService.go(where);\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('orderRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.order', {\n        url: \"/order\",\n          views: {\n            'tab-order': {\n              templateUrl: 'order/order.html',\n              controller: 'orderCtrl',\n              controllerAs: 'vm'\n            }\n          }\n      })\n      .state('orders', {\n        url: \"/orders\",\n        templateUrl: 'order/order.html',\n        controller: 'orderCtrl',\n        controllerAs: 'vm'\n      })\n      .state('vipOrg', {\n        url: \"/vipOrg\",\n        templateUrl: 'order/depositList.html',\n        controller: 'depositListctrl',\n        controllerAs: 'vm'\n      })\n    ;\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('orderService', [])\n    .factory('orderService', orderService);\n\n  function orderService( $q, $http) {\n    'ngInject';\n    var service = {\n    };\n    return service;\n\n\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('organizerModule', [\n    'organizerCtrl',\n    'organizerInfoCtrl',\n    'organizerEditCtrl',\n    'organizerRouter',\n    'organizerService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('organizerCtrl', [])\n        .controller('organizerCtrl', function($scope, Constants, StateService,organizerService,AuthService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.goTo = function(addr){\n                StateService.go(addr);\n            };\n\n            vm.getOrganizer = function(){\n                organizerService.queryOrganizer(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        vm.organizer = data.data;\n                    }\n                });\n            };\n\n            vm.getChildren = function(){\n                organizerService.queryTeacher(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        vm.teacher = data.data;\n                    }\n                });\n            };\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('organizerEditCtrl', [])\n        .controller('organizerEditCtrl', function($scope, $stateParams, Constants, MessageToaster, AuthService, StateService, organizerService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n\n                vm.getOrganizer();\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.save=function(){\n                var data={\n                    contactphone: vm.organizer.ContactPhone,\n                    address:vm.organizer.Address,\n                    contactname:vm.organizer.ContactName,\n                    remark:\"备注描述\"\n                };\n                if(angular.isUndefined(vm.organizer.Address)||vm.organizer.Address==null||vm.organizer.Address.length==0){\n                    MessageToaster.error(\"机构地址不正确\");\n                    return ;\n                }\n                if(angular.isUndefined(vm.organizer.ContactName)||vm.organizer.ContactName==null||vm.organizer.ContactName.length==0){\n                    MessageToaster.error(\"联系人不正确\");\n                    return ;\n                }\n                if(angular.isUndefined(vm.organizer.ContactPhone)||vm.organizer.ContactPhone==null||vm.organizer.ContactPhone.length==0\n                    ||vm.organizer.ContactPhone.length!=11){\n                    MessageToaster.error(\"联系人电话不正确\");\n                    return ;\n                }\n                organizerService.updateOrganizer(AuthService.getLoginID(),data).then(function(response) {\n                    console.log(response);\n                    if(response.errno==0)\n                        MessageToaster.success(\"更新成功\");\n                    else\n                        MessageToaster.error(\"更新失败\");\n                    return ;\n                }).finally(function() {\n                    StateService.back();\n                });\n\n            };\n\n            vm.getOrganizer = function(){\n                organizerService.queryOrganizer(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.organizer = data.data;\n                    }\n                });\n            };\n\n\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('organizerInfoCtrl', [])\n        .controller('organizerInfoCtrl', function($scope,Constants,StateService,organizerService,AuthService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                //vm.organizer = {name:'abc 托管',contactName:\"sam\",contactPhone:\"15986632761\"};\n                vm.getOrganizer();\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.edit=function(id){\n                //编辑机构信息\n                StateService.go('organizerEdit');\n            };\n\n            vm.getOrganizer = function(){\n                organizerService.queryOrganizer(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.organizer = data.data;\n                    }\n                });\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('organizerRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.organizer', {\n        url: \"/organizer\",\n          views: {\n            'tab-orgnize': {\n              templateUrl: 'organizer/organizer.html',\n              controller: 'organizerCtrl',\n              controllerAs: 'vm'\n            }\n          }\n      })\n      .state('organizerInfo', {\n        url: \"/organizerInfo\",\n        templateUrl: 'organizer/organizerInfo.html',\n        controller: 'organizerInfoCtrl',\n        controllerAs: 'vm'\n      })\n      .state('organizerEdit', {\n        url: \"/organizerEdit\",\n        templateUrl: 'organizer/organizerEdit.html',\n        controller: 'organizerEditCtrl',\n        controllerAs: 'vm'\n      })\n    ;\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('organizerService', [])\n    .factory('organizerService', organizerService);\n\n  function organizerService($q, $http,Constants,ResultHandler) {\n      'ngInject';\n      var service = {\n        queryOrganizer:queryOrganizer,\n        queryDepositInfo:queryDepositInfo,\n        updateOrganizer:updateOrganizer\n      };\n\n\n      //GET /api/v1/account/query/deposit/{deposit_accnt_id}\n      //return\n      //{\n      //  \"errno\":0,\n      //  \"error\":\"\",\n      //  \"data\":{\n      //    \"uid\":10000001,\n      //     …………\n      //  }\n      //}\n      function queryOrganizer(id) {\n        var url = Constants.serverUrl + 'account/query/deposit/'+id;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n      };\n\n\n      //post /api/v1/account/deposit/{deposit_accnt_id}/update\n      //  {\n      //    \"orgname\": \"机构名称\",\n      //    \"contactphone\": \"13812345678\",\n      //    \"password\":\"abcd\",\n      //    \"weixinno\":\"微信号\",\n      //    \"address\":\"托管机构地址\",\n      //    \"contactname\":\"托管机构联系人（管理者）\",\n      //    \"remark\":\"托管机构信息描述\"\n      //  };\n      //return\n      //{\n      //  \"errno\":0,\n      //    \"error\":\"\",\n      //    \"data\":{\n      //      \"uid\":11000001\n      //    }\n      //}\n      function updateOrganizer(id,data) {\n          var url = Constants.serverUrl + 'account/deposit/'+id+'/update';\n          return $http({\n            method: 'post',\n            url: url,\n            data: data\n          }).then(function (response) {\n            return response.data;\n          }, function (error) {\n            return $q.reject(error);\n          });\n      };\n\n      function queryDepositInfo(id) {\n          //http://172.18.1.166/api/v1/depositInfo/fetch/:depositid\n          var url = Constants.serverUrl + 'depositInfo/fetch/'+id;\n          return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n      };\n\n      return service;\n\n\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('parentModule', [\n    'parentCtrl',\n    'parentEditCtrl',\n    'parentRouter',\n    'parentService',\n    'parentInfoCtrl'\n  ]);\n\n}());\n","(function () {\r\n    \"use strict\";\n    angular.module('parentCtrl', [])\n        .controller('parentCtrl', function ($scope, $q, $cordovaImagePicker, $ionicActionSheet, $ionicListDelegate,\n            $ionicPopup, $ionicLoading, Session, Constants, MessageToaster, AuthService, StateService, parentService, childrenSettingService) {\r\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            vm.shouldShowDelete = false;\r\n            vm.shouldShowReorder = false;\r\n            vm.listCanSwipe = true\n            vm.parentInfo = {\r\n              //name: \"刘德华\",\r\n              //nickName: \"流的花\",\r\n              //sex: 1,\r\n              //mobile: '1342222235',\r\n              //childrens: [\r\n              //    {\r\n              //        name: '刘能',\r\n              //        sex:1\r\n              //    },\r\n              //    {\r\n              //        name: '刘星',\r\n              //        sex: 1\r\n              //    }\r\n              //]\r\n            };\n\n            //页面激活时处理逻辑\n            $scope.$on('$ionicView.afterEnter', activate);\n            function activate() {\r\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                init();\r\n            };\n\n            //初始化逻辑\n            function init() {\r\n                var pId = AuthService.getLoginID();\r\n                var queryParentPromise = parentService.queryParent(pId);\r\n                var queryChildrensPromise = parentService.queryChildren(pId);\r\n\r\n                $q.all([queryParentPromise, queryChildrensPromise]).then(function (results) {\r\n                    vm.parentInfo = results[0].data || {},\r\n                   vm.parentInfo.childrens = results[1].data || [];\r\n                }, function (err) {\r\n                    MessageToaster.error(\"检索异常!\");\r\n                });\r\n            };\n\n\n            // 图片选择项\n            vm.showImageUploadChoices = function (prop) {\r\n                var hideSheet = $ionicActionSheet.show({\r\n                    buttons: [{\r\n                        text: '拍照上传'\r\n                    }, {\r\n                        text: '从相册中选'\r\n                    }],\n                    titleText: '图片上传',\n                    cancelText: '取 消',\n                    cancel: function () {\r\n                    },\n                    buttonClicked: function (index) {\n                        //相册文件选择上传\n                        if (index == 1) {\r\n                            vm.readalbum(prop);\r\n                        } else if (index == 0) {\n                            //拍照上传\n                            vn.takePicture(prop);\r\n                        }\n                        return true;\r\n                    }\r\n                });\r\n            };\n\n            //打开用户相册\n            vm.readalbum = function (prop) {\r\n                if (!window.imagePicker) {\r\n                    MessageToaster.error(\"目前您的环境不支持相册上传!\");\r\n                    return;\r\n                }\n\n                var options = {\r\n                    maximumImagesCount: 1,\n                    width: 800,\n                    height: 800,\n                    quality: 80\r\n                };\n\n                $cordovaImagePicker.getPictures(options).then(function (results) {\r\n                    var uri = results[0],\n                        name = uri;\n                    if (name.indexOf('/')) {\r\n                        var i = name.lastIndexOf('/');\n                        name = name.substring(i + 1);\r\n                    }\n\n                    vm.uploadimage(uri, prop);\r\n\n                }, function (error) {\r\n                    MessageToaster.error(\"访问相册异常:请检查是否有权限!\");\r\n                });\r\n            };\n\n\n            //拍照\n            vm.takePicture = function (prop) {\r\n                if (!navigator.camera) {\r\n                    MessageToaster.error(\"请在真机环境中使用拍照上传!\");\r\n                    return;\r\n                }\n\n                var options = {\r\n                    quality: 75,\n                    targetWidth: 800,\n                    targetHeight: 800,\n                    saveToPhotoAlbum: false\r\n                };\n\n                navigator.camera.getPicture(function (imageURI) {\r\n                    vm.uploadimage(imageURI);\r\n                }, function (err) {\r\n                    MessageToaster.error(\"拍照异常:请检查是否有权限!\");\r\n                }, options);\r\n\n            }\n\n            //上传\n            vm.uploadimage = function (uri) {\r\n                var fileURL = uri;\n\n                var options = new FileUploadOptions();\n                options.fileKey = \"file\";\n                options.fileName = fileURL.substr(fileURL.lastIndexOf('/') + 1);\n                options.mimeType = \"image/jpeg\";\n                options.chunkedMode = true;\n\n                var ft = new FileTransfer();\n                $ionicLoading.show({\r\n                    template: '上传中...'\r\n                });\n                ft.upload(fileURL, \"http://wx.zxing-tech.cn/upload\", function (data) {\n                    //设置图片新地址\n                    var resp = JSON.parse(data.response);\n                    vm.parentInfo.avatarlink = resp.data.fileurl;\n\n                    parentService.updateParent(vm.parentInfo).then(function (res) {\r\n                        MessageToaster.error(\"更新成功!\");\r\n                        $ionicLoading.hide();\r\n                    }, function (err) {\r\n                        MessageToaster.error(\"更新失败!\");\r\n                        $ionicLoading.hide();\r\n                    })\r\n\r\n                }, function (error) {\r\n                    $ionicLoading.hide();\r\n                }, options);\r\n            };\n\n\n            //创建新的孩子信息,使用新局部编写界面\n            vm.addChild = function () {\r\n                $ionicListDelegate.closeOptionButtons();\n                StateService.go('childrenAdd');\r\n            };\n\n            //查看孩子信息\n            vm.editChild = function (child) {\r\n                $ionicListDelegate.closeOptionButtons();\n                Session.setData('temp', child);\n                StateService.go('childrenEdit', { cid: child.uid, type: 2 });\r\n            };\n\n            //删除孩子信息\n            vm.delChild = function (child) {\r\n\n                $ionicListDelegate.closeOptionButtons();\n\n                var confirmPopup = $ionicPopup.confirm({\r\n                    title: '确定要删除此孩子:' + child.name,\n                    buttons: [\n                        { text: '取消', type: 'button-positive' },\n                        { text: '确定', type: 'button-assertive', onTap: function (e) { return true } }\n                    ]\r\n                });\n                confirmPopup.then(function (result) {\r\n                    if (result) {\r\n                        childrenSettingService.deleteChild(child.uid).then(function (data) {\r\n                            console.log(data);\n                            if (data.errno == 0) {\r\n\r\n                                console.log(data.data);\r\n\r\n                                var idx = vm.parentInfo.childrens.indexOf(child);\r\n                                vm.parentInfo.childrens.splice(idx, 1);\r\n\r\n                                MessageToaster.error(\"删除成功!\");\r\n                            }\r\n                        });\r\n                    } else {\r\n                        console.log('cancel delete');\r\n                    }\r\n                });\r\n            };\n\n            //跳转到指定页面\n            vm.goTo = function (addr) {\r\n                console.log('go to path : ' + addr);\n                StateService.go(addr);\r\n            };\n\n            //返回到上一页面\n            vm.back = function () {\r\n                StateService.back();\r\n            };\r\n        });\r\n}());\n","(function() {\n    \"use strict\";\n    angular.module('parentEditCtrl', [])\n        .controller('parentEditCtrl', function ($scope, Constants, AuthService, parentService, StateService, MessageToaster) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            vm.parentInfo = {\r\n                //name: \"刘德华\",\r\n                //nickName: \"流的花\",\r\n                //sex: 1,\r\n                //mobile: '1342222235'\r\n            };\n\n            //页面激活时处理逻辑\n            $scope.$on('$ionicView.afterEnter', activate);\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                init();\n            }\n\n            //初始化逻辑\n            function init() {\r\n                var pId = AuthService.getLoginID();\r\n                var queryParentPromise = parentService.queryParent(pId).then(function (res) {\r\n                    vm.parentInfo = res.data || {}\r\n                }, function (err) {\r\n                    MessageToaster.error(\"检索异常!\");\r\n                });\r\n            }\n\n            //保存家长信息\n            vm.save = function () {\n                if (!vm.parentInfo.name) {\r\n                    MessageToaster.error(\"请填写用户名!\");\r\n                    return;\r\n                }\n\n                parentService.updateParent(vm.parentInfo).then(function (res) {\r\n                    vm.back();\r\n                    MessageToaster.info(\"更新成功!\");\r\n                }, function (err) {\r\n                    MessageToaster.error(\"更新失败!\");\n                })\n            };\n\n            //返回到上一页面\n            vm.back = function () {\r\n                StateService.back();\r\n            };\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('parentInfoCtrl', [])\n        .controller('parentInfoCtrl', function ($scope, $q,$window, $cordovaImagePicker, $ionicActionSheet, $ionicListDelegate,\n            $ionicPopup, $ionicLoading, Session, Constants, MessageToaster, AuthService, StateService, parentService, childrenSettingService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            vm.shouldShowDelete = false;\r\n            vm.shouldShowReorder = false;\r\n            vm.listCanSwipe = true\n            vm.parentInfo = {\r\n                //name: \"刘德华\",\r\n                //nickName: \"流的花\",\r\n                //sex: 1,\r\n                //mobile: '1342222235',\r\n                //childrens: [\r\n                //    {\r\n                //        name: '刘能',\r\n                //        sex:1\r\n                //    },\r\n                //    {\r\n                //        name: '刘星',\r\n                //        sex: 1\r\n                //    }\r\n                //]\r\n            };\n\n            //页面激活时处理逻辑\n            $scope.$on('$ionicView.afterEnter', activate);\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                init();\n            };\n\n            //初始化逻辑\n            function init() {\r\n                var pId = AuthService.getLoginID();\r\n                var queryParentPromise = parentService.queryParent(pId);\r\n                var queryChildrensPromise = parentService.queryChildren(pId);\r\n\r\n                $q.all([queryParentPromise, queryChildrensPromise]).then(function (results) {\r\n                    vm.parentInfo = results[0].data || {},\r\n                   vm.parentInfo.childrens = results[1].data || [];\r\n                }, function (err) {\r\n                    MessageToaster.error(\"检索异常!\");\r\n                });\r\n            };\n\n\n            // 图片选择项\n            vm.showImageUploadChoices = function (prop) {\r\n                var hideSheet = $ionicActionSheet.show({\r\n                    buttons: [{\r\n                        text: '拍照上传'\r\n                    }, {\r\n                        text: '从相册中选'\r\n                    }],\n                    titleText: '图片上传',\n                    cancelText: '取 消',\n                    cancel: function () {\n                    },\n                    buttonClicked: function (index) {\n                        // 相册文件选择上传\n                        if (index == 1) {\r\n                            vm.readalbum(prop);\r\n                        } else if (index == 0) {\n                            // 拍照上传\n                            vm.takePicture(prop);\r\n                        }\n                        return true;\r\n                    }\r\n                });\r\n            };\n\n            //打开用户相册\n            vm.readalbum = function (prop) {\r\n                if (!window.imagePicker) {\r\n                    MessageToaster.error(\"目前您的环境不支持相册上传!\");\r\n                    return;\r\n                }\n\n                var options = {\r\n                    maximumImagesCount: 1,\n                    width: 800,\n                    height: 800,\n                    quality: 80\r\n                };\n\n                $cordovaImagePicker.getPictures(options).then(function (results) {\r\n                    var uri = results[0],\n                        name = uri;\n                    if (name.indexOf('/')) {\r\n                        var i = name.lastIndexOf('/');\n                        name = name.substring(i + 1);\r\n                    }\n\n                    vm.uploadimage(uri, prop);\r\n\n                }, function (error) {\r\n                    MessageToaster.error(\"访问相册异常:请检查是否有权限!\");\r\n                });\r\n            };\n\n\n            // 拍照\n            vm.takePicture = function (prop) {\r\n\r\n                if (!navigator.camera) {\r\n                    MessageToaster.error(\"请在真机环境中使用拍照上传!\");\r\n                    return;\r\n                }\n\n                var options = {\r\n                    quality: 75,\n                    targetWidth: 800,\n                    targetHeight: 800,\n                    saveToPhotoAlbum: false\r\n                };\n\n\n                navigator.camera.getPicture(function (imageURI) {\n                    vm.uploadimage(imageURI);\r\n                }, function (err) {\r\n                  //  MessageToaster.error(\"拍照异常:请检查是否有权限!\");\r\n                }, options);\n\n            }\n\n            // 上传\n            vm.uploadimage = function (uri) {\r\n                var fileURL = uri;\n\n                var options = new FileUploadOptions();\n                options.fileKey = \"file\";\n                options.fileName = fileURL.substr(fileURL.lastIndexOf('/') + 1);\n                options.mimeType = \"image/jpeg\";\n                options.chunkedMode = true;\n\n                var ft = new FileTransfer();\n                $ionicLoading.show({\r\n                    template: '上传中...'\r\n                });\n                ft.upload(fileURL, \"http://wx.zxing-tech.cn/upload\", function (data) {\n                    // 设置图片新地址\n                    var resp = JSON.parse(data.response);\n                    vm.parentInfo.avatarlink = resp.data.fileurl;\n\n                    parentService.updateParent(vm.parentInfo).then(function (res) {\r\n                        MessageToaster.info(\"更新成功!\");\r\n                        $ionicLoading.hide();\r\n                    }, function (err) {\r\n                        MessageToaster.error(\"更新失败!\");\r\n                        $ionicLoading.hide();\r\n                    })\r\n\r\n                }, function (error) {\r\n                    MessageToaster.error(\"上传失败!\");\r\n                    $ionicLoading.hide();\r\n                }, options);\r\n            };\n\n\n            //创建新的孩子信息,使用新局部编写界面\n            vm.addChild = function () {\n                $ionicListDelegate.closeOptionButtons();\n                StateService.go('childrenAdd');\r\n            };\n\n            //查看孩子信息\n            vm.editChild = function ( child) {\n                $ionicListDelegate.closeOptionButtons();\n                Session.setData('temp', child);\n                StateService.go('childrenEdit', { cid: child.uid, type: 2 });\r\n            };\n\n            //删除孩子信息\n            vm.delChild = function (child) {\n               \n                $ionicListDelegate.closeOptionButtons();\n\n                var confirmPopup = $ionicPopup.confirm({\r\n                    title: '确定要删除此孩子:' + child.name,\n                    buttons: [\n                        { text: '取消', type: 'button-positive' },\n                        { text: '确定', type: 'button-assertive', onTap: function (e) { return true } }\n                    ]\r\n                });\n                confirmPopup.then(function (result) {\r\n                    if (result) {\r\n                        childrenSettingService.deleteChild(child.uid).then(function (data) {\r\n                            console.log(data);\n                            if (data.errno == 0) {\r\n\r\n                                console.log(data.data);\r\n\r\n                                var idx = vm.parentInfo.childrens.indexOf(child);\r\n                                vm.parentInfo.childrens.splice(idx, 1);\r\n\r\n                                MessageToaster.info(\"删除成功!\");\r\n                            }\r\n                        });\r\n                    } else {\r\n                        console.log('cancel delete');\r\n                    }\r\n                });\r\n            };\n\n            //跳转到指定页面\n            vm.goTo = function (addr) {\r\n                console.log('go to path : ' + addr);\n                StateService.go(addr);\r\n            };\n\n            //返回到上一页面\n            vm.back=function(){\n                StateService.back();\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('parentRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n    .state('parentInfo', {\n        url: \"/parentInfo\",\n        templateUrl: 'parent/parentInfo.html',\n        controller: 'parentInfoCtrl',\n        controllerAs: 'vm'\n      })\n      .state('parent', {\n        url: \"/parent\",\n        templateUrl: 'parent/parent.html',\n        controller: 'parentCtrl',\n        controllerAs: 'vm'\n      })\n      .state('parentEdit', {\n        url: \"/parentEdit\",\n        templateUrl: 'parent/parentEdit.html',\n        controller: 'parentEditCtrl',\n        controllerAs: 'vm'\n      })\n    ;\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('parentService', [])\n    .factory('parentService', parentService);\n\n  function parentService( $q, $http, Session, Constants, ResultHandler) {\n    'ngInject';\n    var service = {\n      queryParent:queryParent,\n      updateParent:updateParent,\n      queryChildren:queryChildren,\n      resetPsw:resetPsw\n    };\n\n    //-----HTTP Header => Authorization: Bearer-{$token}-----//\n\n    //GET /api/v1/account/query/parent/{parent_accnt_id}\n    //return\n    //{\n    //  \"errno\":0,\n    //  \"error\":\"\",\n    //  \"data\":{\n    //  \"uid\":10000001,\n    //      \"name\":\"张粑粑\",\n    //      \"sex\":1,\n    //      \"mobile\":\"18612345678\",\n    //      \"nick\":\"sam\"\n    //  }\n    //}\n    function queryParent(id) {\n        console.log($http.defaults.headers);\n        var url = Constants.serverUrl + 'account/query/parent/'+id;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function updateParent(data) {\n        var url = Constants.serverUrl + 'account/parent/' + data.uid;\n        return $http({\n            method: 'post',\n            url: url,\n            data: data\n        }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n\n\n    //GET /api/v1/account/query/parentChildren/{parent_accnt_id}\n    //return\n    //{\n    //  \"errno\":0,\n    //  \"error\":\"\",\n    //  \"data\":[\n    //    {\n    //      \"uid\":10000001,\n    //      \"relationship\":1,\n    //      \"name\":\"赵大萌\",\n    //      \"sex\":1,\n    //      \"fingerfeature\":\"xxxxx\",\n    //      \"remark\":\"xxxx\"\n    //    },\n    //    ...\n    //  ]\n    //}\n    function queryChildren(id) {\n      var url = Constants.serverUrl + 'account/query/parentChildren/'+id;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function resetPsw(id){\n      var authInfo = JSON.parse(Session.getData(\"eshop_auth\"));\n      console.log(authInfo);\n      var data = {eshopToken:authInfo.token};\n      var url = Constants.serverUrl + 'account/resetPsw/'+id;\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n  };\n}());\n","(function() {\n  \"use strict\";\n  angular.module('photoModule', [\n    'photoCtrl',\n    'photoRouter'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('photoCtrl', [])\n        .controller('photoCtrl', function($scope, Constants,$stateParams,Session,StateService,$ionicSlideBoxDelegate,$timeout) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.msg=Session.getData('temp');\n                vm.images=[];\n                vm.imgCount=0;\n                if(vm.msg.photolink1!=null && vm.msg.photolink1!=\"\"){\n                    vm.images[vm.imgCount]=vm.msg.photolink1;\n                    vm.imgCount++;\n                }\n                if(vm.msg.photolink2!=null && vm.msg.photolink2!=\"\"){\n                    vm.images[vm.imgCount]=vm.msg.photolink2;\n                    vm.imgCount++;\n                }\n                if(vm.msg.photolink3!=null && vm.msg.photolink3!=\"\"){\n                    vm.images[vm.imgCount]=vm.msg.photolink3;\n                    vm.imgCount++;\n                }\n                if(vm.msg.photolink4!=null && vm.msg.photolink4!=\"\"){\n                    vm.images[vm.imgCount]=vm.msg.photolink4;\n                    vm.imgCount++;\n                }\n                if(vm.msg.photolink5!=null && vm.msg.photolink5!=\"\"){\n                    vm.images[vm.imgCount]=vm.msg.photolink5;\n                    vm.imgCount++;\n                }\n                if(vm.msg.photolink6!=null && vm.msg.photolink6!=\"\"){\n                    vm.images[vm.imgCount]=vm.msg.photolink6;\n                    vm.imgCount++;\n                }\n                console.log(vm.images);\n                vm.index=$stateParams.index;\n                console.log(vm.index);\n                //vm.image=vm.images[vm.index];\n                $timeout(function(){\n                    $scope.slider.slideTo(vm.index);\n                    $scope.slider.updateLoop();\n                    //$ionicSlideBoxDelegate.enableSlide(true);\n                    //$ionicSlideBoxDelegate.slide(vm.index);\n                    //console.log($ionicSlideBoxDelegate.currentIndex()+\" - \"+$ionicSlideBoxDelegate.slidesCount());\n                }, 300);\n\n            }\n            vm.back=function(){\n                StateService.back();\n            };\n\n            $scope.options = {\n                loop: false\n            }\n\n            $scope.$on(\"$ionicSlides.sliderInitialized\", function(event, data){\n                // data.slider is the instance of Swiper\n                console.log(data);\n                $scope.slider = data.slider;\n            });\n\n            $scope.$on(\"$ionicSlides.slideChangeStart\", function(event, data){\n                console.log('Slide change is beginning');\n                //console.log(event);\n                //console.log(data);\n            });\n\n            $scope.$on(\"$ionicSlides.slideChangeEnd\", function(event, data){\n                // note: the indexes are 0-based\n                //console.log(event);\n                console.log($scope.slider.activeIndex+\" - \"+$scope.slider.previousIndex);\n                //$scope.activeIndex = data.activeIndex;\n                //$scope.previousIndex = data.previousIndex;\n                //console.log('Slide from '+data.previousIndex +' to '+data.activeIndex);\n            });\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('photoRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n        .state('photo', {\n          url: \"/photo?:index\",\n          params:{\n            index:0\n          },\n          templateUrl: 'photo/photo.html',\n          controller: 'photoCtrl',\n          controllerAs: 'vm'\n        })\n      ;\n  }\n}());\n","(function() {\n  \"use strict\";\n  angular.module('profileModule', [\n    'profileCtrl',\n    'profileRouter',\n    'profileService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('profileCtrl', [])\n        .controller('profileCtrl', function($scope, $state, Constants, StateService, parentService, AuthService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.getParent();\n                vm.getChildren();\n            };\n\n            vm.getParent = function(){\n              parentService.queryParent(AuthService.getLoginID()).then(function(data) {\n                  if (data.errno == 0) {\n                      console.log(data.data);\n                      vm.parent = data.data;\n                  }\n              });\n            };\n\n            vm.getChildren = function(){\n                parentService.queryChildren(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.children = data.data;\n                        var children=\"\";\n                        for(var i=0;i<vm.children.length;i++){\n                          if(children==\"\")\n                            children+=vm.children[i].name\n                          else {\n                            children+=\",\"+vm.children[i].name\n                          }\n                        }\n                        vm.childrenName=children;\n                    }\n                });\n            };\n\n            vm.goTo = function(addr,params){\n                console.log('go to path : '+addr);\n                if(params)console.log(params);\n                StateService.go(addr,params);\n            };\n\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('profileRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.profile', {\n        url: \"/profile\",\n          views: {\n            'tab-profile': {\n              templateUrl: 'profile/profile.html',\n              controller: 'profileCtrl',\n              controllerAs: 'vm'\n            }\n          }\n      });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('profileService', [])\n    .factory('profileService', profileService);\n\n  function profileService( $q, $http) {\n    'ngInject';\n    var service = {\n    };\n    return service;\n\n\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('registerModule', [\n    'registerCtrl',\n    'registerRouter',\n    'registerService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('registerCtrl', [])\n        .controller('registerCtrl', function ($scope, Constants, StateService, Session, AuthService, registerService, LoginService, eshopService,$stateParams,MessageToaster) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            vm.count=0;\n            vm.isLock=false;\n            vm.org={mobile:'', password:''};\n            //微信uid的初始化\n            vm.user={ gendar:'1', name:'', mobile:'', password:'', pswConfirm:'', wechat:AuthService.getWechatId(), email:''};\n            vm.error=null;\n            vm.isParent=false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.type = $stateParams.type;\n                //console.log(\"user type = \"+vm.type);\n                //if(vm.type==2) {\n                //    vm.roleType = '2';\n                //    vm.isParent = true;\n                //}else{\n                //    vm.roleType = '3';\n                //    vm.isParent = false;\n                //}\n\n                vm.roleType = '2';\n                vm.isParent = true;\n\n            };\n\n            $scope.$watch('vm.user.name', function(newValue, oldValue) {\n                if(vm.user.name!=undefined) {\n                    if (vm.user.name.length < 1) {\n                        vm.error = '姓名不能为空';\n                    } else {\n                        vm.error = null;\n                    }\n                }else{\n                    vm.error = '姓名必须填写';\n                }\n            });\n            $scope.$watch('vm.user.mobile', function(newValue, oldValue) {\n                if(vm.user.mobile!=undefined) {\n                    if (vm.user.mobile.length != 11) {\n                        vm.error = '手机长度必须为11位';\n                    } else {\n                        vm.error = null;\n                    }\n                }else{\n                    vm.error = '手机号码必须填写';\n                }\n            });\n            $scope.$watch('vm.user.email', function(newValue, oldValue) {\n                if(vm.user.email!=undefined) {\n                    if (vm.user.email.search(/^\\w+((-\\w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+$/) != -1) {\n                        vm.error = null;\n                    } else {\n                        vm.error = '电子邮箱格式不对';\n                    }\n                }else{\n                    vm.error = '电子邮箱必须填写，用于找回密码';\n                }\n            });\n            $scope.$watch('vm.user.password', function(newValue, oldValue) {\n                if(vm.user.password!=undefined) {\n                    if (vm.user.password.length < 6) {\n                        vm.error = '密码长度必须不小于6位';\n                    } else {\n                        vm.error = null;\n                    }\n                }else{\n                    vm.error = '密码必须填写';\n                }\n            });\n            $scope.$watch('vm.user.pswConfirm', function(newValue, oldValue) {\n                if(vm.user.pswConfirm!=undefined) {\n                    if (vm.user.password != '' && vm.user.password.length >= 6  && vm.user.pswConfirm != vm.user.password) {\n                        vm.error = '密码不一致';\n                    } else {\n                        vm.error = null;\n                    }\n                }else{\n                    vm.error = '';\n                }\n            });\n\n            vm.check = function(){\n                if(vm.error!=null){\n                    vm.error = '数据未完善哦!';\n                    return false;\n                }\n                else {\n                    if(vm.user.password.length >= 6 && vm.user.pswConfirm.length >= 6\n                        && vm.user.name.length > 0 && vm.user.mobile.length == 11\n                        && vm.user.email.length > 0 && vm.user.email.length > 3\n                        && vm.user.password == vm.user.pswConfirm) return true;\n                    else vm.error = '数据未填完哦!';\n                }\n            };\n\n            //vm.simpleCheck = function(){\n            //    if(vm.org.password.length >= 6 && (vm.org.account.length == 11 || vm.org.account.length == 8 )){\n            //        vm.error = \"\";\n            //        return true;\n            //    } else vm.error = '数据未填完哦!';\n            //};\n\n            function login(userid, type) {\n                LoginService.login(vm.user.mobile, vm.user.password).then(function (response) {\r\n                    console.log(response);\n                    if (response.errno == 0) {\n\n                        //登录ESHOP\n                        eshopService.signin(vm.user.mobile, vm.user.password).then(function (data) {\r\n                            AuthService.setSession(response.data.uid, response.data.token, data, response.data.type);\n                            StateService.clearAllAndGo(AuthService.getNextPath());\r\n                        }, function (ex) {\r\n                            MessageToaster.error(ex.error);\r\n                        })\n                    } else {\r\n                        MessageToaster.error(response.error);\r\n                    }\r\n                },\n               function (error) {\r\n                   MessageToaster.error(error);\r\n               }).finally(function () {\n                   //WeuiModalLoading.hide();\n               });\n\n\n                //console.log(userid+\"...\"+type);\n                //LoginService.login(userid,type).then(function (response) {\n                //    console.log(response);\n                //    if (response.errno == 0) {\n                //        var result = response.data;\n                //        //if(typeof(result.uid) == \"undefined\" ){\n                //        if (result instanceof Array && result.length > 1) {\n                //            //modal select type\n                //            vm.roleList = result;\n                //            //alert(JSON.stringify(result));\n                //            //MessageToaster.info(\"undefine have select  \" + result.length);\n                //            //vm.showChooseModal();\n\n                //        } else {\n                //            console.log(result[0]);\n                //            if (result[0].uid != null && result[0].token != null && result[0].type != null) {\n                //                console.log(\"goto next\");\n                //                AuthService.setSession(result[0].uid, result[0].token, result[0].eshop, result[0].type, userid);\n                //                StateService.clearAllAndGo(AuthService.getNextPath());\n                //            }\n                //        }\n                //        console.log(result);\n\n                //    } else {\n                //        if (response.errno == 12004) {\n                //            //no data found\n                //            console.log(\"找不到任何信息\");\n                //        }\n                //        //MessageToaster.error(response.error);\n                //    }\n                //});\n            };\n\n            //vm.bind = function(){\n            //    //检测输入数值是否正确\n            //    if(!vm.simpleCheck())return;\n            //    //再绑定\n            //    vm.count++;\n            //    if(vm.count>3){\n            //        vm.isLock=true;\n            //        vm.error=\"尝试过多,请稍后再试!\";\n            //        return;\n            //    }\n            //    var wechatId=vm.user.wechat;\n            //    //alert(AuthService.getLoginID());\n            //    if(vm.roleType=='3'){\n            //        registerService.bindTeacher(vm.org,wechatId).then(function(data) {\n            //            if (data.errno == 0) {\n            //                var userId = data.data.uid;\n            //                console.log(\"bind teacher uid = \"+userId);\n            //                //if(userId!=null){\n            //                //    login(userId,vm.roleType);\n            //                //}\n            //                login(wechatId,vm.roleType);\n            //            }else{\n            //                console.log(\"bindTeacher get error\");\n            //            }\n            //        });\n            //    }else if(vm.roleType=='1'){\n            //        registerService.bindOrganizer(vm.org,wechatId).then(function(data) {\n            //            if (data.errno == 0) {\n            //                var userId = data.data.uid;\n            //                console.log(\"bind teacher uid = \"+userId);\n            //                //if(userId!=null){\n            //                //    login(userId,vm.roleType);\n            //                //}\n            //                login(wechatId,vm.roleType);\n            //            }\n            //        });\n            //    }\n            //    vm.error=\"密码或手机号码有误,请重试\";\n\n            //};\n\n            vm.register = function(){\n                //检测输入数值是否正确\n                if(!vm.check())return;\n                //先注册\n                vm.user.weixinno ='';\n                vm.user.wechat =  '';\n\n                registerService.registerParent(vm.user).then(function (data) {\r\n                    console.log(data);\n                    if (data.errno == 0) {\r\n                        eshopService.signup(vm.user.mobile, vm.user.password, vm.user.email).then(function (data) {\r\n                            login(vm.user.wechat, vm.roleType);\r\n                        }, function (ex) {\r\n                            MessageToaster.error(ex.error);\r\n                        })\r\n                    } else {\r\n                        //vm.error = data.error;\r\n                        if (data.errno == 10008) {\r\n                          MessageToaster.error(\"手机号码已注册过\");\r\n                        }else{\r\n                          MessageToaster.error(\"注册不成功\");\r\n                        }\r\n                    }\r\n                });\n\n                //注册成功后,使用账户去获取获取token,完成登录\n                //Session.userId=\"70000103\";\n                //Session.token='111';\n                //Session.userRole='2';\n                //var userId=\"70000103\";\n                //var token='111';\n                //var userRole='2';\n                //AuthService.setSession(userId, token, userRole);\n\n                //StateService.clearAllAndGo(AuthService.getNextPath());\n                //if(vm.roleType=='1') {\n                //    StateService.go('organizerEdit');\n                //}else if(vm.roleType=='2'){\n                //    StateService.go('parentEdit');\n                //}else if(vm.roleType=='3'){\n                //    StateService.go('teacherEdit');\n                //}\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('registerRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('register', {\n        url: \"/register?type\",\n        params:{\n          type:1\n        },\n        templateUrl: 'register/register.html',\n        controller: 'registerCtrl',\n        controllerAs: 'vm'\n      });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('registerService', [])\n    .factory('registerService', registerService);\n\n  function registerService($http, Constants, ResultHandler) {\n    'ngInject';\n    var service = {\n      registerTeacher:registerTeacher,\n      registerParent:registerParent,\n      bindTeacher:bindTeacher,\n      bindOrganizer:bindOrganizer\n    };\n\n    //POST URL: /api/v1/account/register/parent\n    //{\n    //  \"weixinno\": \"xxxxxx\",\n    //    \"name\": \"李寻欢\",\n    //    \"sex\":1,\n    //    \"mobile\": \"13812345678\",\n    //    \"nick\":\"小李飞刀\",\n    //    \"password\":\"abcd\"\n    //}\n    //return\n    //{\n    //  \"errno\":0,\n    //    \"error\":\"\",\n    //    \"data\":{\n    //       \"uid\":21000001\n    //    }\n    //}\n    function registerParent(user) {\n      console.log(user);\n      var data = {\n        \"weixinno\": user.wechat,\n        \"name\": user.name,\n        \"sex\": user.gendar,\n        \"mobile\": user.mobile,\n        \"password\" : user.password,\n        \"email\":user.email\n      };\n      var url = Constants.serverUrl + 'account/register/parent';\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    //POST URL: /api/v1/account/register/teacher\n    //{\n    //  \"name\":\"小强\",\n    //    \"sex\":1,\n    //    \"mobile\":\"value\",\n    //    \"weixinno\":\"laoshi\",\n    //    \"teachage\":5,\n    //    \"age\":29,\n    //    \"photolink\":\"照片url\",\n    //    \"password\":\"123456\"\n    //}\n    //return\n    //{\n    //  \"errno\":0,\n    //    \"error\":\"\",\n    //    \"data\":{\n    //       \"uid\":30000001\n    //    }\n    //}\n    function registerTeacher(user) {\n      var data = {\n        \"weixinno\": user.wechat,\n        \"name\": user.name,\n        \"sex\": user.gendar,\n        \"mobile\": user.mobile,\n        \"password\" : user.password\n      };\n      var url = Constants.serverUrl + 'account/register/teacher';\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function bindTeacher(user,wechatId) {\n      var data = {\n        \"weixinno\": wechatId,\n        \"account\": user.account,\n        \"password\" : user.password\n      };\n      var url = Constants.serverUrl + 'account/teacher/bind';\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function bindOrganizer(org,wechatId) {\n      var data = {\n        \"weixinno\": wechatId,\n        \"account\": org.account,\n        \"password\" : org.password\n      };\n      var url = Constants.serverUrl + 'account/deposit/bind';\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n\n    return service;\n  }\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('changePswCtrl', [])\n        .controller('changePswCtrl', function($scope, Constants, Session,StateService, MessageToaster, parentService, AuthService ) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.goTo = function(addr){\n                console.log('go to path : '+addr);\n                StateService.go(addr);\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            $scope.$watch('vm.originPsw', function(newValue, oldValue) {\n              if(vm.originPsw!=undefined) {\n                  if (vm.originPsw.length < 6) {\n                      vm.error = '密码长度必须不小于6位';\n                  } else {\n                      vm.error = null;\n                  }\n              }else{\n                  vm.error = '密码必须填写';\n              }\n            });\n            $scope.$watch('vm.password', function(newValue, oldValue) {\n                if(vm.password!=undefined) {\n                    if (vm.password.length < 6) {\n                        vm.error = '密码长度必须不小于6位';\n                    } else {\n                        vm.error = null;\n                    }\n                }else{\n                    vm.error = '密码必须填写';\n                }\n            });\n            $scope.$watch('vm.pswConfirm', function(newValue, oldValue) {\n                if(vm.pswConfirm!=undefined) {\n                    if (vm.password != '' && vm.password.length >= 6  && vm.pswConfirm != vm.password) {\n                        vm.error = '密码不一致';\n                    } else {\n                        vm.error = null;\n                    }\n                }else{\n                    vm.error = '';\n                }\n            });\n\n            vm.check = function(){\n                if(vm.error!=null){\n                    vm.error = '数据未完善哦!';\n                    return false;\n                }\n                else {\n                    if(vm.password.length >= 6 && vm.pswConfirm.length >= 6 && vm.originPsw.length > 6 && vm.password == vm.pswConfirm)\n                      return true;\n                    else vm.error = '数据未填完哦!';\n                }\n            };\n\n            vm.changePsw = function() {\n                if(!vm.check())return;\n                var json={\n                  uid:AuthService.getLoginID(),\n                  password:vm.pswConfirm\n                };\n                parentService.updateParent(json).then(function (res) {\n                    //vm.back();\n                    Session.destroy();\n                    StateService.clearAllAndGo(\"login\");\n                    MessageToaster.info(\"密码修改成功!\");\n                }, function (err) {\n                    MessageToaster.error(\"密码修改失败!\");\n                })\n            };\n\n        });\n}());\n","(function() {\n  \"use strict\";\n  angular.module('settingsModule', [\n    'settingsCtrl',\n    'changePswCtrl',\n    'settingsRouter'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('settingsCtrl', [])\n        .controller('settingsCtrl', function($scope, Constants, StateService, $ionicPopup, MessageToaster) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.goTo = function(addr){\n                console.log('go to path : '+addr);\n                StateService.go(addr);\n            };\n\n            vm.askClearCache = function() {\n              var confirmPopup = $ionicPopup.confirm({\n                  title: '确定要清除缓存？',\n                  buttons: [\n                      {text: '取消', type: 'button-positive'},\n                      {text: '确定', type: 'button-assertive',onTap: function(e) { return true}}\n                  ]\n              });\n              confirmPopup.then(function(result) {\n                  if(result) {\n                      console.log('confirm to clear cache');\n                      console.log(result);\n                      //delete(id);\n                      window.CacheClear(function(data){\n                        console.log(data);\n                        MessageToaster.info('清除缓存成功'+JSON.stringify(data));\n                      }, function(errordata){\n                        console.log(errordata);\n                        MessageToaster.error('清除缓存失败'+JSON.stringify(errordata));\n                      });\n                  } else {\n                      console.log('cancel delete');\n                  }\n              });\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.changePsw=function(){\n                StateService.go('changePsw');\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('settingsRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n        .state('settings', {\n          url: \"/settings\",\n          templateUrl: 'settings/settings.html',\n          controller: 'settingsCtrl',\n          controllerAs: 'vm'\n        })\n        .state('changePsw', {\n          url: \"/changePsw\",\n          templateUrl: 'settings/changePsw.html',\n          controller: 'changePswCtrl',\n          controllerAs: 'vm'\n        })\n  }\n}());\n","(function() {\n  \"use strict\";\n  angular.module('tabsModule', [\n    'tabsCtrl',\n    'tabsRouter',\n    'tabsService'\n  ]);\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('tabsCtrl', [])\n    .controller('tabsCtrl', function($scope,tabsService,StateService,AuthService) {\n      'ngInject';\n      var vm = this;\n      vm.activated = false;\n\n      vm.who=AuthService.getUserRole();\n      //vm.slideBoxImgs = homeService.getSlideBoxImgs();\n      //vm.homeOptions = homeService.getHomeOptions();\n      vm.goState = StateService.go;\n      $scope.$on('$ionicView.afterEnter', activate);\n      function activate() {\n        vm.activated = true;\n      }\n      function goState(state){\n        StateService.go(state);\n      }\n    });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('tabsRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs', {\n        url: '/tabs',\n        abstract: true,\n        templateUrl: 'tabs/tabs.html',\n        controller: 'tabsCtrl',\n        controllerAs: 'vm'\n      })\n  }\n\n}());\n","(function() {\n    'use strict';\n\n    angular.module('tabsService', [])\n        .factory('tabsService', tabsService);\n\n    function tabsService($q, $http) {\n        'ngInject';\n        var service = {\n\n        };\n\n        return service;\n\n\n    }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('teacherModule', [\n    'teacherCtrl',\n    'teacherEditCtrl',\n    'teacherRouter',\n    'teacherService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('teacherCtrl', [])\n        .controller('teacherCtrl', function($scope,Constants,StateService,$ionicListDelegate,$ionicPopup,teacherService,AuthService,CacheData) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.getOrganizerTeachers();\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.goTo=function(id,item){\n                //查看老师信息\n                $ionicListDelegate.closeOptionButtons();\n                CacheData.putObject(id,item);\n                StateService.go('teacherEdit',{cid:id,type:0});\n            };\n\n            vm.new=function(){\n                //创建新的老师信息\n                $ionicListDelegate.closeOptionButtons();\n                StateService.go('teacherEdit',{type:1});\n            };\n\n            vm.edit=function(id){\n                //编辑老师信息\n                $ionicListDelegate.closeOptionButtons();\n                StateService.go('teacherEdit',{cid:id,type:2});\n            };\n\n            vm.del=function(item){\n                //删除老师信息\n                $ionicListDelegate.closeOptionButtons();\n\n                var confirmPopup = $ionicPopup.confirm({\n                    title: '确定要删除此老师:'+item.name,\n                    buttons: [\n                        {text: '取消', type: 'button-positive'},\n                        {text: '确定', type: 'button-assertive',onTap: function(e) { return true}}\n                    ]\n                });\n                confirmPopup.then(function(result) {\n                    if(result) {\n                        console.log('confirm to del this teacher '+item.sid);\n                        //delete(id);\n                    } else {\n                        console.log('cancel delete');\n                    }\n                });\n            };\n\n            vm.getOrganizerTeachers = function(){\n                teacherService.queryTeacher(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.teachers = data.data;\n                    }\n                });\n            };\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('teacherEditCtrl', [])\n        .controller('teacherEditCtrl', function($scope, $stateParams, Constants, StateService, teacherService, AuthService, CacheData,MessageToaster) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n\n            vm.query = function(id){\n                vm.item =CacheData.getObject(vm.cid);\n                console.log(vm.item);\n                //vm.item = {name:'girl B',gendar:'2',sid:id,remark:'abcdefg'};\n            };\n\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                console.log($stateParams);\n                vm.cid = $stateParams.cid;\n                //0:query 1:create 2:update\n                vm.type = $stateParams.type;\n\n                if(vm.type=='0')vm.isEditing = false;\n                else vm.isEditing = true;\n\n                vm.activated = true;\n                vm.version = Constants.buildID;\n\n                if(vm.type!='1')vm.query(vm.cid);\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.save=function(){\n                console.log(vm.item);\n                //create\n                teacherService.createTeacher(vm.item,AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        //var userId = data.data.uid;\n                        //wxlogin(vm.user.wechat);\n                        StateService.back();\n                    }else{\n                        //MessageToaster.error(data.error);\n                        MessageToaster.error('无法添加，请确认手机号码是否已经使用过');\n                    }\n                },function(data){\n                    MessageToaster.error(data);\n                });\n            };\n\n\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('teacherRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('teacher', {\n        url: \"/teacher\",\n        templateUrl: 'teacher/teacher.html',\n        controller: 'teacherCtrl',\n        controllerAs: 'vm'\n      })\n      .state('teacherEdit', {\n        url: \"/teacherEdit?:cid&:type\",\n        params: {\n          cid : null,\n          type : '0'\n        },\n        templateUrl: 'teacher/teacherEdit.html',\n        controller: 'teacherEditCtrl',\n        controllerAs: 'vm'\n      })\n    ;\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('teacherService', [])\n    .factory('teacherService', teacherService);\n\n  function teacherService( $q, $http, Constants, ResultHandler) {\n    'ngInject';\n    var service = {\n      createTeacher:createTeacher,\n      updateTeacher:updateTeacher,\n      queryTeacher:queryTeacher,\n      queryTeacherDeposit:queryTeacherDeposit\n    };\n\n\n    //POST /api/v1/account/teacher/{$teacher_accnt_id}/update //老师账号信息更新，完善\n    //Request Body: { \"name\":\"小强\", \"sex\":1, \"mobile\":\"13300001111\", \"teachage\":5, \"age\":29, \"photolink\":\"照片url\", \"password\":\"123456\" }\n    //Response Body: { \"errno\":0, \"error\":\"\", \"data\":{ \"uid\":30000001 } }\n    function updateTeacher(teacher, teacherId) {\n      var data = {};\n      if(teacher.name!=null)data.name=teacher.name;\n      if(teacher.sex!=null)data.sex=teacher.sex;\n      if(teacher.mobile!=null)data.mobile=teacher.mobile;\n      if(teacher.teachage!=null)data.teachage=teacher.teachage;\n      if(teacher.age!=null)data.age=teacher.age;\n      if(teacher.url!=null)data.photolink=teacher.url;\n      if(teacher.password!=null)data.password=teacher.password;\n      if(teacher.remark!=null)data.remark=teacher.remark;\n\n      var url = Constants.serverUrl + \"account/teacher/\"+teacherId+\"/update\";\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    }\n\n    //POST /api/v1/deposit/{$deposit_accnt_id}/addteacher\n    //Request Body: { \"mobile\":\"13300001111\" }\n    //Response Body: { \"errno\":0, \"error\":\"\", \"data\":{ \"teacheruid\":30000001, \"passwd\":\"123456\" } }\n    function createTeacher(teacher, orgId) {\n      var data = {\n        \"name\":teacher.name,\n        \"sex\":teacher.sex,\n        \"mobile\":teacher.mobile,\n        \"teachage\":teacher.teachage,\n        \"age\":teacher.age\n      };\n      var url = Constants.serverUrl + \"deposit/\"+orgId+\"/addteacher\";\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    //GET /api/v1/account/query/depositTeacher/{deposit_accnt_id}\n    //return\n    //{\n    //  \"errno\":0,\n    //  \"error\":\"\",\n    //  \"data\":[\n    //    {\n    //      \"uid\":10000001,\n    //      \"name\":\"赵大萌\",\n    //      \"sex\":1,\n    //      \"mobile\":\"15032145678\",\n    //      \"teachage\":10,\n    //      \"age\":32,\n    //      \"photolink\":\"xxxxx\"\n    //      \"remark\":\"xxxx\"\n    //    },\n    //    ……\n    //  ]\n    //}\n    function queryTeacher(id) {\n      var url = Constants.serverUrl + 'account/query/depositTeacher/'+id;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n\n    function queryTeacherDeposit(id) {\n      var url = Constants.serverUrl + 'deposit/teacher/'+id;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('teacherSettingModule', [\n    'teacherSettingCtrl',\n    'teacherSettingRouter',\n    'teacherSettingService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('teacherSettingCtrl', [])\n        .controller('teacherSettingCtrl', function($scope, $state, Constants, StateService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.goTo = function(addr){\n                console.log(addr);\n                StateService.go(addr);\n            };\n\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('teacherSettingRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.teacherSetting', {\n        url: \"/teacherSetting\",\n          views: {\n            'tab-teacherSetting': {\n              templateUrl: 'teacherSetting/teacherSetting.html',\n              controller: 'teacherSettingCtrl',\n              controllerAs: 'vm'\n            }\n          }\n      });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('teacherSettingService', [])\n    .factory('teacherSettingService', myService);\n\n  function myService( $q, $http) {\n    'ngInject';\n    var service = {\n    };\n    return service;\n\n\n  }\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('buyAppCtrl', [])\n        .controller('buyAppCtrl', function($scope, $state, $stateParams, Constants, StateService, vipBuyService, AuthService, MessageToaster, Session) {\n            'ngInject';\n            var vm = this;\n\n            vm.activated = false;\n            vm.information = \"\";\n\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                console.log($stateParams);\n                vm.index = $stateParams.index;\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.query(vm.index);\n            }\n\n\n            vm.query = function(id){\n                console.log(\" index = \"+id);\n                var temp=JSON.parse(Session.getData('temp'));\n                console.log(temp);\n                if(temp.businessid == id)\n                    vm.item=temp;\n                console.log(vm.item);\n            };\n\n            vm.back = function(){\n                StateService.back();\n                Session.rmData('temp');\n            };\n\n            vm.getEndDate = function(payTime,numOfDays){\n                var date=new Date(payTime.substring(0,4),Number(payTime.substring(4,6))-1,payTime.substring(6,8),payTime.substring(8,10),payTime.substring(10,12),payTime.substring(14,16));\n                date.setTime(date.getTime()+numOfDays*24*60*60*1000);\n                return date.getTime();\n                //return \"\"+date.getFullYear()+(date.getMonth()+1)+(date.getDate()>9?date.getDate():('0'+date.getDate()))+'235959';\n            };\n\n            vm.pay=function(){\n                var parentId=AuthService.getLoginID();\n                vipBuyService.createOrder2(parentId, vm.index)\n                    .then(function (response) {\n                        //alert(JSON.stringify(response));\n                        if (response.errno == 0) {\n                            var result=response.data;\n                            var orderId=result.orderId;\n                            //vm.information = JSON.stringify(result);\n                            var params = {\n                                partnerid: result.partnerid, // merchant id\n                                prepayid: result.prepayid, // prepay id\n                                noncestr: result.noncestr, // nonce\n                                timestamp: result.timestamp, // timestamp\n                                sign: result.sign, // signed string\n                            };\n\n                            Wechat.sendPaymentRequest(params, function () {\n                                alert(\"Success\");\n                            }, function (reason) {\n                                alert(\"Failed: \" + reason);\n                            });\n                            // WeixinJSBridge.invoke(\n                            //     'getBrandWCPayRequest',\n                            //     {\n                            //         \"appId\":result.appId,\n                            //         \"timeStamp\":\"\"+result.timeStamp,\n                            //         \"nonceStr\":result.nonceStr,\n                            //         \"package\":\"prepay_id=\"+result.prepay_id,\n                            //         \"signType\":\"MD5\",\n                            //         \"paySign\":result.paySign\n                            //     },\n                            //     function(res){\n                            //         var msg = res.err_msg;\n                            //         if(msg == \"get_brand_wcpay_request:ok\" ) {\n                            //             //保存数据．跳转页面\n                            //             //check order make sure user had pay the order ready.\n                            //             vipBuyService.checkOrder(orderId).then(\n                            //                 function(result) {\n                            //                     if(result.errno == 0 ){\n                            //                         MessageToaster.info(\"微信支付完成\");\n                            //                         StateService.clearAllAndGo(AuthService.getNextPath());\n                            //                     }\n                            //                 },\n                            //                 function (reason) {\n                            //                     alert(\"checkOrder error \"+JSON.stringify(reason));\n                            //                 }\n                            //             );\n                            //         }else if(msg.endsWith(\"cancel\")){\n                            //             MessageToaster.info(\"微信支付已取消\");\n                            //         }else if(msg.endsWith(\"fail\")){\n                            //             alert(\"付款失败\");\n                            //         }\n                            //     }\n                            // );\n                          }else{\n                            MessageToaster.error(response.error);\n                          }\n                    }, function (error) {\n                        //alert(JSON.stringify(error));\n                        vm.information += \" 请求付款失败 \" + error;\n                    });\n            };\n\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('buyCtrl', [])\n        .controller('buyCtrl', function($scope, $state, $stateParams, Constants, StateService, vipBuyService, AuthService, MessageToaster, Session) {\n            'ngInject';\n            var vm = this;\n\n            vm.activated = false;\n            vm.wechatPayReady = false;\n            vm.information = \"\";\n\n            $scope.onBridgeReady=function () {\n                //alert('wechat ok');\n                vm.wechatPayReady=true;\n            };\n\n            if (typeof WeixinJSBridge == \"undefined\"){\n                console.log(\"not found WeixinJSBridge\");\n                if(document.addEventListener){\n                    document.addEventListener('WeixinJSBridgeReady', $scope.onBridgeReady, false);\n                }else if (document.attachEvent){\n                    document.attachEvent('WeixinJSBridgeReady', $scope.onBridgeReady);\n                    document.attachEvent('onWeixinJSBridgeReady', $scope.onBridgeReady);\n                }\n                console.log(\"add event listener for WeixinJSBridge\");\n            }else{\n                console.log(\"WeixinJSBridge exist\");\n                $scope.onBridgeReady();\n            }\n\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                console.log($stateParams);\n                vm.index = $stateParams.index;\n\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.query(vm.index);\n                vm.wechatInit();\n            }\n            \n            vm.wechatInit = function(){};\n\n            vm.query = function(id){\n                console.log(\" index = \"+id);\n                var temp=Session.getData('temp');\n                if(temp.businessid == id)\n                    vm.item=temp;\n\n            };\n\n            vm.back = function(){\n                StateService.back();\n                Session.rmData('temp');\n            };\n\n            vm.getEndDate = function(payTime,numOfDays){\n                var date=new Date(payTime.substring(0,4),Number(payTime.substring(4,6))-1,payTime.substring(6,8),payTime.substring(8,10),payTime.substring(10,12),payTime.substring(14,16));\n                date.setTime(date.getTime()+numOfDays*24*60*60*1000);\n                return date.getTime();\n                //return \"\"+date.getFullYear()+(date.getMonth()+1)+(date.getDate()>9?date.getDate():('0'+date.getDate()))+'235959';\n            };\n\n            vm.pay=function(){\n                var parentId=AuthService.getLoginID();\n                vipBuyService.createOrder(parentId, AuthService.getWechatId(), vm.index)\n                    .then(function (response) {\n                        var result=response.data;\n                        var orderId=result.orderId;\n                        //vm.information = JSON.stringify(result);\n                        //alert(JSON.stringify(result));\n                        if(vm.wechatPayReady){\n                            WeixinJSBridge.invoke(\n                                'getBrandWCPayRequest',\n                                {\n                                    \"appId\":result.appId,\n                                    \"timeStamp\":\"\"+result.timeStamp,\n                                    \"nonceStr\":result.nonceStr,\n                                    \"package\":\"prepay_id=\"+result.prepay_id,\n                                    \"signType\":\"MD5\",\n                                    \"paySign\":result.paySign\n                                },\n                                function(res){\n                                    //alert(JSON.stringify(res));\n                                    var msg = res.err_msg;\n                                    //alert(msg);\n\n                                    if(msg == \"get_brand_wcpay_request:ok\" ) {\n                                        //保存数据．跳转页面\n                                        //check order make sure user had pay the order ready.\n                                        vipBuyService.checkOrder(orderId).then(\n                                            function(result) {\n                                                //{\"errno\":0,\"error\":\"\",\n                                                // \"data\":{\"orderId\":\"139630530220161103152842\",\"wechatOrderId\":\"4003682001201611038611986947\",\n                                                // \"totalFee\":\"1\",\"payState\":\"SUCCESS\",\"payTime\":\"20161103152851\"}}\n                                                //alert(JSON.stringify(result));\n                                                if(result.errno == 0 ){\n                                                    MessageToaster.info(\"微信支付完成\");\n                                                    StateService.clearAllAndGo(AuthService.getNextPath());\n                                                }\n                                                //var status = result.data.payState;\n                                                /*\n                                                var payTime=result.data.payTime;\n                                                var endDate=vm.getEndDate(payTime,vm.item.numofdays);\n                                                if(status === 'SUCCESS'){\n                                                    //保存数据．跳转页面\n                                                    vipBuyService.updatePayedOrder(parentId,orderId,payTime,endDate).then(\n                                                        function(updateResult) {\n                                                            //alert(\"updatePayedOrder sucess \"+JSON.stringify(updateResult));\n                                                            //vm.information += \" udpate success \";\n                                                            //跳转页面\n                                                            if(updateResult.errno===0) {\n                                                                MessageToaster.info(\"微信支付完成\");\n                                                                StateService.clearAllAndGo(AuthService.getNextPath());\n                                                            }\n                                                        },\n                                                        function(error) {\n                                                            alert(\"updatePayedOrder error \"+JSON.stringify(error));\n                                                        }\n                                                    );\n                                                }\n                                                */\n                                            },\n                                            function (reason) {\n                                                alert(\"checkOrder error \"+JSON.stringify(reason));\n                                            }\n                                        );\n                                    //}else if(msg == \"get_brand_wcpay_request:cancel\"){\n                                    }else if(msg.endsWith(\"cancel\")){\n                                        //alert(\"用户取消\");\n                                        //vm.information=\"用户取消\";\n                                        MessageToaster.info(\"微信支付已取消\");\n                                    //}else if(msg == \"get_brand_wcpay_request:fail\"){\n                                    }else if(msg.endsWith(\"fail\")){\n                                        alert(\"付款失败\");\n                                    }\n                                }\n                            );\n                        }\n                    }, function (error) {\n                        //alert(JSON.stringify(error));\n                        vm.information += \" 请求付款失败 \" + error;\n                    });\n            };\n\n        });\n}());\n","(function() {\n  \"use strict\";\n  angular.module('vipBuyModule', [\n    'vipBuyCtrl',\n    'buyCtrl',\n    'buyAppCtrl',\n    'vipBuyRouter',\n    'vipBuyService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('vipBuyCtrl', [])\n        .controller('vipBuyCtrl', function($scope, $state, Constants, StateService,vipBuyService,AuthService,MessageToaster,Session) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            vm.isSelected=-1;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.getMenu();\n            }\n\n            vm.gotoBuy = function(){\n                var where = vm.menu[vm.isSelected];\n                Session.setData('temp',JSON.stringify(where));\n                StateService.go('buy',{index:where.businessid});\n            };\n\n            vm.back = function(){\n                StateService.back();\n            };\n\n            vm.getMenu = function(){\n                vipBuyService.getMenu().then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.menu = data.data;\n                    }\n                });\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('vipBuyRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n        .state('vipBuy', {\n          url: \"/vipBuy\",\n          templateUrl: 'vipBuy/vipBuy.html',\n          controller: 'vipBuyCtrl',\n          controllerAs: 'vm'\n        })\n        .state('buy', {\n          url: \"/buy?:index\",\n          params:{\n              index:0\n          },\n          templateUrl: 'vipBuy/buy.html',\n          controller: 'buyAppCtrl',\n          controllerAs: 'vm'\n        });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('vipBuyService', [])\n    .factory('vipBuyService', myService);\n\n  function myService($http,Constants,ResultHandler) {\n    'ngInject';\n\n    var service = {\n      getMenu:getMenu,\n      getOrders:getOrders,\n      checkOrder:checkOrder,\n      createOrder:createOrder,\n      createOrder2:createOrder2,\n      updatePayedOrder:updatePayedOrder\n    };\n\n    function getMenu(){\n      var url = Constants.serverUrl + 'charge/fetch/menuList';\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getOrders(parentId) {\n      var url = Constants.serverUrl + 'charge/order/fetch/'+parentId;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function checkOrder(orderId){\n      var url = Constants.serverUrl + 'wechatPay/order/'+orderId;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function createOrder(parentId,wxId,goodsId){\n      var data = {\n        goodsId:goodsId,\n        userId:parentId,\n        wxId:wxId\n      };\n      var url = Constants.serverUrl + 'wechatPay/order';\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function createOrder2(parentId,goodsId){\n      var data = {\n        goodsId:goodsId,\n        userId:parentId\n      };\n      var url = Constants.serverUrl + 'wechatPay/appOrder';\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function updatePayedOrder(parentId,orderId,payTime,endDate){\n        //  \"cutofftime\":endDate, //不确定是什么值\n        var data = {\n        \"paystatus\":1,\n        \"paytime\":payTime,\n        \"orderid\":orderId\n      };\n      var url = Constants.serverUrl + 'charge/order/update/'+parentId;\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n  }\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('recordCtrl', [])\n        .controller('recordCtrl', function($scope, $state, $stateParams, Constants, StateService, vipBuyService, AuthService, MessageToaster, Session) {\n            'ngInject';\n            var vm = this;\n\n            vm.activated = false;\n\n\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                console.log($stateParams);\n                vm.index = $stateParams.index;\n\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.query(vm.index);\n            }\n\n            vm.query = function(id){\n                console.log(\" index = \"+id);\n                var temp=Session.getData('temp');\n                if(temp.OrderID == id)\n                    vm.item=temp;\n\n            };\n\n            vm.back = function(){\n                StateService.back();\n                Session.rmData('temp');\n            };\n\n\n        });\n}());\n","(function() {\n  \"use strict\";\n  angular.module('vipRecordModule', [\n    'vipRecordCtrl',\n    'recordCtrl',\n    'vipRecordRouter',\n    'vipRecordService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('vipRecordCtrl', [])\n        .controller('vipRecordCtrl', function($scope, $state, Constants, StateService,vipBuyService,AuthService,MessageToaster,Session) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.getRecords();\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.goTo=function(id,item){\n                Session.setData('temp',item);\n                StateService.go('record',{index:id});\n            };\n\n            vm.getRecords = function () {\n                vipBuyService.getOrders(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.records = data.data;\n                    }\n                });\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('vipRecordRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n        .state('vipRecord', {\n          url: \"/vipRecord\",\n          templateUrl: 'vipRecord/vipRecord.html',\n          controller: 'vipRecordCtrl',\n          controllerAs: 'vm'\n        })\n        .state('record', {\n          url: \"/record?:index\",\n          params:{\n            index:0\n          },\n          templateUrl: 'vipRecord/record.html',\n          controller: 'recordCtrl',\n          controllerAs: 'vm'\n        });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('vipRecordService', [])\n    .factory('vipRecordService', eService);\n\n  function eService( $q, $http,Constants,ResultHandler) {\n    'ngInject';\n    var service = {\n      exit:exit\n    };\n\n    function exit(id) {\n      var url = Constants.serverUrl + 'account/exit/'+id;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('vipTipsModule', [\n    'vipTipsCtrl',\n    'vipTipsRouter',\n    'vipTipsService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('vipTipsCtrl', [])\n        .controller('vipTipsCtrl', function($scope, $state, Constants, StateService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n            vm.expend1=false;\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.test=function(){\n                console.log('test');\n            }\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('vipTipsRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n        .state('vipTips', {\n          url: \"/vipTips\",\n          templateUrl: 'vipTips/vipTips.html',\n          controller: 'vipTipsCtrl',\n          controllerAs: 'vm'\n        })\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('vipTipsService', [])\n    .factory('vipTipsService', eService);\n\n  function eService( $q, $http,Constants,ResultHandler) {\n    'ngInject';\n    var service = {\n      exit:exit\n    };\n\n    function exit(id) {\n      var url = Constants.serverUrl + 'account/exit/'+id;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n\n  }\n\n}());\n"]}