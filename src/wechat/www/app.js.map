{"version":3,"sources":["app.js","vendor.js","code/AuthService.js","code/baiduService.js","code/CacheData.js","code/code.js","code/filter.js","code/JPushService.js","code/loadingAlert.js","code/MessageToaster.js","code/ResultHandler.js","code/Session.js","code/StateService.js","config/config.js","config/constant.js","config/environmentConfig.js","config/httpDevConfig.js","config/httpRelConfig.js","directive/Directive.js","directive/ui-map.js","modules/modules.js","lib/DateFormat.js","tools/tools.js","modules/childrenSetting/childrenAddCtrl.js","modules/childrenSetting/childrenEditCtrl.js","modules/childrenSetting/childrenSetting.js","modules/childrenSetting/childrenSettingCtrl.js","modules/childrenSetting/childrenSettingRouter.js","modules/childrenSetting/childrenSettingService.js","modules/comment/comment.js","modules/comment/commentService.js","modules/children/children.js","modules/children/childrenCtrl.js","modules/children/childrenRouter.js","modules/children/childrenService.js","modules/depositChildren/depositChildren.js","modules/depositChildren/depositChildrenCtrl.js","modules/depositChildren/depositChildrenRouter.js","modules/depositChildren/depositChildrenService.js","modules/depositChildren/teacherDepositChildrenCtrl.js","modules/eshop/eshopEntry.js","modules/eshop/eshopEntryCtrl.js","modules/eshop/eshopEntryRouter.js","modules/eshop/eshopService.js","modules/estimate/estimate.js","modules/estimate/estimateCtrl.js","modules/estimate/estimateDepositCtrl.js","modules/estimate/estimateRouter.js","modules/exit/exit.js","modules/exit/exitCtrl.js","modules/exit/exitRouter.js","modules/exit/exitService.js","modules/help/help.js","modules/help/helpCtrl.js","modules/help/helpDocCtrl.js","modules/help/helpRouter.js","modules/Login/Login.js","modules/Login/LoginCtrl.js","modules/Login/LoginRouter.js","modules/Login/LoginService.js","modules/Login/resetPswCtrl.js","modules/map/map.js","modules/map/MapCtrl.js","modules/map/MapRouter.js","modules/map/MapService.js","modules/message/message.js","modules/message/messageCtrl.js","modules/message/messageRouter.js","modules/message/messageService.js","modules/message/newMessageCtrl.js","modules/nearby/depositCommentCtrl.js","modules/nearby/depositCommentService.js","modules/nearby/nearby.js","modules/nearby/nearbyCtrl.js","modules/nearby/nearbyDepositInfoCtrl.js","modules/nearby/nearbyListCtrl.js","modules/nearby/nearbyRouter.js","modules/nearby/nearbyService.js","modules/organizer/organizer.js","modules/organizer/organizerCtrl.js","modules/organizer/organizerEditCtrl.js","modules/organizer/organizerInfoCtrl.js","modules/organizer/organizerRouter.js","modules/organizer/organizerService.js","modules/parent/parent.js","modules/parent/parentCtrl.js","modules/parent/parentEditCtrl.js","modules/parent/parentInfoCtrl.js","modules/parent/parentRouter.js","modules/parent/parentService.js","modules/order/depositListctrl.js","modules/order/order.js","modules/order/orderCtrl.js","modules/order/orderRouter.js","modules/order/orderService.js","modules/profile/profile.js","modules/profile/profileCtrl.js","modules/profile/profileRouter.js","modules/profile/profileService.js","modules/photo/photo.js","modules/photo/photoCtrl.js","modules/photo/photoRouter.js","modules/register/register.js","modules/register/registerCtrl.js","modules/register/registerRouter.js","modules/register/registerService.js","modules/tabs/tabs.js","modules/tabs/tabsCtrl.js","modules/tabs/tabsRouter.js","modules/tabs/tabsService.js","modules/settings/aboutCtrl.js","modules/settings/changePswCtrl.js","modules/settings/settings.js","modules/settings/settingsCtrl.js","modules/settings/settingsRouter.js","modules/vipBuy/buyAppCtrl.js","modules/vipBuy/buyCtrl.js","modules/vipBuy/vipBuy.js","modules/vipBuy/vipBuyCtrl.js","modules/vipBuy/vipBuyRouter.js","modules/vipBuy/vipBuyService.js","modules/teacher/teacher.js","modules/teacher/teacherCtrl.js","modules/teacher/teacherEditCtrl.js","modules/teacher/teacherRouter.js","modules/teacher/teacherService.js","modules/teacherSetting/teacherSetting.js","modules/teacherSetting/teacherSettingCtrl.js","modules/teacherSetting/teacherSettingRouter.js","modules/teacherSetting/teacherSettingService.js","modules/WxLogin/WxLogin.js","modules/WxLogin/WxLoginCtrl.js","modules/WxLogin/WxLoginRouter.js","modules/WxLogin/WxLoginService.js","modules/vipRecord/recordCtrl.js","modules/vipRecord/vipRecord.js","modules/vipRecord/vipRecordCtrl.js","modules/vipRecord/vipRecordRouter.js","modules/vipRecord/vipRecordService.js","modules/vipTips/vipTips.js","modules/vipTips/vipTipsCtrl.js","modules/vipTips/vipTipsRouter.js","modules/vipTips/vipTipsService.js","modules/childrenSteam/childrenSteam.js","modules/childrenSteam/childrenSteamCtrl.js","modules/childrenSteam/childrenSteamRouter.js","modules/childrenSteam/childrenSteamService.js","modules/childrenSteam/videoCtrl.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACn0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3hBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["(function () {\r\n    \"use strict\";\n    angular.module('xhStarter', [\n        'vendor',\n        'config',\n        'code',\n        'directive',\n        'tools',\n        'modules'\n    ])\n\n    .run(function ($ionicPlatform, $state, AuthService, JPushService) {\r\n        $ionicPlatform.registerBackButtonAction(function (event) {\r\n           // alert(\"cur\" + JSON.stringify($state.current));\r\n            if ($state.current.name == AuthService.getNextPath()) {\r\n                event.preventDefault();\r\n                cordova.plugins.backgroundMode.moveToBackground();\r\n            }\r\n        }, 100);\r\n\r\n        $ionicPlatform.ready(function () {\n            // Hide the accessory bar by default (remove this to show the accessory bar above the keyboard\n            // for form inputs)\n            if (window.cordova && window.cordova.plugins && window.cordova.plugins.Keyboard) {\r\n                cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);\n                cordova.plugins.Keyboard.disableScroll(true);\r\n            }\n            if (window.StatusBar) {\n                // org.apache.cordova.statusbar required\n                StatusBar.styleDefault();\r\n            }\n\n         \n            //\n            //cordova.plugins.backgroundMode.enable();\n            //cordova.plugins.backgroundMode.overrideBackButton();\n            //cordova.plugins.backgroundMode.on('activate', function () {\r\n            //     cordova.plugins.notification.badge.clear();\r\n            //});\n\n           \n\n            //\r\n            var onOpenNotificationInAndroidCallback = function (data) {\r\n                $state.go(AuthService.getNextPath(), { index:1});\r\n            }\r\n            var config = {\r\n                openNotificationInAndroidCallback: onOpenNotificationInAndroidCallback\r\n            };\r\n            //\r\n            JPushService.init(config);\r\n        });\r\n    })\n\n    .config(function ($ionicConfigProvider, $urlRouterProvider, $stateProvider, $httpProvider, $sceDelegateProvider) {\r\n        console.log(\"start app\");\n\n        if (!ionic.Platform.isIOS()) {\r\n            $ionicConfigProvider.scrolling.jsScrolling(false);\r\n        }\n        $sceDelegateProvider.resourceUrlWhitelist(['**']);\n        $httpProvider.interceptors.push([\n            '$injector',\n            function ($injector) {\r\n                return $injector.get('AuthInterceptor');\r\n            }\n        ]);\n        $ionicConfigProvider.platform.ios.tabs.style('standard');\n        $ionicConfigProvider.platform.ios.tabs.position('bottom');\n        $ionicConfigProvider.platform.android.tabs.style('standard');\n        $ionicConfigProvider.platform.android.tabs.position('bottom');\n\n        $ionicConfigProvider.platform.ios.navBar.alignTitle('center');\n        $ionicConfigProvider.platform.android.navBar.alignTitle('center');\n\n        $ionicConfigProvider.platform.ios.backButton.previousTitleText('').icon('ion-ios-arrow-thin-left');\n        $ionicConfigProvider.platform.android.backButton.previousTitleText('').icon('ion-android-arrow-back');\n\n        $ionicConfigProvider.platform.ios.views.transition('ios');\n        $ionicConfigProvider.platform.android.views.transition('android');\n\n        // $ionicConfigProvider.platform.android.tabs.position('bottom');\n        // $ionicConfigProvider.views.transition('none');\n        // $ionicConfigProvider.backButton.text('').icon('ion-ios-arrow-left');\n        // $ionicConfigProvider.tabs.style(\"standard\");\n        // $ionicConfigProvider.navBar.alignTitle('center');\n    })\n        .factory('AuthInterceptor', function ($rootScope, $q, AUTH_EVENTS) {\r\n            return {\r\n                responseError: function (response) {\r\n                    $rootScope.$broadcast({\r\n                        401: AUTH_EVENTS.notAuthenticated,\n                        403: AUTH_EVENTS.notAuthorized,\n                        419: AUTH_EVENTS.sessionTimeout,\n                        440: AUTH_EVENTS.sessionTimeout\r\n                    }[response.status], response);\n                    return $q.reject(response);\r\n                }\r\n            };\r\n        });\r\n}());\n","(function() {\n    \"use strict\";\n    angular.module('vendor', [\n            'ionic',\n            'ngCordova',\n            'templates',\n            'ngStorage',\n            'toaster',\n            'ui.rCalendar.tpls',\n            'baiduMap',\n            'ionic-ratings'\n        ]);\n}());\n","(function() {\n  \"use strict\";\n  angular.module('AuthService', []).factory('AuthService', function(Session,Path,Role) {\n    'ngInject';\n\n    var authService = {\n      getLoginID: getLoginID,\n      getLoginToken: getLoginToken,\n      getUserRole: getUserRole,\n      getNextPath: getNextPath,\n      getWechatId:getWechatId,\n      setSession: setSession\n    };\n\n    function getLoginID() {\n      return Session.getData('userId');\n    };\n\n    function getLoginToken() {\n      return Session.getData('token');\n    };\n\n    function getUserRole() {\n      return Session.getData('userRole');\n    };\n    function getWechatId(){\n      return Session.getData('wechat');\n    }\n\n    function setSession(id,token,eshop,role,wechat){\n      Session.create(token,eshop,id,role,wechat);\n    };\n\n    function getNextPath() {\n      if(Session.getData('userRole')==Role.Organizer){\n        return Path.OrganizerRolePath;\n      }else if(Session.getData('userRole')==Role.Parent){\n        return Path.ParentRolePath;\n      }else if(Session.getData('userRole')==Role.Teacher){\n        return Path.TeacherRolePath;\n      }else if(Session.getData('userRole')==Role.visitor){\n        return Path.VisitorRolePath;\n      }\n    };\n\n    return authService;\n  });\n\n}());\n","(function() {\r\n  'use strict';\r\n\r\n/**\r\n * \r\n */\r\nangular.module('BaiduService',[])\r\n  .service('BaiduService', function ($q, $http, Constants) {\r\n\r\n      /**\r\n       * \r\n       * @param {*} imgUrl\r\n       */\r\n      function _convertThumbUrl(imgUrl){\r\n        if(!imgUrl) return;\r\n          return imgUrl.replace(/.(jpg|png|gif)/,'_400x200.$1');\r\n      }\r\n\r\n    /**\r\n     * \r\n     * @param {*} longitude\r\n     * @param {*} latitude\r\n     */\r\n    function _getNearbyDeposits(longitude, latitude) {\r\n        var defer = $q.defer(),\r\n       // apiUrl = Constants.serverUrl+ 'nearbyDepositList/113.271/23.135';\r\n         apiUrl = Constants.serverUrl + 'nearbyDepositList/'+longitude+'/'+latitude;\r\n\r\n        $http.get(apiUrl).success(function (data, status, headers, congfig) {\r\n          defer.resolve(data.data);\r\n        }).error(function (err) {\r\n          defer.reject(err);\r\n        });\r\n        return defer.promise;\r\n      }\r\n\r\n      /**\r\n       * \r\n       * @param {*} depositId\r\n       */\r\n      function _getDepositInfo(depositId) {\r\n        var defer = $q.defer(),\r\n          apiUrl = Constants.serverUrl + 'depositInfo/' + depositId;\r\n\r\n        $http.get(apiUrl).success(function (data, status, headers, congfig) {\r\n          defer.resolve(data.data);\r\n        }).error(function (err) {\r\n          defer.reject(err);\r\n        });\r\n\r\n        return defer.promise;\r\n      }\r\n\r\n      /**\r\n       * \r\n       * @param {*} depositId\r\n       */\r\n      function _getDepositComments (depositId) {\r\n        var defer = $q.defer(),\r\n          apiUrl = Constants.serverUrl + 'comments/deposit?depositid=' + depositId;\r\n\r\n        $http.get(apiUrl).success(function (data, status, headers, congfig) {\r\n          defer.resolve(data.data);\r\n        }).error(function (err) {\r\n          defer.reject(err);\r\n        });\r\n\r\n        return defer.promise;\r\n      }\r\n\r\n      /**\r\n       * \r\n       * @param {*} depositId\r\n       */\r\n      function _getDepositInfoWithComments (depositId) {\r\n        var defer = $q.defer();\r\n\r\n        var getDepositDeferred = _getDepositInfo(depositId);\r\n        var getDepositCommentsDeferred = _getDepositComments(depositId);\r\n\r\n        $q.all([getDepositDeferred, getDepositCommentsDeferred]).then(function (results) {\r\n            var depositInfo = results[0],\r\n              commentsData = results[1];\r\n\r\n            depositInfo.Score = commentsData.scores || 0;\r\n            depositInfo.Comments = [];\r\n\r\n            //\r\n            depositInfo.Images = [];\r\n            depositInfo.FrontDeskLink && depositInfo.Images.push(_convertThumbUrl(depositInfo.FrontDeskLink));\r\n            depositInfo.PublicZoneLink && depositInfo.Images.push(_convertThumbUrl(depositInfo.PublicZoneLink));\r\n            depositInfo.KitchenLink && depositInfo.Images.push(_convertThumbUrl(depositInfo.KitchenLink));\r\n            depositInfo.DiningRoomLink && depositInfo.Images.push(_convertThumbUrl(depositInfo.DiningRoomLink));\r\n            depositInfo.RestRoomLink1 && depositInfo.Images.push(_convertThumbUrl(depositInfo.RestRoomLink1));\r\n            depositInfo.RestRoomLink2 && depositInfo.Images.push(_convertThumbUrl(depositInfo.RestRoomLink2));\r\n            depositInfo.ClassRoomLink1 && depositInfo.Images.push(_convertThumbUrl(depositInfo.ClassRoomLink1));\r\n            depositInfo.ClassRoomLink2 && depositInfo.Images.push(_convertThumbUrl(depositInfo.ClassRoomLink2));\r\n\r\n            for (var j = 0; j < commentsData.comments.length; j++) {\r\n                depositInfo.Comments.push(commentsData.comments[j]);\r\n            }\r\n\r\n            defer.resolve(depositInfo);\r\n        }, function (err) {\r\n            defer.reject(err);\r\n        });\r\n\r\n        return defer.promise;\r\n      }\r\n\r\n      return {\r\n          getNearbyDeposits: _getNearbyDeposits,\r\n          getDepositInfo: _getDepositInfo,\r\n          getDepositComments: _getDepositComments,\r\n          getDepositInfoWithComments: _getDepositInfoWithComments\r\n      };\r\n  });\r\n\r\n}());\r\n","(function() {\n    \"use strict\";\n    angular.module('CacheData', []).service('CacheData', function($window) {\n        'ngInject';\n\n        var cacheData = {\n            put: put,\n            get: get,\n            putObject: putObject,\n            getObject: getObject,\n            remove: remove,\n            clearAll: clearAll\n        };\n        function put(key, value) {\n            $window.localStorage[key] = value;\n        };\n\n        function get(key, defaultValue) {\n            return $window.localStorage[key] || defaultValue;\n        };\n\n        function putObject(key, value) {\n            $window.localStorage[key] = JSON.stringify(value);\n        };\n\n        function getObject(key) {\n            return JSON.parse($window.localStorage[key] || '{}');\n        };\n\n        function remove(key) {\n            $window.localStorage.removeItem(key);\n        };\n\n        function clearAll() {\n            $window.localStorage.clear();\n        };\n        return cacheData;\n    });\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('code', [\n    'Session',\n    'StateService',\n    'CacheData',\n    'AuthService',\n    'LoadingAlert',\n    'ResultHandler',\n    'MessageToaster',\n    'CustomFilter',\n    'BaiduService',\n     'JPushService'\n  ]);\n\n}());\n","(function() {\n'use strict';\n\nvar app = angular.module('CustomFilter', []);\napp.filter('gendarChange', function () {\n    return function (input) {\n        if (input == \"1\")return \"\";\n        else if (input == \"2\")return \"\";\n        else return \"\";\n    };\n});\n\napp.filter('JSchange', function () {\n    return function (input) {\n        if (input == \"1\")return \"\";\n        else if (input == \"3\")return \"\";\n        else if (input == \"2\")return \"\";\n        else return \"\";\n    };\n});\n\napp.filter('PayStatus', function () {\n    return function (input) {\n        if (input == \"1\")return \"\";\n        else if (input == \"0\")return \"\";\n        else return \"\";\n    };\n});\n\napp.filter('PayType', function () {\n    return function (input) {\n        if (input == \"1\")return \"\";\n        else if (input == \"0\")return \"\";\n        else if (input == \"2\")return \"\";\n        else return \"\";\n    };\n});\n\napp.filter('relationshipChange', function () {\n    return function (input) {\n        if (input == \"1\")return \"\";\n        else if (input == \"2\")return \"\";\n        else if (input == \"3\")return \"\";\n        else if (input == \"4\")return \"\";\n        else return \"\";\n    };\n});\n\napp.filter('dateChange', function () {\n    return function (input) {\n        var d = new Date(input.replace(/-/g,   \"/\"));\n        var now = new Date();\n        var time=now.getTime()- d.getTime();\n        if(time>24*60*60*1000){\n            return d.Format('MMdd');\n        }else if(time>60*60*1000){\n            //return d.Format('hh')+\"\";\n            var hour=parseInt(time/(60*60*1000));\n            return hour+\"\";\n        }else{\n            //return d.Format('mm')+\"\";\n            var min=parseInt(time/(60*1000));\n            return min+\"\";\n        }\n    };\n});\n\napp.filter('ImageMin', function () {\n    return function (input) {\n        if(input!=null){\n            var fileExtension = input.substring(input.lastIndexOf('.') + 1);\n            var fileName = input.substring(0,input.lastIndexOf('.'));\n            if(fileExtension.toLowerCase()=='jpg' ||fileExtension.toLowerCase() =='png' || fileExtension.toLowerCase()=='gif'){\n                return fileName+\"_64x64\"+\".\"+fileExtension;\n            }return input;\n        }else{\n            return '';\n        }\n\n    };\n});\n\napp.filter('changeSize', function () {\n    return function (input,params) {\n        if(input!=null){\n            var fileExtension = input.substring(input.lastIndexOf('.') + 1);\n            var fileName = input.substring(0,input.lastIndexOf('.'));\n            if(fileExtension.toLowerCase()=='jpg' ||fileExtension.toLowerCase() =='png' || fileExtension.toLowerCase()=='gif'){\n                return fileName+\"_\"+params+\".\"+fileExtension;\n            }return input;\n        }else{\n            return '';\n        }\n\n    };\n});\n\napp.filter('statusChange', function () {\n    return function (input,rule) {\n        //var rule=[{dm:\"0\",mc:\"\"},{dm:\"1\",mc:\"\"}];\n        if(rule!=null&&rule.length>0) {\n            for (var i = 0; i < rule.length; i++) {\n                if(rule[i].dm==input)return rule[i].mc;\n            }\n        }else{\n            return input;\n        }\n    };\n});\n\n app.filter('formatDist', function () {\n      return function (dist) {\n          dist = dist || 0\n          if (dist > 0) {\n              return (dist / 1000).toFixed(2) + '';\n          } else {\n              return '';\n          }\n      };\n  });\n\n  app.filter('formatTime', function () {\n     return function (time) {\n         var now = new Date();\n         time = new Date(time) || now;\n\n         var timeSpan = now.getTime() - time.getTime(),\n               days = Math.floor(timeSpan / (24 * 3600 * 1000)),\n               months = Math.floor(days / (30)),\n               years = Math.floor(days / (365)),\n               leave1 = timeSpan % (24 * 3600 * 1000),\n               hours = Math.floor(leave1 / (3600 * 1000)),\n                leave2 = leave1 % (3600 * 1000),\n                minutes = Math.floor(leave2 / (60 * 1000));\n\n         if (years > 0) return years + '';\n         if (months > 0) return months + '';\n         if (days > 0) return days + '';\n         if (hours > 0) return hours + '';\n         if (minutes > 0) return minutes + '';\n         return '';\n     };\n   });\n}());\n","(function () {\r\n    'use strict';\n\n    angular.module('JPushService', [])\n    .factory('JPushService', JPushService);\n\n    JPushService.$inject = ['$http', '$window', '$document'];\n\n    function JPushService($http, $window, $document) {\r\n        var jpushServiceFactory = {};\r\n\r\n        //var jpushapi=$window.plugins.jPushPlugin;\r\n\r\n        //\r\n        var _init = function (config) {\r\n\r\n            if(!$window.plugins) return;\r\n\r\n            $window.plugins.jPushPlugin.init();\r\n            //tagAlias\r\n            //document.addEventListener('jpush.setTagsWithAlias', config.stac, false);\r\n            //\r\n            $window.plugins.jPushPlugin.openNotificationInAndroidCallback = config.openNotificationInAndroidCallback;\r\n            $window.plugins.jPushPlugin.receiveMessageInAndroidCallback = config.receiveMessageInAndroidCallback;\r\n            $window.plugins.jPushPlugin.receiveNotificationInAndroidCallback = config.receiveNotificationInAndroidCallback;\r\n\r\n            document.addEventListener('jpush.receiveNotification', config.receiveNotificationInAndroidCallback, false);\r\n            document.addEventListener('jpush.receiveMessage', config.receiveMessageInAndroidCallback, false);\r\n            document.addEventListener('jpush.openNotification', config.openNotificationInAndroidCallback, false);\r\n            \r\n            $window.plugins.jPushPlugin.setDebugMode(true);\r\n        }\r\n        //\r\n        var _isPushStopped = function (fun) {\r\n            $window.plugins && $window.plugins.jPushPlugin.isPushStopped(fun)\r\n        }\r\n        //\r\n        var _stopPush = function () {\r\n            $window.plugins && $window.plugins.jPushPlugin.stopPush();\r\n        }\r\n\r\n        //\r\n        var _resumePush = function () {\r\n            $window.plugins && $window.plugins.jPushPlugin.resumePush();\r\n        }\r\n\r\n        //\r\n        var _setTagsWithAlias = function (tags, alias) {\r\n            $window.plugins && $window.plugins.jPushPlugin.setTagsWithAlias(tags, alias);\r\n        }\r\n\r\n        //\r\n        var _setTags = function (tags) {\r\n            $window.plugins && $window.plugins.jPushPlugin.setTags(tags);\r\n        }\r\n\r\n        //\r\n        var _setAlias = function (alias) {\r\n            $window.plugins && $window.plugins.jPushPlugin.setAlias(alias);\r\n        }\r\n\r\n\r\n        jpushServiceFactory.init = _init;\r\n        jpushServiceFactory.isPushStopped = _isPushStopped;\r\n        jpushServiceFactory.stopPush = _stopPush;\r\n        jpushServiceFactory.resumePush = _resumePush;\r\n        jpushServiceFactory.setTagsWithAlias = _setTagsWithAlias;\r\n        jpushServiceFactory.setTags = _setTags;\r\n        jpushServiceFactory.setAlias = _setAlias;\r\n\r\n        return jpushServiceFactory;\r\n    }\r\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('LoadingAlert', []).service('LoadingAlert', function($document, $rootScope) {\n        'ngInject';\n        var activeNavView;\n        return {\n            show: show,\n            hide: hide\n        };\n\n        function init() {\n            var body = angular.element($document[0].body);\n            var ionViewArr = body.find('ion-view');\n            for (var i = 0; i < ionViewArr.length; i++) {\n                if (angular.element(ionViewArr[i]).attr('nav-view') == 'active') {\n                    activeNavView = angular.element(ionViewArr[i]);\n                    activeNavView.append(\"<loading><div class=\\\"loading-alert-container\\\"><div class=\\\"loading-body\\\"><div class=\\\"loading-text\\\">...<div><div></div></loading>\");\n                }\n            }\n        }\n\n        function show() {\n            init();\n        }\n\n        function hide() {\n            angular.element(activeNavView.find('loading')[0]).remove();\n        }\n\n    });\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('MessageToaster', []).service('MessageToaster', function(SuccessMessage, ErrorMessage, Constants, toaster) {\n        'ngInject';\n\n        var messageToaster = {\n            accessFail: accessFail,\n            info: info,\n            error: error,\n            success: success\n        };\n\n        function accessFail() {\n            toaster.pop('error', Constants.appTitle, ErrorMessage.ACCESS_FAIL);\n        }\n\n        function info(content) {\n            toaster.pop('info', Constants.appTitle, content);\n        }\n\n        function error(content, title) {\n            return toaster.pop('error', title || Constants.appTitle, content || ErrorMessage.ACCESS_FAIL);\n        }\n\n        function success(content, title) {\n            toaster.success('success', title || Constants.appTitle, content || SuccessMessage.OPERATION_SUCESS);\n        }\n\n\n        return messageToaster;\n    });\n\n}());","(function() {\n    \"use strict\";\n    angular.module('ResultHandler', []).service('ResultHandler', function($q) {\n        'ngInject';\n\n        var handler = {\n            successedFuc: successedFuc,\n            failedFuc: failedFuc\n        };\n\n        function successedFuc(response) {\n            //console.log(\"successedFuc\");\n            //console.log(response);\n            return response.data;\n            //if (response.data.errno == 0){\n            //    return response.data;\n            //} else {\n            //    return $q.reject(response.data.error);\n            //}\n        }\n\n        function failedFuc(error) {\n            //console.log(\"failedFuc\");\n            //console.log(error);\n            return $q.reject(error);\n        }\n\n        return handler;\n    });\n\n}());","(function() {\n    \"use strict\";\n    angular.module('Session', []).service('Session', function ($http, $window, JPushService) {\n        'ngInject';\n\n        var session = {\n            create: create,\n            destroy: destroy,\n            updateRoles: updateRoles,\n            setData:setData,\n            getData:getData,\n            rmData:rmData,\n        };\n\n        function create(token, eshop, userId, roles, wechat) {\n            $window.localStorage.setItem(\"token\", token);\n            $window.localStorage.setItem(\"eshop_auth\", JSON.stringify(eshop));\n            $window.localStorage.setItem(\"userId\", userId);\n            $window.localStorage.setItem(\"userRole\", roles);\n            $window.localStorage.setItem(\"wechat\", wechat);\n\n            if(token!=null){\n                //$http.defaults.headers.common.Authorization = \"Bearer-\"+token;\n                $http.defaults.headers.common.token = token;\n            }\n\n            //ID\n            JPushService.setAlias(userId);\n\n            //    $httpProvider.defaults.headers.common[\"Authorization\"] = \"Bearer-\"+token;\n            console.log(session);\n        }\n\n        function destroy() {\n            $window.localStorage.removeItem(\"eshop_auth\");\n            $window.localStorage.removeItem(\"token\");\n            $window.localStorage.removeItem(\"userId\");\n            $window.localStorage.removeItem(\"userRole\");\n            $window.localStorage.removeItem(\"wechat\");\n\n        }\n\n        function updateRoles(roles) {\n            $window.localStorage.setItem(\"userRole\", roles);\n        };\n\n        function setData(name,data) {\n            $window.localStorage.setItem(name, data);\n        }\n\n        function getData(name) {\n            return $window.localStorage.getItem(name);\n        }\n\n        function rmData(name) {\n            $window.localStorage.removeItem(name);\n        }\n\n        return session;\n    });\n\n}());\n","(function() {\n  'use strict';\n\n  angular.module('StateService', [])\n    .factory('StateService', StateService);\n\n  StateService.$inject = ['$ionicViewSwitcher', '$state', '$ionicHistory', '$timeout'];\n\n  function StateService($ionicViewSwitcher, $state, $ionicHistory, $timeout,AuthService) {\n    return {\n      go: go,\n      back: back,\n      goToHome: goToHome,\n      goToRoot: goToRoot,\n      backToState: backToState,\n      clearCacheByHistoryId: clearCacheByHistoryId,\n      clearAllAndGo: clearAllAndGo,\n      clearPreviousStateCache: clearPreviousStateCache\n    };\n\n    function go(state, params) {\n      $ionicViewSwitcher.nextDirection('forward');\n      $state.go(state, params);\n    }\n\n    function back() {\n      //var currentStateId = [$ionicHistory.currentView().stateId];\n      //$ionicViewSwitcher.nextDirection('back');\n      //$timeout(clearPreviousStateCache(currentStateId), 700);\n      $ionicHistory.goBack();\n\n    }\n\n    function clearPreviousStateCache(stateIds) {\n      return function() {\n        $ionicHistory.clearCache(stateIds);\n      };\n    }\n\n    function goToHome() {\n      $ionicHistory.nextViewOptions({\n        disableBack: true,\n        historyRoot: true,\n        disableAnimate: true\n      });\n      $ionicHistory.clearHistory();\n      $ionicHistory.clearCache()\n        .then(function() {\n          $state.go(AuthService.getNextPath());\n        });\n    }\n\n    function clearAllAndGo(state, params) {\n      $ionicHistory.nextViewOptions({\n        disableBack: true,\n        historyRoot: true,\n        disableAnimate: true\n      });\n      $ionicHistory.clearHistory();\n      $ionicHistory.clearCache()\n        .then(function() {\n          $state.go(state, params);\n        });\n    }\n\n    function goToRoot(state) {\n      $ionicHistory.nextViewOptions({\n        disableBack: true,\n        historyRoot: true,\n        disableAnimate: true\n      });\n      $state.go(state);\n      clearCacheByHistoryId($ionicHistory.currentHistoryId());\n    }\n\n    function clearCacheByHistoryId(historyId) {\n      var states = [];\n      var history = $ionicHistory.viewHistory().histories[historyId];\n      for (var i = history.stack.length - 1; i >= 0; i--) {\n        states.push(history.stack[i].stateId);\n      }\n      $ionicHistory.clearCache(states);\n    }\n\n    function backToState(state) {\n      var historyId = $ionicHistory.currentHistoryId();\n      var history = $ionicHistory.viewHistory().histories[historyId];\n      for (var i = history.stack.length - 1; i >= 0; i--) {\n        if (history.stack[i].stateId == state) {\n          $ionicHistory.goBack(i - history.stack.length + 1);\n          break;\n        }\n      }\n    }\n\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('config', [\n    'environmentConfig',\n    'constant',\n    'httpRelConfig'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('constant', [])\n        .constant('Path',{\n            'ParentRolePath':'tabs.childrenSteam',\n            'OrganizerRolePath':'tabs.organizer',\n            'TeacherRolePath':'tabs.message',\n            'VisitorRolePath':'tabs.map'\n        })\n        .constant('Role',{\n            'visitor':'-1',\n            'Organizer':'1',\n            'Parent':'2',\n            'Teacher':'3',\n            'Children':'4',\n            'ThirdParty':'5',\n            'Consultant':'6'\n        })\n        .constant('Weixin', {\n        })\n        .constant('AUTH_EVENTS', {\n            loginSuccess: 'auth-login-success',\n            loginFailed: 'auth-login-failed',\n            logoutSuccess: 'auth-logout-success',\n            sessionTimeout: 'auth-session-timeout',\n            notAuthenticated: 'auth-not-authenticated',\n            notAuthorized: 'auth-not-authorized'\n        })\n        .constant('ErrorMessage', {\n            ACCESS_FAIL: '',\n            TOKEN_INVALID: ''\n        })\n        .constant('SuccessMessage', {\n            SUBMIT_SUCESS: '',\n            OPERATION_SUCESS:''\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('environmentConfig', [])\n        .constant('Constants', {\n            'appTitle':'',\n            'company':'',\n            'serverUrl': 'http://wx.zxing-tech.cn/api/v1/',\n            'eshopApiUrl': 'http://api.mall.zxing-tech.cn/v2/',\n            'dfsUrl': 'http://wx.zxing-tech.cn/',\n            'buildID': '20170614v1',\n            'ENVIRONMENT':'release'\n        });\n}());\n//'serverUrl': 'http://120.76.226.47/api/v2/',\n//    'dfsUrl': 'http://120.76.226.47/',\n//http://localhost:8090/\n//http://wx.zxing-tech.cn\n","(function() {\n    \"use strict\";\n    angular.module('httpDevConfig', [])\n        .config(function($httpProvider) {\n            $httpProvider.defaults.headers.post[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n            $httpProvider.defaults.headers.put[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('httpRelConfig', [])\n    .config(function($httpProvider) {\n        $httpProvider.defaults.cache = false;\n        if (!$httpProvider.defaults.headers.get) {\n           $httpProvider.defaults.headers.get = {};\n        }\n        // disable IE ajax request caching\n        $httpProvider.defaults.headers.get['If-Modified-Since'] = '0';\n\n        // Disable IE ajax request caching\n        $httpProvider.defaults.headers.get['Cache-Control'] = 'no-cache';\n        $httpProvider.defaults.headers.get['Pragma'] = 'no-cache';\n    });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('directive', [\n      'BaiduMapDirective'\n    ]);\n\n}());\n","(function() {\r\n    'use strict';\r\n\r\n   \r\n\r\n\r\nvar app = angular.module('BaiduMapDirective', []);\r\n\r\napp.directive('uiMap', function ($parse, $q, $window, $timeout, $ionicModal, $ionicSlideBoxDelegate,RichMarkerFactory, MessageToaster, BaiduService) {\r\n    'ngInject';\r\n\r\n    var MARKER_TYPES = {\r\n        CURRENT: 0,\r\n        CUSTOM: 1,\r\n        BAIDU: 2\r\n    };\r\n\r\n\r\n      /**\r\n       * \r\n       * @param {object}  $q angular $q\r\n       * @param {string} apiKey apiKey\r\n       * @param {string} version \r\n       */\r\n      function loadMap(apiKey) {\r\n\r\n          // \r\n          if ($window.loadBaiduPromise) {\r\n              return $window.loadBaiduPromise;\r\n          }\r\n\r\n          var deferred = $q.defer(),\r\n            resolve = function () {\r\n                deferred.resolve($window.BMap ? $window.BMap : false);\r\n            },\r\n            callbackName = 'loadBaiduMaps_' + (new Date().getTime()),\r\n            params = {\r\n                'ak': apiKey\r\n            };\r\n          if ($window.BMap) {\r\n              resolve();\r\n          } else {\r\n              angular.extend(params, {\r\n                  'v': '2.0',\r\n                  'callback': callbackName\r\n              });\r\n\r\n              // \r\n              $window[callbackName] = function () {\r\n                  // \r\n                  resolve();\r\n\r\n                  // \r\n                  $timeout(function () {\r\n                      try {\r\n                          delete $window[callbackName];\r\n                      } catch (e) { }\r\n                  }, 20);\r\n              }\r\n\r\n              // \r\n              var head = document.getElementsByTagName('HEAD').item(0);\r\n              var bdscript = document.createElement('script');\r\n              bdscript.type = 'text/javascript';\r\n              bdscript.src = 'http://api.map.baidu.com/api?v=' + params.v + '&ak=' + params.ak + '&callback=' + params.callback;\r\n              head.appendChild(bdscript);\r\n          }\r\n          $window.loadBaiduPromise = deferred.promise;\r\n\r\n          // \r\n          return $window.loadBaiduPromise;\r\n      }\r\n\r\n      /**\r\n       * \r\n       * @param {*} scope  \r\n       * @param {*} eventsStr \r\n       * @param {*} baiduObject \r\n       * @param {*} element \r\n       * @param {*} prefix \r\n       */\r\n      function bindMapEvents(scope, baiduObject) {\r\n          var events = scope.$eval(attrs.mapEvent);\r\n          angular.forEach(events, function (uiEvent, eventName) {\r\n              var fn = $parse(uiEvent);\r\n\r\n              baiduObject.addEventListener(eventName, function (event) {\r\n                  var params = Array.prototype.slice.call(arguments);\r\n                  params = params.splice(1);\r\n                  fn(scope, {\r\n                      $event: evt,\r\n                      $params: params\r\n                  });\r\n                  if (!scope.$$phase) {\r\n                      scope.$apply();\r\n                  }\r\n              })\r\n          })\r\n      }\r\n\r\n      /**\r\n       * \r\n       * @param {*} container\r\n       * @param {*} options\r\n       */\r\n      function buildMap(container, options) {\r\n          if (!options.apiKey) {\r\n              throw new Error('apiKey!');\r\n          }\r\n\r\n          var map = new window.BMap.Map(container, {\r\n              enableMapClick: false\r\n          });\r\n\r\n          if (options.enableScrollWheelZoom) {\r\n              map.enableScrollWheelZoom();\r\n          }\r\n\r\n          return map;\r\n      }\r\n\r\n      /**\r\n       * \r\n       * @param {*} map\r\n       * @param {*} point\r\n       * @param {*} clickCallback\r\n       * @param {*} poInfo\r\n       */\r\n      function addMapMarker(map, point, options) {\r\n\r\n          //{} clickCallback, poInfo, icon,markText\r\n\r\n          var ovs = map.getOverlays();\r\n          var isExist = false;\r\n          for (var i = 0; i < ovs.length; i++) {\r\n              var pt = ovs[i].getPosition();\r\n              if (pt.equals(point)) {\r\n                  isExist = true;\r\n                  break;\r\n              }\r\n          }\r\n\r\n          if (isExist) return;\r\n\r\n          options = options || {};\r\n          var mk;\r\n\r\n          if (options.type == MARKER_TYPES.CURRENT) {\r\n              var label = new BMap.Label(options.text, { offset: new BMap.Size(-15, 25) });\r\n              mk = new BMap.Marker(point, { icon: options.icon });\r\n              mk.setLabel(label)\r\n          } else if (options.type == MARKER_TYPES.CUSTOM) {\r\n              options.data = options.data || {};\r\n\r\n              var htm = \"<div class='custom-marker'>\"\r\n                        + \"<div class='header'>\" + options.data.Scores + \"</div><div class='content'>\" + options.data.OrgName + \"</div>\"\r\n                        + \"</div>\";\r\n\r\n               mk = RichMarkerFactory.buildRichMarker(htm, point, {\r\n                  \"anchor\": new BMap.Size(-72, -84),\r\n                  \"enableDragging\": true\r\n               });\r\n\r\n               if (options.onClick) {\r\n                   mk.addEventListener('ontouchend', options.onClick);\r\n               }\r\n          } else {\r\n              mk = new BMap.Marker(point);\r\n              if (options.onClick) {\r\n                  mk.addEventListener('click', options.onClick);\r\n              }\r\n          }\r\n\r\n          mk.babyPoi = options.data;\r\n          map.addOverlay(mk);\r\n\r\n          return mk;\r\n      }\r\n     \r\n\r\n      /**\r\n       * \r\n       * @param {*} map\r\n       * @param {*} anchor\r\n       */\r\n      function addMapNavigation(map, anchor) {\r\n          var navigation = new window.BMap.NavigationControl({\r\n              anchor: anchor\r\n          });\r\n          map.addControl(navigation);\r\n      }\r\n\r\n      /**\r\n       * \r\n       * @param {*} map\r\n       * @param {*} options\r\n       */\r\n      function getCurrentPosition(map, options) {\r\n          var deferred = $q.defer();\r\n          try {\r\n              if (baidumap_location) {\r\n                  // GPS\r\n                  baidumap_location.getCurrentPosition(function (result) {\r\n                    // alert(JSON.stringify(result));\r\n                     // alert(result.locType);\r\n                      var point;\r\n                      if (result.locType == 161) {\r\n                          point = new BMap.Point(result.lontitude, result.latitude);\r\n                          $window.localStorage.setItem(\"current_pos\", JSON.stringify(result));\r\n                      } else {\r\n                          //var curPos = $window.localStorage.getItem(\"current_pos\");\r\n                          //curPos = JSON.parse(curPos);\r\n                          //point = new BMap.Point(curPos.lontitude, curPos.latitude);\r\n\r\n                          var point = new BMap.Point(options.center.longitude, options.center.latitude); // \r\n                          deferred.resolve(point);\r\n                      }\r\n\r\n                      deferred.resolve(point);\r\n                  }, function (error) {\r\n                      var point = new BMap.Point(options.center.longitude, options.center.latitude); // \r\n                      deferred.resolve(point);\r\n                      //alert(error.message);\r\n                      //deferred.reject(error);\r\n                  });\r\n              } else {\r\n                  var point = new BMap.Point(options.center.longitude, options.center.latitude); // \r\n                  deferred.resolve(point);\r\n              }\r\n          } catch (e) {\r\n              alert(e.message);\r\n              var point = new BMap.Point(options.center.longitude, options.center.latitude); // \r\n              deferred.resolve(point);\r\n          }\r\n          return deferred.promise;\r\n      }\r\n\r\n      /**\r\n       * \r\n       * @param {*} map\r\n       * @param {*} scope\r\n       */\r\n      function addMapAutoComplete(map, scope) {\r\n          function onConfirm(e) {\r\n              var selectedVal = e.item.value;\r\n              var keywrod = selectedVal.province + selectedVal.city + selectedVal.district + selectedVal.street + selectedVal.business;\r\n              baiDuLocalSearchAndMark(map, keywrod).then(function (results) {\r\n                  scope.baiDuSearchResults = results;\r\n              }, function (err) {\r\n                  //ionicToast.show('!', 'middle', false, 3000);\r\n                  MessageToaster.error(\"!\");\r\n              });\r\n          }\r\n          var ac = new BMap.Autocomplete({\r\n              'input': 'mech-map-searchbox',\r\n              'location': map\r\n          });\r\n          ac.addEventListener('onconfirm', onConfirm);\r\n\r\n          var ac1 = new BMap.Autocomplete({\r\n              'input': 'mech-list-searchbox',\r\n              'location': map\r\n          });\r\n          ac1.addEventListener('onconfirm', onConfirm);\r\n      }\r\n\r\n      /**\r\n       * \r\n       * @param {*} map\r\n       * @param {*} keyword\r\n       */\r\n      function baiDuLocalSearch(map, keyword) {\r\n          var deferred = $q.defer();\r\n\r\n          function onSearchComplete(results) {\r\n              try {\r\n                  var pois = [];\r\n                  if (!angular.isArray(results)) {\r\n                      results = [results];\r\n                  }\r\n                  for (var j = 0; j < results.length; j++) {\r\n                      var result = results[j];\r\n                      if (!result.vr) continue;\r\n\r\n                      for (let i = 0; i < result.vr.length; i++) {\r\n                          var poi = result.getPoi(i),\r\n                            tempPoi = {\r\n                                AccountID: 0,\r\n                                OrgName: poi.title,\r\n                                Address: poi.address,\r\n                                Tel: poi.phoneNumber,\r\n                                Latitude: poi.point.lat,\r\n                                Longitude: poi.point.lng\r\n                            };\r\n\r\n                          if (!!map.scope.currentPosition) {\r\n                              tempPoi[\"Dist\"] = map.getDistance(poi.point, map.scope.currentPosition);\r\n                          }\r\n\r\n                          //5\r\n                          if (tempPoi[\"Dist\"] && tempPoi[\"Dist\"] < 5000) {\r\n                              pois.push(tempPoi);\r\n                          }\r\n                      }\r\n                  }\r\n\r\n                  deferred.resolve(pois);\r\n              } catch (err) {\r\n                  deferred.reject(err);\r\n              }\r\n          }\r\n          var local = new BMap.LocalSearch(map, {\r\n              onSearchComplete: onSearchComplete,\r\n              pageCapacity: 30\r\n          });\r\n          local.search(keyword);\r\n          return deferred.promise;\r\n      }\r\n\r\n      /**\r\n       * \r\n       * @param {*} map\r\n       * @param {*} keyword\r\n       */\r\n      function baiDuLocalSearchAndMark(map, keyword) {\r\n          var deferred = $q.defer();\r\n\r\n          baiDuLocalSearch(map, keyword).then(function (results) {\r\n              map.clearOverlays();\r\n              var point;\r\n              for (var i = 0; i < results.length; i++) {\r\n                  point = new BMap.Point(results[i].Longitude, results[i].Latitude);\r\n                  addMapMarker(map, point,{onClick:openInfoWindow,type:MARKER_TYPES.BAIDU,data:results[i]});\r\n              }\r\n              point && map.panTo(point);\r\n\r\n              deferred.resolve(results);\r\n          }, function (err) {\r\n              deferred.reject(err);\r\n          });\r\n\r\n          return deferred.promise;\r\n      }\r\n\r\n      /**\r\n       * \r\n       * @param {*} point\r\n       */\r\n      function babyPlanLocalSearch(point) {\r\n          return BaiduService.getNearbyDeposits(point.lng, point.lat);\r\n      }\r\n\r\n      /**\r\n       * \r\n       * @param {*} e\r\n       */\r\n      function openInfoWindow(e) {\r\n          var p = e.target,\r\n            map = e.target._map || e.target.map;\r\n\r\n          if (!p.babyPoi) {\r\n              return;\r\n          }\r\n\r\n          if (p.babyPoi.AccountID > 0) {\r\n              map.scope.openDepositInfoForm(p.babyPoi);\r\n          } else {\r\n              var opts = {\r\n                  width: 250, // \r\n                  height: 80, // \r\n                  title: p.babyPoi.OrgName,\r\n                  enableMessage: true // \r\n              },\r\n                content = p.babyPoi.Address;\r\n              var point = new BMap.Point(p.babyPoi.Longitude, p.babyPoi.Latitude);\r\n              var infoWindow = new BMap.InfoWindow(content, opts);\r\n              map.openInfoWindow(infoWindow, point);\r\n          }\r\n      }\r\n\r\n\r\n      return {\r\n          restrict: 'EA',\r\n          scope: {\r\n              mapOptions: '='\r\n          },\r\n          templateUrl: 'ui-map.html',\r\n          replace: true,\r\n          link: function (scope, elm, attrs) {\r\n              var opts = angular.extend({}, scope.mapOptions);\r\n\r\n              var MAP_MODES = scope.MAP_MODES = {\r\n                  MAP_SHOW: 0,\r\n                  MAP_SEARCH: 1,\r\n                  LIST_SHOW: 2,\r\n                  LIST_SEARCH: 3,\r\n              };\r\n              if(opts.mode){\r\n                scope.currMode = opts.mode;\r\n              }else{\r\n                scope.currMode = MAP_MODES.MAP_SHOW;\r\n              }\r\n\r\n              scope.only_show_list = false;\r\n              if (!!opts.onlyShowList) {\r\n                  scope.only_show_list = opts.onlyShowList;\r\n              }\r\n              scope.baiDuSearchResults = [];\r\n              scope.babyPlanSearchResults = [];\r\n              scope.keyword1 = '';\r\n              scope.keyword2 = '';\r\n              scope.depositInfo = {};\r\n              // scope.depositInfo = {\r\n              //   OrgName: '',\r\n              //   Address: '1088',\r\n              //   FrontDeskLink1: 'http://120.76.226.47/group1/M00/00/03/Ci5ek1jxwpWAD29ZAC84O4JhWyE096.jpg',\r\n              //   LicenseType: null,\r\n              //   ContactPhone: '1311111111',\r\n              //   Score: 50,\r\n              //   Remark: '',\r\n              //   Images: ['http://120.76.226.47/group1/M00/00/03/Ci5ek1jxwpWAD29ZAC84O4JhWyE096.jpg', null],\r\n              //   Comments: [{comment: '',create_date: '2017-4-23 12:00:00',creator: 'X*'}, {comment: '',create_date: '2017-4-21 12:00:00',creator: 'X*'}]\r\n              // }\r\n\r\n              /**\r\n               * \r\n               */\r\n              scope.dial = function (tel) {\r\n                  $window.location.href = 'tel:' + tel;\r\n              };\r\n\r\n              /**\r\n               * \r\n               */\r\n              scope.location = function (poi) {\r\n                  // \r\n                  scope.currMode = MAP_MODES.MAP_SHOW;\r\n\r\n                  // \r\n                 // scope.map.clearOverlays();\r\n                  var point = new BMap.Point(poi.Longitude, poi.Latitude);\r\n                  if (poi.AccountID === 0) {\r\n                      addMapMarker(scope.map, point, { onClick: openInfoWindow, type: MARKER_TYPES.BAIDU, data: poi });\r\n                  } else {\r\n                      addMapMarker(scope.map, point, { onClick: openInfoWindow, type: MARKER_TYPES.CUSTOM, data: poi });\r\n                  }\r\n                 // addMapMarker(scope.map, point, openInfoWindow, poi);\r\n                  $timeout(function () {\r\n                      scope.map.panTo(point);\r\n                  }, 20);\r\n              };\r\n\r\n              /**\r\n               * \r\n               */\r\n              scope.locationCurrent = function () {\r\n                  $timeout(function () {\r\n\r\n                      // MarkericonSymbol\r\n                      var icon = new BMap.Symbol(BMap_Symbol_SHAPE_POINT, {\r\n                          scale: 1,//\r\n                          fillColor: \"orange\",//\r\n                          fillOpacity: 0.8//\r\n                      });\r\n                     // scope.map.clearOverlays();\r\n                      addMapMarker(scope.map, scope.currentPosition, { type: MARKER_TYPES.CURRENT, icon: icon, text: '' });\r\n                      scope.currentPosition && scope.map.panTo(scope.currentPosition);\r\n                  }, 20);\r\n              };\r\n\r\n              /**\r\n               * \r\n               */\r\n              scope.locationAll = function () {\r\n                  // \r\n                  scope.currMode = MAP_MODES.MAP_SHOW;\r\n\r\n                  // \r\n                  scope.map.clearOverlays();\r\n\r\n                  var poi, point;\r\n                  for (var i = 0; i < scope.baiDuSearchResults.length; i++) {\r\n                      poi = scope.baiDuSearchResults[i];\r\n                      point = new BMap.Point(poi.Longitude, poi.Latitude);\r\n                      // addMapMarker(scope.map, point, openInfoWindow, poi);\r\n\r\n                      addMapMarker(scope.map, point, { onClick: openInfoWindow, type: MARKER_TYPES.BAIDU, data: poi });\r\n                  }\r\n\r\n                  for (var i = 0; i < scope.babyPlanSearchResults.length; i++) {\r\n                      poi = scope.babyPlanSearchResults[i];\r\n                      point = new BMap.Point(poi.Longitude, poi.Latitude);\r\n                      //  addMapCustomMarker(scope.map, point, openInfoWindow, poi,poi.OrgName);\r\n                      addMapMarker(scope.map, point, { onClick: openInfoWindow, type: MARKER_TYPES.CUSTOM, data: poi });\r\n                  }\r\n\r\n                  $timeout(function () {\r\n                      try {\r\n                          point && scope.map.panTo(point);\r\n                      } catch (e) { }\r\n                  }, 20);\r\n              };\r\n\r\n              /**\r\n               * \r\n               */\r\n              scope.closeDepositInfoForm = function () {\r\n                  scope.modal.hide();\r\n              };\r\n\r\n              /**\r\n               * \r\n               */\r\n              scope.openDepositInfoForm = function (deposit) {\r\n                  if (!deposit || deposit.AccountID == 0) return;\r\n\r\n                  // ID\r\n                  BaiduService.getDepositInfoWithComments(deposit.AccountID).then(function (depositInfo) {\r\n                      scope.depositInfo = depositInfo;\r\n\r\n                      // \r\n                      if (!scope.modal) {\r\n                          $ionicModal.fromTemplateUrl('ui-map-info.html', {\r\n                              scope: scope,\r\n                              animation: 'slide-in-up'\r\n                          }).then(function (modal) {\r\n                              scope.modal = modal;\r\n                              scope.modal.show();\r\n                          });\r\n                      } else {\r\n                          scope.modal.show();\r\n                      }\r\n                  }, function (err) {\r\n                      //ionicToast.show('!', 'middle', false, 3000);\r\n                      MessageToaster.error(\"!\");\r\n                  })\r\n              };\r\n\r\n              /**\r\n               * \r\n               */\r\n              scope.backToMapView = function () {\r\n                  scope.currMode = MAP_MODES.MAP_SHOW;\r\n              };\r\n\r\n              /**\r\n               * \r\n               */\r\n              scope.switchMode = function (mode) {\r\n                  //\r\n                  if (scope.currMode === mode) return;\r\n\r\n                  // \r\n                  if (!mode) {\r\n                      switch (scope.currMode) {\r\n                          case MAP_MODES.MAP_SEARCH:\r\n                              mode = MAP_MODES.MAP_SHOW;\r\n                              break;\r\n                          case MAP_MODES.MAP_SHOW:\r\n                              mode = MAP_MODES.LIST_SHOW;\r\n                              break;\r\n\r\n                          case MAP_MODES.LIST_SEARCH:\r\n                              mode = MAP_MODES.LIST_SHOW;\r\n                              break;\r\n                          case MAP_MODES.LIST_SHOW:\r\n                              mode = MAP_MODES.MAP_SHOW;\r\n                              break;\r\n                      }\r\n                  }\r\n\r\n                  // \r\n                  // if (scope.currMode <= MAP_MODES.MAP_SEARCH && mode > MAP_MODES.MAP_SEARCH) {\r\n                  //   scope.keyword2 = scope.keyword1\r\n                  // } else if (scope.currMode > MAP_MODES.MAP_SEARCH && mode <= MAP_MODES.MAP_SEARCH) {\r\n                  //   scope.keyword1 = scope.keyword2\r\n                  // }\r\n                  //\r\n\r\n                  // \r\n                  switch (scope.currMode) {\r\n                      case MAP_MODES.MAP_SEARCH:\r\n                          // if (!scope.keyword1) {\r\n                          //  // ionicToast.show('!', 'middle', false, 3000)\r\n                          //   return\r\n                          // }\r\n                          !!scope.keyword1 && baiDuLocalSearchAndMark(scope.map, scope.keyword1).then(function (results) {\r\n                              scope.baiDuSearchResults = results;\r\n                          }, function (err) {\r\n                              //ionicToast.show('!', 'middle', false, 3000);\r\n                              MessageToaster.error(\"!\");\r\n                          });\r\n                          break;\r\n                      case MAP_MODES.LIST_SEARCH:\r\n                          // if (!scope.keyword2) {\r\n                          //   ionicToast.show('!', 'middle', false, 3000)\r\n                          //   return\r\n                          // }\r\n                          !!scope.keyword2 && baiDuLocalSearchAndMark(scope.map, scope.keyword2).then(function (results) {\r\n                              scope.baiDuSearchResults = results;\r\n                          }, function (err) {\r\n                              //ionicToast.show('!', 'middle', false, 3000);\r\n                              MessageToaster.error(\"!\");\r\n                          });\r\n                          break;\r\n                      case MAP_MODES.LIST_SHOW:\r\n                          mode === MAP_MODES.MAP_SHOW && scope.locationAll();\r\n                          break;\r\n                  }\r\n\r\n                  scope.currMode = mode;\r\n              };\r\n\r\n              /**\r\n               * \r\n               */\r\n              scope.$on('$destroy', function () {\r\n                  $window.BMap = null;\r\n                  // document.getElementById('map').remove();\r\n                  elm.remove();\r\n                  scope.modal && scope.modal.remove();\r\n              });\r\n\r\n              var onLoadMapSuccessed = function () {\r\n\r\n                  try{\r\n\r\n                      // \r\n                   // var map = scope.map = buildMap(document.getElementById('map'), opts);\r\n                      var map = scope.map = buildMap(elm.children().eq(0).children()[1], opts);\r\n                      map.scope = scope;\r\n\r\n                      // \r\n                      addMapNavigation(map, BMAP_ANCHOR_BOTTOM_RIGHT);\r\n\r\n                      // \r\n                      addMapAutoComplete(map, scope);\r\n\r\n                      // \r\n                      getCurrentPosition(map, opts).then(function (p) {\r\n                          // \r\n                          scope.currentPosition = p;\r\n\r\n                          // MarkericonSymbol\r\n                          var symbol = new BMap.Symbol(BMap_Symbol_SHAPE_POINT, {\r\n                              scale: 1,//\r\n                              fillColor: \"orange\",//\r\n                              fillOpacity: 0.8//\r\n                          });\r\n\r\n                          addMapMarker(map, p, { onClick: openInfoWindow, type: MARKER_TYPES.CURRENT, icon: symbol, text: ''});\r\n\r\n                         //  addMapMarker(map, p, openInfoWindow, null, symbol,'');\r\n                          // \r\n                          map.centerAndZoom(p, 16);\r\n\r\n                          // \r\n                          var bpSearchDeferred = babyPlanLocalSearch(p);\r\n                          var bdSearchDeferred = baiDuLocalSearch(map, opts.keywords);\r\n                          $q.all([bpSearchDeferred, bdSearchDeferred]).then(function (results) {\r\n\r\n                              // \r\n                              var baiDuSearchResults= scope.baiDuSearchResults = results[1].sort(function (a, b) { return parseFloat(a.Dist) - parseFloat(b.Dist); });\r\n                              var babyPlanSearchResults=  scope.babyPlanSearchResults = results[0];\r\n\r\n                              // \r\n                              var point;\r\n                              for (var i = 0; i < baiDuSearchResults.length; i++) {\r\n                                  point = new BMap.Point(baiDuSearchResults[i].Longitude, baiDuSearchResults[i].Latitude);\r\n                                  addMapMarker(map, point, { onClick: openInfoWindow, type: MARKER_TYPES.BAIDU, data: baiDuSearchResults[i] });\r\n                              }\r\n\r\n                              for (var i = 0; i < babyPlanSearchResults.length; i++) {\r\n                                  point = new BMap.Point(babyPlanSearchResults[i].Longitude, babyPlanSearchResults[i].Latitude);\r\n                                  addMapMarker(map, point, { onClick: openInfoWindow, type: MARKER_TYPES.CUSTOM, data: babyPlanSearchResults[i] });\r\n                              }\r\n\r\n\r\n                              // \r\n                              // point && map.panTo(point)\r\n                          }, function (err) {\r\n                              //ionicToast.show('!', 'middle', false, 3000);\r\n                              MessageToaster.error(\"!\");\r\n                          })\r\n                      }, function (err) {\r\n                          //ionicToast.show('!', 'middle', false, 3000);\r\n                          MessageToaster.error(\"!\");\r\n                      })\r\n                  } catch (err) {\r\n                      alert(\"error\" + err.message);\r\n                  }\r\n\r\n                  // \r\n                  elm.triggerHandler('map-loaded', {\r\n                      bmap: map\r\n                  });\r\n              };\r\n\r\n              // \r\n              var onLoadMapFailed = function () {\r\n                  opts.onMapLoadFailded();\r\n              };\r\n\r\n              // \r\n              loadMap(opts.apiKey).then(onLoadMapSuccessed, onLoadMapFailed);\r\n          }\r\n      }\r\n  });\r\n  app.factory('RichMarkerFactory', function () {\r\n      function _getRichMarkerClass(BMap) {\r\n\r\n          var BMapLib = window.BMapLib = BMapLib || {};\r\n          if (BMapLib.RichMarker) return BMapLib.RichMarker;\r\n\r\n          /**\r\n           * baidu\r\n           */\r\n          var baidu = baidu || {\r\n              guid: \"$BAIDU$\"\r\n          };\r\n\r\n          // window[baidu.guid]\r\n          window[baidu.guid] = {};\r\n\r\n          /**\r\n           * \r\n           * @name baidu.extend\r\n           * @function\r\n           * @grammar baidu.extend(target, source)\r\n           * @param {Object} target \r\n           * @param {Object} source \r\n           * @returns {Object} \r\n           */\r\n          baidu.extend = function (target, source) {\r\n              for (var p in source) {\r\n                  if (source.hasOwnProperty(p)) {\r\n                      target[p] = source[p];\r\n                  }\r\n              }\r\n              return target;\r\n          };\r\n\r\n          /**\r\n           * @ignore\r\n           * @namespace\r\n           * @baidu.lang \r\n           * @property guid \r\n           */\r\n          baidu.lang = baidu.lang || {};\r\n\r\n          /**\r\n           * \r\n           * @function\r\n           * @grammar baidu.lang.guid()\r\n           * @returns {String} \r\n           */\r\n          baidu.lang.guid = function () {\r\n              return \"TANGRAM__\" + (window[baidu.guid]._counter++).toString(36);\r\n          };\r\n\r\n          window[baidu.guid]._counter = window[baidu.guid]._counter || 1;\r\n\r\n          /**\r\n           * \r\n           * keyguid\r\n           */\r\n          window[baidu.guid]._instances = window[baidu.guid]._instances || {};\r\n\r\n          /**\r\n           * Tangrambaidu.lang.Class\r\n           * @function\r\n           * @name baidu.lang.Class\r\n           * @grammar baidu.lang.Class(guid)\r\n           * @param {string} guid\t\r\n           * @meta standard\r\n           * @remark baidu.lang.Classguid\r\n           * guidbaidu.lang.Class<br>\r\n           * baidu.lang.Classguidguidguid\r\n           */\r\n          baidu.lang.Class = function (guid) {\r\n              this.guid = guid || baidu.lang.guid();\r\n              window[baidu.guid]._instances[this.guid] = this;\r\n          };\r\n\r\n          window[baidu.guid]._instances = window[baidu.guid]._instances || {};\r\n\r\n          /**\r\n           * stringString\r\n           * @name baidu.lang.isString\r\n           * @function\r\n           * @grammar baidu.lang.isString(source)\r\n           * @param {Any} source \r\n           * @shortcut isString\r\n           * @meta standard\r\n           *             \r\n           * @returns {boolean} \r\n           */\r\n          baidu.lang.isString = function (source) {\r\n              return '[object String]' == Object.prototype.toString.call(source);\r\n          };\r\n          baidu.isString = baidu.lang.isString;\r\n\r\n          /**\r\n           * functionFunction\r\n           * @name baidu.lang.isFunction\r\n           * @function\r\n           * @grammar baidu.lang.isFunction(source)\r\n           * @param {Any} source \r\n           * @returns {boolean} \r\n           */\r\n          baidu.lang.isFunction = function (source) {\r\n              return '[object Function]' == Object.prototype.toString.call(source);\r\n          };\r\n\r\n          /**\r\n           * \r\n           * @function\r\n           * @name baidu.lang.Event\r\n           * @grammar baidu.lang.Event(type[, target])\r\n           * @param {string} type\t \"on\"()\r\n           * @param {Object} [target]\r\n           * @meta standard\r\n           * @remark Class3addEventListenerremoveEventListenerdispatchEvent\r\n           * @see baidu.lang.Class\r\n           */\r\n          baidu.lang.Event = function (type, target) {\r\n              this.type = type;\r\n              this.returnValue = true;\r\n              this.target = target || null;\r\n              this.currentTarget = null;\r\n          };\r\n\r\n          /**\r\n           * baidu.lang.EventClass\r\n           * @grammar obj.addEventListener(type, handler[, key])\r\n           * @param \t{string}   type         \r\n           * @param \t{Function} handler      \r\n           * @param \t{string}   [key]\t\tkey\r\n           * @remark \t\"on\"\"on\"\"click\"\"onclick\" \r\n           */\r\n          baidu.lang.Class.prototype.addEventListener = function (type, handler, key) {\r\n              if (!baidu.lang.isFunction(handler)) {\r\n                  return;\r\n              } !this.__listeners && (this.__listeners = {});\r\n              var t = this.__listeners,\r\n                  id;\r\n              if (typeof key == \"string\" && key) {\r\n                  if (/[^\\w\\-]/.test(key)) {\r\n                      throw (\"nonstandard key:\" + key);\r\n                  } else {\r\n                      handler.hashCode = key;\r\n                      id = key;\r\n                  }\r\n              }\r\n              type.indexOf(\"on\") != 0 && (type = \"on\" + type);\r\n              typeof t[type] != \"object\" && (t[type] = {});\r\n              id = id || baidu.lang.guid();\r\n              handler.hashCode = id;\r\n              t[type][id] = handler;\r\n          };\r\n\r\n          /**\r\n           * baidu.lang.EventClass\r\n           * @grammar obj.removeEventListener(type, handler)\r\n           * @param {string}   type     \r\n           * @param {Function|string} handler  key\r\n           * @remark \thandler\r\n           */\r\n          baidu.lang.Class.prototype.removeEventListener = function (type, handler) {\r\n              if (baidu.lang.isFunction(handler)) {\r\n                  handler = handler.hashCode;\r\n              } else if (!baidu.lang.isString(handler)) {\r\n                  return;\r\n              } !this.__listeners && (this.__listeners = {});\r\n              type.indexOf(\"on\") != 0 && (type = \"on\" + type);\r\n              var t = this.__listeners;\r\n              if (!t[type]) {\r\n                  return;\r\n              }\r\n              t[type][handler] && delete t[type][handler];\r\n          };\r\n\r\n          /**\r\n           * baidu.lang.EventClass\r\n           * @grammar obj.dispatchEvent(event, options)\r\n           * @param {baidu.lang.Event|String} event \tEvent(1.1.1)\r\n           * @param {Object} options ,Event(1.2)\r\n           * @remark addEventListenr\r\n           * <br>\r\n           * myobj.onMyEvent = function(){}<br>\r\n           * myobj.addEventListener(\"onMyEvent\", function(){});\r\n           */\r\n          baidu.lang.Class.prototype.dispatchEvent = function (event, options) {\r\n              if (baidu.lang.isString(event)) {\r\n                  event = new baidu.lang.Event(event);\r\n              } !this.__listeners && (this.__listeners = {});\r\n              options = options || {};\r\n              for (var i in options) {\r\n                  event[i] = options[i];\r\n              }\r\n              var i, t = this.__listeners,\r\n                  p = event.type;\r\n              event.target = event.target || this;\r\n              event.currentTarget = this;\r\n              p.indexOf(\"on\") != 0 && (p = \"on\" + p);\r\n              baidu.lang.isFunction(this[p]) && this[p].apply(this, arguments);\r\n              if (typeof t[p] == \"object\") {\r\n                  for (i in t[p]) {\r\n                      t[p][i].apply(this, arguments);\r\n                  }\r\n              }\r\n              return event.returnValue;\r\n          };\r\n\r\n          /**\r\n           * @ignore\r\n           * @namespace baidu.dom \r\n           * dom\r\n           */\r\n          baidu.dom = baidu.dom || {};\r\n\r\n          /**\r\n           * DOM\r\n           * ****\r\n           * \r\n           * @param {string|HTMLElement} id idDOM\r\n           * @meta standard\r\n           * @return {HTMLElement} DOMnull\r\n           */\r\n          baidu.dom._g = function (id) {\r\n              if (baidu.lang.isString(id)) {\r\n                  return document.getElementById(id);\r\n              }\r\n              return id;\r\n          };\r\n          baidu._g = baidu.dom._g;\r\n\r\n          /**\r\n           * @ignore\r\n           * @namespace baidu.event \r\n           * @property target \t\r\n           * @property pageX \t\tx\r\n           * @property pageY \t\ty\r\n           * @property keyCode \t\r\n           */\r\n          baidu.event = baidu.event || {};\r\n\r\n          /**\r\n           * \r\n           * @private\r\n           * @meta standard\r\n           */\r\n          baidu.event._listeners = baidu.event._listeners || [];\r\n\r\n          /**\r\n           * \r\n           * @name baidu.event.on\r\n           * @function\r\n           * @grammar baidu.event.on(element, type, listener)\r\n           * @param {HTMLElement|string|window} element id\r\n           * @param {string} type \r\n           * @param {Function} listener \r\n           * @remark\r\n           * \r\n          1. <br>\r\n          2. iframe\r\n              \r\n           * @shortcut on\r\n           * @meta standard\r\n           * @see baidu.event.un\r\n           * @returns {HTMLElement|window} \r\n           */\r\n          baidu.event.on = function (element, type, listener) {\r\n              type = type.replace(/^on/i, '');\r\n              element = baidu.dom._g(element);\r\n\r\n              var realListener = function (ev) {\r\n                  listener.call(element, ev);\r\n              },\r\n                  lis = baidu.event._listeners,\r\n                  filter = baidu.event._eventFilter,\r\n                  afterFilter, realType = type;\r\n              type = type.toLowerCase();\r\n              if (filter && filter[type]) {\r\n                  afterFilter = filter[type](element, type, realListener);\r\n                  realType = afterFilter.type;\r\n                  realListener = afterFilter.listener;\r\n              }\r\n              if (element.addEventListener) {\r\n                  element.addEventListener(realType, realListener, false);\r\n              } else if (element.attachEvent) {\r\n                  element.attachEvent('on' + realType, realListener);\r\n              }\r\n              lis[lis.length] = [element, type, listener, realListener, realType];\r\n              return element;\r\n          };\r\n          baidu.on = baidu.event.on;\r\n\r\n          /**\r\n           * \r\n           * @name baidu.event.un\r\n           * @function\r\n           * @grammar baidu.event.un(element, type, listener)\r\n           * @param {HTMLElement|string|window} element id\r\n           * @param {string} type \r\n           * @param {Function} listener \r\n           * @shortcut un\r\n           * @meta standard\r\n           * @see baidu.event.on\r\n           *             \r\n           * @returns {HTMLElement|window} \r\n           */\r\n          baidu.event.un = function (element, type, listener) {\r\n              element = baidu.dom._g(element);\r\n              type = type.replace(/^on/i, '').toLowerCase();\r\n\r\n              var lis = baidu.event._listeners,\r\n                  len = lis.length,\r\n                  isRemoveAll = !listener,\r\n                  item, realType, realListener;\r\n              while (len--) {\r\n                  item = lis[len];\r\n                  if (item[1] === type && item[0] === element && (isRemoveAll || item[2] === listener)) {\r\n                      realType = item[4];\r\n                      realListener = item[3];\r\n                      if (element.removeEventListener) {\r\n                          element.removeEventListener(realType, realListener, false);\r\n                      } else if (element.detachEvent) {\r\n                          element.detachEvent('on' + realType, realListener);\r\n                      }\r\n                      lis.splice(len, 1);\r\n                  }\r\n              }\r\n\r\n              return element;\r\n          };\r\n          baidu.un = baidu.event.un;\r\n\r\n          /**\r\n           * \r\n           * @name baidu.event.preventDefault\r\n           * @function\r\n           * @grammar baidu.event.preventDefault(event)\r\n           * @param {Event} event \r\n           * @meta standard\r\n           */\r\n          baidu.preventDefault = baidu.event.preventDefault = function (event) {\r\n              if (event.preventDefault) {\r\n                  event.preventDefault();\r\n              } else {\r\n                  event.returnValue = false;\r\n              }\r\n          };\r\n\r\n\r\n          /** \r\n           * @exports RichMarker as BMapLib.RichMarker \r\n           */\r\n          var RichMarker =\r\n          /**\r\n           * RichMarker\r\n           * @class MarkerMarker\r\n           * \r\n           * @constructor\r\n           * @param {String | HTMLElement} content Markerdom\r\n           * @param {BMap.Point} position marker\r\n           * @param {Json} RichMarkerOptions <br />\r\n           * {\"<b>anchor</b>\" : {BMap.Size} Marker,\r\n           * <br />\"<b>enableDragging</b>\" : {Boolean} false}\r\n           *\r\n           * @example <b></b>\r\n           * var map = new BMap.Map(\"container\");\r\n           * map.centerAndZoom(new BMap.Point(116.309965, 40.058333), 17);\r\n           * var htm = \"&lt;div style='background:#E7F0F5;color:#0082CB;border:1px solid #333'&gt;\"\r\n           *              +     \"\"\r\n           *              +     \"&lt;img src='http://map.baidu.com/img/logo-map.gif' border='0' /&gt;\"\r\n           *              + \"&lt;/div&gt;\";\r\n           * var point = new BMap.Point(116.30816, 40.056863);\r\n           * var myRichMarkerObject = new BMapLib.RichMarker(htm, point, {\"anchor\": new BMap.Size(-72, -84), \"enableDragging\": true});\r\n           * map.addOverlay(myRichMarkerObject);\r\n           */\r\n          BMapLib.RichMarker = function (content, position, opts) {\r\n              if (!content || !position || !(position instanceof BMap.Point)) {\r\n                  return;\r\n              }\r\n\r\n              /**\r\n               * map\r\n               * @private\r\n               * @type {Map}\r\n               */\r\n              this._map = null;\r\n\r\n              /**\r\n               * Marker\r\n               * @private\r\n               * @type {String | HTMLElement}\r\n               */\r\n              this._content = content;\r\n\r\n              /**\r\n               * marker\r\n               * @private\r\n               * @type {BMap.Point}\r\n               */\r\n              this._position = position;\r\n\r\n              /**\r\n               * marker\r\n               * @private\r\n               * @type {HTMLElement}\r\n               */\r\n              this._container = null;\r\n\r\n              /**\r\n               * marker\r\n               * @private\r\n               * @type {BMap.Size}\r\n               */\r\n              this._size = null;\r\n\r\n              opts = opts || {};\r\n              /**\r\n               * _opts\r\n               * opts\r\n               * @private\r\n               * @type {Json}\r\n               */\r\n              this._opts = baidu.extend(\r\n              baidu.extend(this._opts || {}, {\r\n\r\n                  /**\r\n                   * Marker\r\n                   * @private\r\n                   * @type {Boolean}\r\n                   */\r\n                  enableDragging: false,\r\n\r\n                  /**\r\n                   * Marker\r\n                   * @private\r\n                   * @type {BMap.Size}\r\n                   */\r\n                  anchor: new BMap.Size(0, 0)\r\n              }), opts);\r\n          }\r\n\r\n          // \r\n          RichMarker.prototype = new BMap.Overlay();\r\n\r\n          /**\r\n           * initialize\r\n           * Marker\r\n           * \r\n           * @private\r\n           * @param {BMap} map map\r\n           * @return {Dom} dom\r\n           */\r\n          RichMarker.prototype.initialize = function (map) {\r\n              var me = this,\r\n                  div = me._container = document.createElement(\"div\");\r\n              me._map = map;\r\n              baidu.extend(div.style, {\r\n                  position: \"absolute\",\r\n                  zIndex: BMap.Overlay.getZIndex(me._position.lat),\r\n                  background: \"#FFF\",\r\n                  cursor: \"pointer\"\r\n              });\r\n              map.getPanes().labelPane.appendChild(div);\r\n\r\n              // \r\n              me._appendContent();\r\n              // \r\n              me._setEventDispath();\r\n              // \r\n              me._getContainerSize();\r\n\r\n              return div;\r\n          }\r\n\r\n          /**\r\n           * Markerdraw\r\n           * \r\n           * @private\r\n           */\r\n          RichMarker.prototype.draw = function () {\r\n              var map = this._map,\r\n                  anchor = this._opts.anchor,\r\n                  pixel = map.pointToOverlayPixel(this._position);\r\n              this._container.style.left = pixel.x + anchor.width + \"px\";\r\n              this._container.style.top = pixel.y + anchor.height + \"px\";\r\n          }\r\n\r\n          /**\r\n           * Marker\r\n           * @return \r\n           * \r\n           * @example <b></b>\r\n           * myRichMarkerObject.enableDragging();\r\n           */\r\n          RichMarker.prototype.enableDragging = function () {\r\n              this._opts.enableDragging = true;\r\n          }\r\n\r\n          /**\r\n           * Marker\r\n           * @return \r\n           * \r\n           * @example <b></b>\r\n           * myRichMarkerObject.disableDragging();\r\n           */\r\n          RichMarker.prototype.disableDragging = function () {\r\n              this._opts.enableDragging = false;\r\n          }\r\n\r\n          /**\r\n           * Marker\r\n           * @return {Boolean} truefalse\r\n           * \r\n           * @example <b></b>\r\n           * myRichMarkerObject.isDraggable();\r\n           */\r\n          RichMarker.prototype.isDraggable = function () {\r\n              return this._opts.enableDragging;\r\n          }\r\n\r\n          /**\r\n           * Marker\r\n           * @return {BMap.Point} \r\n           * \r\n           * @example <b></b>\r\n           * myRichMarkerObject.getPosition();\r\n           */\r\n          RichMarker.prototype.getPosition = function () {\r\n              return this._position;\r\n          }\r\n\r\n          /**\r\n           * Marker\r\n           * @param {BMap.Point} position \r\n           * @return \r\n           * \r\n           * @example <b></b>\r\n           * myRichMarkerObject.setPosition(new BMap.Point(116.30816, 40.056863));\r\n           */\r\n          RichMarker.prototype.setPosition = function (position) {\r\n              if (!position instanceof BMap.Point) {\r\n                  return;\r\n              }\r\n              this._position = position;\r\n              this.draw();\r\n          }\r\n\r\n          /**\r\n           * Marker\r\n           * @return {BMap.Size} Marker\r\n           * \r\n           * @example <b></b>\r\n           * myRichMarkerObject.getAnchor();\r\n           */\r\n          RichMarker.prototype.getAnchor = function () {\r\n              return this._opts.anchor;\r\n          }\r\n\r\n          /**\r\n           * Marker\r\n           * @param {BMap.Size} anchor \r\n           * @return \r\n           * \r\n           * @example <b></b>\r\n           * myRichMarkerObject.setAnchor(new BMap.Size(-72, -84));\r\n           */\r\n          RichMarker.prototype.setAnchor = function (anchor) {\r\n              if (!anchor instanceof BMap.Size) {\r\n                  return;\r\n              }\r\n              this._opts.anchor = anchor;\r\n              this.draw();\r\n          }\r\n\r\n          /**\r\n           * \r\n           * \r\n           * @private\r\n           * @return \r\n           */\r\n          RichMarker.prototype._appendContent = function () {\r\n              var content = this._content;\r\n              // dom\r\n              if (typeof content == \"string\") {\r\n                  var div = document.createElement('DIV');\r\n                  div.innerHTML = content;\r\n                  if (div.childNodes.length == 1) {\r\n                      content = (div.removeChild(div.firstChild));\r\n                  } else {\r\n                      var fragment = document.createDocumentFragment();\r\n                      while (div.firstChild) {\r\n                          fragment.appendChild(div.firstChild);\r\n                      }\r\n                      content = fragment;\r\n                  }\r\n              }\r\n              this._container.innerHTML = \"\";\r\n              this._container.appendChild(content);\r\n          }\r\n\r\n          /**\r\n           * Marker\r\n           * @return {String | HTMLElement} \r\n           * \r\n           * @example <b></b>\r\n           * myRichMarkerObject.getContent();\r\n           */\r\n          RichMarker.prototype.getContent = function () {\r\n              return this._content;\r\n          }\r\n\r\n          /**\r\n           * Marker\r\n           * @param {String | HTMLElement} content \r\n           * @return \r\n           * \r\n           * @example <b></b>\r\n           * var htm = \"&lt;div style='background:#E7F0F5;color:#0082CB;border:1px solid #333'&gt;\"\r\n           *              +     \"API\"\r\n           *              +     \"&lt;img src='http://map.baidu.com/img/logo-map.gif' border='0' /&gt;\"\r\n           *              + \"&lt;/div&gt;\";\r\n           * myRichMarkerObject.setContent(htm);\r\n           */\r\n          RichMarker.prototype.setContent = function (content) {\r\n              if (!content) {\r\n                  return;\r\n              }\r\n              // Marker\r\n              this._content = content;\r\n              // \r\n              this._appendContent();\r\n          }\r\n\r\n          /**\r\n           * Marker\r\n           * \r\n           * @private\r\n           * @return {BMap.Size} \r\n           */\r\n          RichMarker.prototype._getContainerSize = function () {\r\n              if (!this._container) {\r\n                  return;\r\n              }\r\n              var h = this._container.offsetHeight;\r\n              var w = this._container.offsetWidth;\r\n              this._size = new BMap.Size(w, h);\r\n          }\r\n\r\n          /**\r\n           * Marker\r\n           * @return {Number} \r\n           * \r\n           * @example <b></b>\r\n           * myRichMarkerObject.getWidth();\r\n           */\r\n          RichMarker.prototype.getWidth = function () {\r\n              if (!this._size) {\r\n                  return;\r\n              }\r\n              return this._size.width;\r\n          }\r\n\r\n          /**\r\n           * Marker\r\n           * @param {Number} width \r\n           * @return \r\n           * \r\n           * @example <b></b>\r\n           * myRichMarkerObject.setWidth(300);\r\n           */\r\n          RichMarker.prototype.setWidth = function (width) {\r\n              if (!this._container) {\r\n                  return;\r\n              }\r\n              this._container.style.width = width + \"px\";\r\n              this._getContainerSize();\r\n          }\r\n\r\n          /**\r\n           * Marker\r\n           * @return {Number} \r\n           * \r\n           * @example <b></b>\r\n           * myRichMarkerObject.getHeight();\r\n           */\r\n          RichMarker.prototype.getHeight = function () {\r\n              if (!this._size) {\r\n                  return;\r\n              }\r\n              return this._size.height;\r\n          }\r\n\r\n          /**\r\n           * Marker\r\n           * @param {Number} height \r\n           * @return \r\n           * \r\n           * @example <b></b>\r\n           * myRichMarkerObject.setHeight(200);\r\n           */\r\n          RichMarker.prototype.setHeight = function (height) {\r\n              if (!this._container) {\r\n                  return;\r\n              }\r\n              this._container.style.height = height + \"px\";\r\n              this._getContainerSize();\r\n          }\r\n\r\n          /**\r\n           * Marker\r\n           * \r\n           * @private\r\n           * @return \r\n           */\r\n          RichMarker.prototype._setEventDispath = function () {\r\n              var me = this,\r\n                  div = me._container,\r\n                  isMouseDown = false,\r\n                  // \r\n                  startPosition = null; //    \r\n\r\n              // e\r\n              function _getPositionByEvent(e) {\r\n                  var e = window.event || e,\r\n                      x = e.pageX || e.clientX || 0,\r\n                      y = e.pageY || e.clientY || 0,\r\n                      pixel = new BMap.Pixel(x, y),\r\n                      point = me._map.pixelToPoint(pixel);\r\n                  return {\r\n                      \"pixel\": pixel,\r\n                      \"point\": point\r\n                  };\r\n              }\r\n\r\n              // \r\n              baidu.on(div, \"onclick\", function (e) {\r\n                  /**\r\n                   * Marker\r\n                   * @name RichMarker#onclick\r\n                   * @event\r\n                   * @param {Event Object} e event\r\n                   * <br />{\"<b>target</b> : {BMap.Overlay} ,\r\n                   * <br />\"<b>type</b>{String} }\r\n                   *\r\n                   * @example <b></b>\r\n                   * myRichMarkerObject.addEventListener(\"onclick\", function(e) { \r\n                   *     alert(e.type);  \r\n                   * });\r\n                   */\r\n                  _dispatchEvent(me, \"onclick\");\r\n                  _stopAndPrevent(e);\r\n              });\r\n\r\n              // \r\n              baidu.on(div, \"ontouchend\", function (e) {\r\n                  /**\r\n                   * Marker\r\n                   * @name RichMarker#onclick\r\n                   * @event\r\n                   * @param {Event Object} e event\r\n                   * <br />{\"<b>target</b> : {BMap.Overlay} ,\r\n                   * <br />\"<b>type</b>{String} }\r\n                   *\r\n                   * @example <b></b>\r\n                   * myRichMarkerObject.addEventListener(\"onclick\", function(e) { \r\n                   *     alert(e.type);  \r\n                   * });\r\n                   */\r\n                  _dispatchEvent(me, \"ontouchend\");\r\n                  _dispatchEvent(me, \"onclick\");\r\n                  _stopAndPrevent(e);\r\n              });\r\n              // \r\n              baidu.on(div, \"ondblclick\", function (e) {\r\n                  var position = _getPositionByEvent(e);\r\n                  /**\r\n                   * Marker\r\n                   * @name RichMarker#ondblclick\r\n                   * @event\r\n                   * @param {Event Object} e event\r\n                   * <br />{\"<b>target</b> : {BMap.Overlay} ,\r\n                   * <br />\"<b>type</b>{String} ,\r\n                   * <br />\"<b>point</b>{BMap.Point} ,\r\n                   * <br />\"<b>pixel</b>{BMap.Pixel} }\r\n                   *\r\n                   * @example <b></b>\r\n                   * myRichMarkerObject.addEventListener(\"ondblclick\", function(e) { \r\n                   *     alert(e.type);  \r\n                   * });\r\n                   */\r\n                  _dispatchEvent(me, \"ondblclick\", {\r\n                      \"point\": position.point,\r\n                      \"pixel\": position.pixel\r\n                  });\r\n                  _stopAndPrevent(e);\r\n              });\r\n\r\n              // \r\n              div.onmouseover = function (e) {\r\n                  var position = _getPositionByEvent(e);\r\n                  /**\r\n                   * Marker\r\n                   * @name RichMarker#onmouseover\r\n                   * @event\r\n                   * @param {Event Object} e event\r\n                   * <br />{\"<b>target</b> : {BMap.Overlay} ,\r\n                   * <br />\"<b>type</b>{String} ,\r\n                   * <br />\"<b>point</b>{BMap.Point} ,\r\n                   * <br />\"<b>pixel</b>{BMap.Pixel} }\r\n                   *\r\n                   * @example <b></b>\r\n                   * myRichMarkerObject.addEventListener(\"onmouseover\", function(e) { \r\n                   *     alert(e.type);  \r\n                   * });\r\n                   */\r\n                  _dispatchEvent(me, \"onmouseover\", {\r\n                      \"point\": position.point,\r\n                      \"pixel\": position.pixel\r\n                  });\r\n                  _stopAndPrevent(e);\r\n              }\r\n\r\n              // \r\n              div.onmouseout = function (e) {\r\n                  var position = _getPositionByEvent(e);\r\n                  /**\r\n                   * Marker\r\n                   * @name RichMarker#onmouseout\r\n                   * @event\r\n                   * @param {Event Object} e event\r\n                   * <br />{\"<b>target</b> : {BMap.Overlay} ,\r\n                   * <br />\"<b>type</b>{String} ,\r\n                   * <br />\"<b>point</b>{BMap.Point} ,\r\n                   * <br />\"<b>pixel</b>{BMap.Pixel} }\r\n                   *\r\n                   * @example <b></b>\r\n                   * myRichMarkerObject.addEventListener(\"onmouseout\", function(e) { \r\n                   *     alert(e.type);  \r\n                   * });\r\n                   */\r\n                  _dispatchEvent(me, \"onmouseout\", {\r\n                      \"point\": position.point,\r\n                      \"pixel\": position.pixel\r\n                  });\r\n                  _stopAndPrevent(e);\r\n              }\r\n\r\n              // \r\n              var mouseUpEvent = function (e) {\r\n                  var position = _getPositionByEvent(e);\r\n                  /**\r\n                   * Marker\r\n                   * @name RichMarker#onmouseup\r\n                   * @event\r\n                   * @param {Event Object} e event\r\n                   * <br />{\"<b>target</b> : {BMap.Overlay} ,\r\n                   * <br />\"<b>type</b>{String} ,\r\n                   * <br />\"<b>point</b>{BMap.Point} ,\r\n                   * <br />\"<b>pixel</b>{BMap.Pixel} }\r\n                   *\r\n                   * @example <b></b>\r\n                   * myRichMarkerObject.addEventListener(\"onmouseup\", function(e) { \r\n                   *     alert(e.type);  \r\n                   * });\r\n                   */\r\n                  _dispatchEvent(me, \"onmouseup\", {\r\n                      \"point\": position.point,\r\n                      \"pixel\": position.pixel\r\n                  });\r\n\r\n                  if (me._container.releaseCapture) {\r\n                      baidu.un(div, \"onmousemove\", mouseMoveEvent);\r\n                      baidu.un(div, \"onmouseup\", mouseUpEvent);\r\n                  } else {\r\n                      baidu.un(window, \"onmousemove\", mouseMoveEvent);\r\n                      baidu.un(window, \"onmouseup\", mouseUpEvent);\r\n                  }\r\n\r\n                  // \r\n                  if (!me._opts.enableDragging) {\r\n                      _stopAndPrevent(e);\r\n                      return;\r\n                  }\r\n                  // \r\n                  me._container.releaseCapture && me._container.releaseCapture();\r\n                  /**\r\n                   * Marker\r\n                   * @name RichMarker#ondragend\r\n                   * @event\r\n                   * @param {Event Object} e event\r\n                   * <br />{\"<b>target</b> : {BMap.Overlay} ,\r\n                   * <br />\"<b>type</b>{String} ,\r\n                   * <br />\"<b>point</b>{BMap.Point} ,\r\n                   * <br />\"<b>pixel</b>{BMap.Pixel} }\r\n                   *\r\n                   * @example <b></b>\r\n                   * myRichMarkerObject.addEventListener(\"ondragend\", function(e) { \r\n                   *     alert(e.type);  \r\n                   * });\r\n                   */\r\n                  _dispatchEvent(me, \"ondragend\", {\r\n                      \"point\": position.point,\r\n                      \"pixel\": position.pixel\r\n                  });\r\n                  isMouseDown = false;\r\n                  startPosition = null;\r\n                  // \r\n                  me._setCursor(\"dragend\");\r\n                  // \r\n                  me._container.style['MozUserSelect'] = '';\r\n                  me._container.style['KhtmlUserSelect'] = '';\r\n                  me._container.style['WebkitUserSelect'] = '';\r\n                  me._container['unselectable'] = 'off';\r\n                  me._container['onselectstart'] = function () { };\r\n\r\n                  _stopAndPrevent(e);\r\n              }\r\n\r\n              // \r\n              var mouseMoveEvent = function (e) {\r\n                  // \r\n                  if (!me._opts.enableDragging || !isMouseDown) {\r\n                      return;\r\n                  }\r\n                  var position = _getPositionByEvent(e);\r\n\r\n                  // marker\r\n                  var startPixel = me._map.pointToPixel(me._position);\r\n                  var x = position.pixel.x - startPosition.x + startPixel.x;\r\n                  var y = position.pixel.y - startPosition.y + startPixel.y;\r\n\r\n                  startPosition = position.pixel;\r\n                  me._position = me._map.pixelToPoint(new BMap.Pixel(x, y));\r\n                  me.draw();\r\n                  // \r\n                  me._setCursor(\"dragging\");\r\n                  /**\r\n                   * Marker\r\n                   * @name RichMarker#ondragging\r\n                   * @event\r\n                   * @param {Event Object} e event\r\n                   * <br />{\"<b>target</b> : {BMap.Overlay} ,\r\n                   * <br />\"<b>type</b>{String} ,\r\n                   * <br />\"<b>point</b>{BMap.Point} ,\r\n                   * <br />\"<b>pixel</b>{BMap.Pixel} }\r\n                   *\r\n                   * @example <b></b>\r\n                   * myRichMarkerObject.addEventListener(\"ondragging\", function(e) { \r\n                   *     alert(e.type);  \r\n                   * });\r\n                   */\r\n                  _dispatchEvent(me, \"ondragging\", {\r\n                      \"point\": position.point,\r\n                      \"pixel\": position.pixel\r\n                  });\r\n                  _stopAndPrevent(e);\r\n              }\r\n\r\n              // \r\n              baidu.on(div, \"onmousedown\", function (e) {\r\n                  var position = _getPositionByEvent(e);\r\n                  /**\r\n                   * Marker\r\n                   * @name RichMarker#onmousedown\r\n                   * @event\r\n                   * @param {Event Object} e event\r\n                   * <br />{\"<b>target</b> : {BMap.Overlay} ,\r\n                   * <br />\"<b>type</b>{String} ,\r\n                   * <br />\"<b>point</b>{BMap.Point} ,\r\n                   * <br />\"<b>pixel</b>{BMap.Pixel} }\r\n                   *\r\n                   * @example <b></b>\r\n                   * myRichMarkerObject.addEventListener(\"onmousedown\", function(e) { \r\n                   *     alert(e.type);  \r\n                   * });\r\n                   */\r\n                  _dispatchEvent(me, \"onmousedown\", {\r\n                      \"point\": position.point,\r\n                      \"pixel\": position.pixel\r\n                  });\r\n\r\n                  if (me._container.setCapture) {\r\n                      baidu.on(div, \"onmousemove\", mouseMoveEvent);\r\n                      baidu.on(div, \"onmouseup\", mouseUpEvent);\r\n                  } else {\r\n                      baidu.on(window, \"onmousemove\", mouseMoveEvent);\r\n                      baidu.on(window, \"onmouseup\", mouseUpEvent);\r\n                  }\r\n\r\n                  // \r\n                  if (!me._opts.enableDragging) {\r\n                      _stopAndPrevent(e);\r\n                      return;\r\n                  }\r\n                  startPosition = position.pixel;\r\n                  /**\r\n                   * Marker\r\n                   * @name RichMarker#ondragstart\r\n                   * @event\r\n                   * @param {Event Object} e event\r\n                   * <br />{\"<b>target</b> : {BMap.Overlay} ,\r\n                   * <br />\"<b>type</b>{String} ,\r\n                   * <br />\"<b>point</b>{BMap.Point} ,\r\n                   * <br />\"<b>pixel</b>{BMap.Pixel} }\r\n                   *\r\n                   * @example <b></b>\r\n                   * myRichMarkerObject.addEventListener(\"ondragstart\", function(e) { \r\n                   *     alert(e.type);  \r\n                   * });\r\n                   */\r\n                  _dispatchEvent(me, \"ondragstart\", {\r\n                      \"point\": position.point,\r\n                      \"pixel\": position.pixel\r\n                  });\r\n                  isMouseDown = true;\r\n                  // \r\n                  me._setCursor(\"dragstart\");\r\n                  // \r\n                  me._container.setCapture && me._container.setCapture();\r\n                  // \r\n                  me._container.style['MozUserSelect'] = 'none';\r\n                  me._container.style['KhtmlUserSelect'] = 'none';\r\n                  me._container.style['WebkitUserSelect'] = 'none';\r\n                  me._container['unselectable'] = 'on';\r\n                  me._container['onselectstart'] = function () {\r\n                      return false;\r\n                  };\r\n                  _stopAndPrevent(e);\r\n              });\r\n          }\r\n\r\n          /**\r\n           * \r\n           *\r\n           * @private \r\n           * @param {string} cursorType \r\n           */\r\n          RichMarker.prototype._setCursor = function (cursorType) {\r\n              var cursor = '';\r\n              var cursorStylies = {\r\n                  \"moz\": {\r\n                      \"dragstart\": \"-moz-grab\",\r\n                      \"dragging\": \"-moz-grabbing\",\r\n                      \"dragend\": \"pointer\"\r\n                  },\r\n                  \"other\": {\r\n                      \"dragstart\": \"move\",\r\n                      \"dragging\": \"move\",\r\n                      \"dragend\": \"pointer\"\r\n                  }\r\n              };\r\n\r\n              if (navigator.userAgent.indexOf('Gecko/') !== -1) {\r\n                  cursor = cursorStylies.moz[cursorType];\r\n              } else {\r\n                  cursor = cursorStylies.other[cursorType];\r\n              }\r\n\r\n              if (this._container.style.cursor != cursor) {\r\n                  this._container.style.cursor = cursor;\r\n              }\r\n          }\r\n\r\n          /**\r\n           * Marker\r\n           * \r\n           * @private\r\n           * @return \r\n           */\r\n          RichMarker.prototype.remove = function () {\r\n              _dispatchEvent(this, \"onremove\");\r\n              // \r\n              if (this._container) {\r\n                  _purge(this._container);\r\n              }\r\n              // \r\n              if (this._container && this._container.parentNode) {\r\n                  this._container.parentNode.removeChild(this._container);\r\n              }\r\n          }\r\n\r\n          /**\r\n           * \r\n           *\r\n           * @private\r\n           * @param {Object} instance \r\n           * @param {String} type \r\n           * @param {Json} opts \r\n           */\r\n          function _dispatchEvent(instance, type, opts) {\r\n              type.indexOf(\"on\") != 0 && (type = \"on\" + type);\r\n              var event = new baidu.lang.Event(type);\r\n              if (!!opts) {\r\n                  for (var p in opts) {\r\n                      event[p] = opts[p];\r\n                  }\r\n              }\r\n              instance.dispatchEvent(event);\r\n          }\r\n\r\n          /**\r\n           * DOM\r\n           *\r\n           * @type {DOM} dom dom\r\n           */\r\n          function _purge(dom) {\r\n              if (!dom) {\r\n                  return;\r\n              }\r\n              var attrs = dom.attributes,\r\n                  name = \"\";\r\n              if (attrs) {\r\n                  for (var i = 0, n = attrs.length; i < n; i++) {\r\n                      name = attrs[i].name;\r\n                      if (typeof dom[name] === \"function\") {\r\n                          dom[name] = null;\r\n                      }\r\n                  }\r\n              }\r\n              var child = dom.childnodes;\r\n              if (child) {\r\n                  for (var i = 0, n = child.length; i < n; i++) {\r\n                      _purge(dom.childnodes[i]);\r\n                  }\r\n              }\r\n          }\r\n\r\n          /**\r\n           * \r\n           *\r\n           * @type {Event} e e\r\n           */\r\n          function _stopAndPrevent(e) {\r\n              var e = window.event || e;\r\n              e.stopPropagation ? e.stopPropagation() : e.cancelBubble = true;\r\n              return baidu.preventDefault(e);\r\n          }\r\n\r\n          return RichMarker;\r\n\r\n      }\r\n\r\n      function _buildRichMarker(html, point, options) {\r\n          var RichMarker = _getRichMarkerClass(window.BMap);\r\n          return new RichMarker(html, point, options);\r\n      }\r\n\r\n      return {\r\n          buildRichMarker: _buildRichMarker\r\n      }\r\n  });\r\n\r\n}());\r\n","(function() {\n    \"use strict\";\n    angular.module('modules', [\n        'LoginModule',\n        'WxLoginModule',\n        'childrenSteamModule',\n        'registerModule',\n        'tabsModule',\n        'childrenModule',\n        'nearbyModule',\n        'orderModule',\n        'profileModule',\n        'organizerModule',\n        'messageModule',\n        'parentModule',\n        'childrenSettingModule',\n        'teacherModule',\n        'teacherSettingModule',\n        'depositChildrenModule',\n        'vipBuyModule',\n        'vipRecordModule',\n        'vipTipsModule',\n        'commentModule',\n        'exitModule',\n        'photoModule',\n        'MapModule',\n        'eshopEntryModule',\n        'estimateModule',\n        'helpModule',\n        'settingsModule'\n    ]);\n\n}());\n","Date.prototype.Format = function(fmt) {\n    var o = {\n        \"M+\": this.getMonth() + 1, //\n        \"d+\": this.getDate(), //\n        \"h+\": this.getHours(), //\n        \"m+\": this.getMinutes(), //\n        \"s+\": this.getSeconds(), //\n        \"q+\": Math.floor((this.getMonth() + 3) / 3), //\n        \"S\": this.getMilliseconds() //\n    };\n    if (/(y+)/.test(fmt))\n        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n    for (var k in o)\n        if (new RegExp(\"(\" + k + \")\").test(fmt))\n            fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\n    return fmt;\n};","(function() {\n  \"use strict\";\n  angular.module('tools', []).service('tools', tools);\n    function tools() {\n        'ngInject';\n\n        var tools = {\n            getAgent: getAgent\n        };\n\n        function getAgent() {\n           var browser = {\n               versions: function () {\n                   var u = navigator.userAgent,\n                       app = navigator.appVersion;\n                   return { //\n                       trident: u.indexOf('Trident') > -1, //IE\n                       presto: u.indexOf('Presto') > -1, //opera\n                       webKit: u.indexOf('AppleWebKit') > -1, //\n                       gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //\n                       mobile: !!u.match(/AppleWebKit.*Mobile.*/), //\n                       ios: !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios\n                       android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //androiduc\n                       iPhone: u.indexOf('iPhone') > -1, //iPhoneQQHD\n                       iPad: u.indexOf('iPad') > -1, //iPad\n                       webApp: u.indexOf('Safari') == -1 //web\n                   };\n               }(),\n               language: (navigator.browserLanguage || navigator.language).toLowerCase()\n           };\n           if (browser.versions.mobile) {\n               var ua = navigator.userAgent.toLowerCase(); //\n               if (ua.match(/MicroMessenger/i) == \"micromessenger\") {\n                   return 'wx';\n               } else if (ua.match(/QQ/i) == \"qq\") {\n                   return 'qq';\n               } else\n                   return 'mobile';\n           } else {\n               return 'pc';\n           }\n       }\n\n      return tools;\n    };\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('childrenAddCtrl', [])\n        .controller('childrenAddCtrl', function($scope, $stateParams, Constants, StateService, childrenSettingService, AuthService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            vm.page = 1;\n            vm.child = {\n                \"name\": \"\",\n                \"sex\": \"1\",\n                \"remark\": \"\",\n                \"birthday\": \"\",\n                \"relationship\": \"\",\n                \"guardian1\": \"\",\n                \"guardianPhone1\": \"\",\n                \"guardianWorkplace1\": \"\",\n                \"guardian2\": \"\",\n                \"guardianPhone2\": \"\",\n                \"guardianWorkplace2\": \"\",\n                \"homeAddr\": \"\",\n                \"allergyRemark\": \"\",\n                \"allergy\": \"0\",\n                \"favoriteFood\": \"\",\n                \"grade\": \"\",\n                \"schoolName\": \"\",\n                \"classTeacherPhone\": \"\"\n            };//{sex:'1'};\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                //console.log($stateParams);\n                //vm.cid = $stateParams.cid;\n                ////0:query 1:create 2:update\n                //vm.type = $stateParams.type;\n                //if(vm.type=='0')vm.isEditing = false;\n                //else vm.isEditing = true;\n\n                vm.activated = true;\n                vm.version = Constants.buildID;\n\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.next=function(){\n                if(vm.page==5){\n                    //save data\n                    //alert('');\n                    console.log(vm.child.birthday);\n                    var date=new Date();\n                    console.log(vm.child.birthday.getTime());\n\n                    childrenSettingService.registerChild(vm.child, AuthService.getLoginID()).then(function (data) {\n                        console.log(data);\n                        if (data.errno == 0) {\n                            //var userId = data.data.uid;\n                            //wxlogin(vm.user.wechat);\n                            StateService.back();\n                        }\n                    });\n                }else{\n                    vm.page++;\n                }\n            };\n\n            vm.prev=function(){\n                if(vm.page==1){\n                    // it is the first,no prev\n                }else{\n                    vm.page--;\n                }\n            };\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('childrenEditCtrl', [])\n        .controller('childrenEditCtrl', function($scope, $stateParams,$filter, Constants, StateService,childrenSettingService,AuthService,Session,MessageToaster) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n\n            vm.query = function(id){\n                console.log(\"child id = \"+id);\n                vm.child=Session.getData('temp');\n                childrenSettingService.queryChild(id).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n\n                        //\n                        data.data.Birthday =data.data.Birthday && new Date(data.data.Birthday);\n                        vm.child = data.data;\n                    }\n                });\n\n            };\n\n\n            $scope.$on('$ionicView.afterEnter', activate);\n            function activate() {\n                console.log($stateParams);\n                vm.cid = $stateParams.cid;\n                //0:query 1:create 2:update\n                vm.type = $stateParams.type;\n                if(vm.type=='0')vm.isEditing = false;\n                else vm.isEditing = true;\n\n                vm.activated = true;\n                vm.version = Constants.buildID;\n\n                if(vm.type!='1')vm.query(vm.cid);\n                else {\n                    vm.child = {\n                        \"Name\": \"\",\n                        \"Sex\": \"\",\n                        \"Remark\": \"\",\n                        \"Birthday\": \"\",\n                        \"Guardian1\": \"\",\n                        \"Guardianphone1\": \"\",\n                        \"Guardianworkplace1\": \"\",\n                        \"Guardian2\": \"\",\n                        \"Guardianphone2\": \"\",\n                        \"Guardianworkplace2\": \"\",\n                        \"HomeAddr\": \"\",\n                        \"AllergyRemark\": \"\",\n                        \"Allergy\": \"\",\n                        \"FavoriteFood\": \"\",\n                        \"Grade\": \"\",\n                        \"SchoolName\": \"\",\n                        \"ClassTeacherPhone\": \"\",\n                        \"Course\": \"\",\n                        \"OpenTime\": \"\",\n                        \"DepositCardID\": \"\",\n                        \"DepositType\": \"\",\n                        \"Benefit\": \"\"\n                    };\n                }\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.save=function(valid,dirty){\n                //console.log(\"valid = \"+valid+\" dirty = \"+dirty);\n                if (valid && dirty) {\n\n                    //\n                    vm.child.Birthday = vm.child.Birthday && $filter('date')(vm.child.Birthday, \"yyyy-MM-dd hh:mm\");\n\n                    //save\n                    if (vm.type == '1') {\n                        //create\n                        childrenSettingService.registerChild(vm.child, AuthService.getLoginID()).then(function (data) {\n                            if (data.errno == 0) {\n                                //var userId = data.data.uid;\n                                //wxlogin(vm.user.wechat);\n                                StateService.back();\n                            }\n                        });\n                    } else {\n                        //update\n                        childrenSettingService.updateChild(vm.child).then(function (data) {\n                            console.log(data);\n                            if (data.errno == 0) {\n                                StateService.back();\n                            }\n                        });\n                    }\n                }else{\n                    if(!valid){\n                        MessageToaster.info(\"\");\n                    }else if(!dirty) {\n                        MessageToaster.info(\"\");\n                    }\n                }\n            };\n\n\n        });\n}());\n","(function() {\n  \"use strict\";\n  angular.module('childrenSettingModule', [\n    'childrenSettingCtrl',\n    'childrenEditCtrl',\n    'childrenAddCtrl',\n    'childrenSettingRouter',\n    'childrenSettingService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('childrenSettingCtrl', [])\n        .controller('childrenSettingCtrl', function($scope,Constants,StateService,$ionicListDelegate,$ionicPopup,AuthService,parentService,Session,childrenSettingService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.getChildren();\n            }\n\n            vm.getChildren = function(){\n                parentService.queryChildren(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.children = data.data;\n                    }\n                });\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.goTo=function(id,child){\n                //\n                $ionicListDelegate.closeOptionButtons();\n                Session.setData('temp',child);\n                StateService.go('childrenEdit',{cid:id,type:0});\n            };\n\n            vm.newChild=function(){\n                //\n                $ionicListDelegate.closeOptionButtons();\n                StateService.go('childrenEdit',{type:1});\n            };\n\n            vm.newChild2=function(){\n                //,\n                $ionicListDelegate.closeOptionButtons();\n                StateService.go('childrenAdd');\n            };\n\n            vm.editChild=function(id,child){\n                //\n                $ionicListDelegate.closeOptionButtons();\n                Session.setData('temp',child);\n                StateService.go('childrenEdit',{cid:id,type:2});\n            };\n\n            vm.delChild=function(child){\n                //\n                $ionicListDelegate.closeOptionButtons();\n\n                var confirmPopup = $ionicPopup.confirm({\n                    title: ':'+child.name,\n                    buttons: [\n                        {text: '', type: 'button-positive'},\n                        {text: '', type: 'button-assertive',onTap: function(e) { return true}}\n                    ]\n                });\n                confirmPopup.then(function(result) {\n                    if(result) {\n                        console.log('confirm to del this child '+child.uid);\n                        //delete(id);\n                        childrenSettingService.deleteChild(child.uid).then(function(data) {\n                            console.log(data);\n                            if (data.errno == 0) {\n                                console.log(data.data);\n                              \n                            }\n                        });\n                    } else {\n                        console.log('cancel delete');\n                    }\n                });\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('childrenSettingRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('childrenSetting', {\n        url: \"/childrenSetting\",\n        templateUrl: 'childrenSetting/childrenSetting.html',\n        controller: 'childrenSettingCtrl',\n        controllerAs: 'vm'\n      })\n      .state('childrenAdd', {\n        url: \"/childrenAdd\",\n        templateUrl: 'childrenSetting/childrenAdd.html',\n        controller: 'childrenAddCtrl',\n        controllerAs: 'vm'\n      })\n      .state('childrenEdit', {\n        url: \"/childrenEdit?:cid&:type\",\n        params: {\n          cid : null,\n          type : '0'\n        },\n        templateUrl: 'childrenSetting/childrenEdit.html',\n        controller: 'childrenEditCtrl',\n        controllerAs: 'vm'\n      })\n    ;\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('childrenSettingService', [])\n    .factory('childrenSettingService', childrenSettingService);\n\n  function childrenSettingService( $q, $http, Constants, ResultHandler) {\n    'ngInject';\n    var service = {\n      queryChild:queryChild,\n      updateChild:updateChild,\n      deleteChild:deleteChild,\n      registerChild:registerChild\n    };\n\n    //POST\n    //URL: /api/v1/account/register/children\n    //Request Body:\n    //{\n    //  \"name\":\"\",\n    //    \"sex\":1,\n    //    \"fingerfeature\":\"value\"\n    //}\n    //Response Body:\n    //{\n    //  \"errno\":0,\n    //    \"error\":\"\",\n    //    \"data\":{\n    //      \"uid\":40000001\n    //    }\n    //}\n    //need token in headers\n    // \"name\", \"sex\", \"fingerfeature\", \"remark\", \"grade\", \"birthday\", \"homeaddr\", \"allergy\", \"allergyremark\",\"favoritefood\",\n    //\"guardian1\",\"guardianphone1\",\"guardianworkplace1\", \"guardian2\", \"guardianphone2\", \"guardianworkplace2\", \"schoolname\", \"classteacherphone\",\n    //    \"course\",\"opentime\", \"depositcardid\", \"deposittype\", \"benefit\n    function registerChild(child,parentId) {\n      var time=child.birthday.toISOString().slice(0, 19).replace('T', ' ');\n      var data = {\n        \"p_uid\":parentId,\n        \"name\": child.name,\n        \"sex\": child.sex,\n        \"relationship\": child.relationship,\n        \"remark\": child.remark,\n        \"birthday\":time,\n        \"guardian1\":child.guardian1,\n        \"guardianphone1\":child.guardianPhone1,\n        \"guardianworkplace1\":child.guardianWorkplace1,\n        \"guardian2\":child.guardian2,\n        \"guardianphone2\":child.guardianPhone2,\n        \"guardianworkplace2\":child.guardianWorkplace2,\n        \"homeaddr\":child.homeAddr,\n        \"allergyremark\":child.allergyRemark,\n        \"allergy\":child.allergy,\n        \"favoritefood\":child.favoriteFood,\n        \"grade\":child.grade,\n        \"schoolname\":child.schoolName,\n        \"classteacherphone\":child.classTeacherPhone\n      };\n      console.log(JSON.stringify(data));\n      var url = Constants.serverUrl + 'account/register/children';\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    //http://172.18.1.166/api/v1/account/children/update/40000015     POST \n    function updateChild(child) {\n      var data = {\n        \"name\": child.Name,\n        \"sex\": child.Sex,\n        \"remark\": child.Remark!=null?child.Remark:\"\",\n        \"birthday\":child.Birthday!=null?child.Birthday:\"\",\n        \"guardian1\":child.Guardian1!=null?child.Guardian1:\"\",\n        \"guardianphone1\":child.GuardianPhone1!=null?child.GuardianPhone1:\"\",\n        \"guardianworkplace1\":child.GuardianWorkplace1!=null?child.GuardianWorkplace1:\"\",\n        \"guardian2\":child.Guardian2!=null?child.Guardian2:\"\",\n        \"guardianphone2\":child.GuardianPhone2!=null?child.GuardianPhone2:\"\",\n        \"guardianworkplace2\":child.GuardianWorkplace2!=null?child.GuardianWorkplace2:\"\",\n        \"homeaddr\":child.HomeAddr!=null?child.HomeAddr:\"\",\n        \"allergyremark\":child.AllergyRemark!=null?child.AllergyRemark:\"\",\n        \"allergy\":child.Allergy!=null?child.Allergy:\"0\",\n        \"favoritefood\":child.FavoriteFood!=null?child.FavoriteFood:\"\",\n        \"grade\":child.Grade!=null?child.Grade:\"0\",\n        \"schoolname\":child.SchoolName!=null?child.SchoolName:\"\",\n        \"classteacherphone\":child.ClassTeacherPhone!=null?child.ClassTeacherPhone:\"\",\n        \"course\":child.Course!=null?child.Course:\"\",\n        \"opentime\":child.OpenTime!=null?child.OpenTime:\"\",\n        \"depositcardid\":child.DepositCardID!=null?child.DepositCardID:\"\",\n        \"deposittype\":child.DepositType!=null?child.DepositType:\"0\",\n        \"benefit\":child.Benefit!=null?child.Benefit:\"0\"\n      };\n      console.log(JSON.stringify(data));\n      var url = Constants.serverUrl + 'account/children/update/'+child.AccountID;\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    //http://172.18.1.166/api/v1/account/children/query/40000015    GET \n    function queryChild(childId) {\n      var url = Constants.serverUrl + 'account/children/query/'+childId;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function deleteChild(childId) {\n      var url = Constants.serverUrl + 'account/children/delete/'+childId;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('commentModule', [\n    'commentService'\n  ]);\n\n}());\n","(function() {\n  'use strict';\n\n  angular.module('commentService', [])\n    .factory('commentService', commentService);\n\n  function commentService($q, $http, Constants, ResultHandler) {\n    'ngInject';\n    var service = {\n        queryDepositComment:queryDepositComment\n    };\n\n    //http://172.18.1.166/api/v1/comment/deposit/fetch/:depositid\n    function queryDepositComment(id) {\n        var url = Constants.serverUrl + 'comment/deposit/fetch/'+id;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('childrenModule', [\n    'childrenCtrl',\n    'childrenRouter',\n    'childrenService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('childrenCtrl', [])\n        .controller('childrenCtrl', function($scope, Constants,childrenService,AuthService,Session, StateService,$ionicModal, $ionicSlideBoxDelegate) {\n            'ngInject';\n            console.log(\"childrenCtrl\");\n            var vm = this;\n            vm.activated = false;\n            vm.parent={};\n            vm.fingerprintLogs=[];\n            vm.fingerprintLogSample=[];\n            vm.messages=[];\n            vm.simpleFilter='';\n            vm.offset=0;\n            vm.limit=30;\n            vm.canLoadMore=true;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                //\n                vm.getWechatInfo(AuthService.getWechatId());\n                //vm.parent.wechat={\n                //    \"nickname\": \"Band\",\n                //    \"sex\": 1,\n                //    \"language\": \"zh_CN\",\n                //    \"city\": \"\",\n                //    \"province\": \"\",\n                //    \"country\": \"\",\n                //    \"headimgurl\":  \"http://wx.qlogo.cn/mmopen/g3MonUZtNHkdmzicIlibx6iaFqAc56vxLSUfpb6n5WKSYVY0ChQKkiaJSgQ1dZuTOgvLLrhJbERQQ4eMsv84eavHiaiceqxibJxCfHe/0\"\n                //};\n                vm.getChildrenInfo(AuthService.getLoginID(),vm.offset,vm.limit);\n\n                vm.getChildren();\n            };\n\n            vm.doRefresh = function(offset){\n                vm.getChildrenInfo(AuthService.getLoginID(),offset,vm.limit);\n            };\n\n            vm.getChildrenInfo = function(pId,offset,limit){\n                childrenService.getChildrenAllInfo(pId,offset,limit).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(\"getChildrenAllInfo: \");\n                        console.log(data.data);\n                        if(vm.messages.length == 0)\n                            vm.messages=data.data;\n                        else\n                            vm.messages=vm.messages.concat(data.data);\n                        console.log(vm.messages);\n                        vm.offset+=data.data.length;\n                        if(data.data.length < vm.limit){\n                            console.log(\"it is the last data\");\n                            vm.canLoadMore = false;\n                        }else{\n                            vm.canLoadMore = true;\n                        }\n                        $scope.$broadcast('scroll.refreshComplete');\n                        $scope.$broadcast('scroll.infiniteScrollComplete');\n                    }else{\n                        console.log(data);\n                    }\n                });\n            };\n\n            vm.getWechatInfo = function(wId){\n                console.log(\"wechat id : \"+wId);\n                childrenService.getWechatInfo(wId).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(\"wechat info: \");\n                        console.log(data.data);\n                        vm.parent.wechat = data.data;\n                    }\n                });\n            };\n\n            vm.getImg = function(type){\n                if(type == 1){\n                    return {name:\"\",src:\"img/dinner.png\"};\n                }else if(type == 2){\n                    return {name:\"\",src:\"img/traning.png\"};\n                }else if(type == 3){\n                    return {name:\"\",src:\"img/play.png\"};\n                }else if(type == 4){\n                    return {name:\"\",src:\"img/homework.png\"};\n                }else if(type == 5){\n                    return {name:\"\",src:\"img/login.png\"};\n                }else if(type == 6){\n                    return {name:\"\",src:\"img/logout.png\"};\n                }else{\n                    return {name:\"\",src:\"img/unknown.png\"};\n                }\n            };\n\n            vm.goPhoto=function(msgIndex,index){\n                Session.setData('temp',vm.msg[msgIndex]);\n                StateService.go(\"photo\",{index:index});\n            };\n\n            vm.star = function(){\n                console.log(\"add star\");\n            };\n\n            vm.getChildren = function(){\n                childrenService.getChildren(AuthService.getLoginID()).then(function(data) {\n                    var title=\"\";\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.childs = data.data;\n                        for(var i=0;i<vm.childs.length;i++){\n                            if(i==vm.childs.length-1)\n                                title+=(vm.childs[i].name+\"\");\n                            else\n                                title+=(vm.childs[i].name+\",\");\n                            //vm.getMsg(vm.childs[i].uid);\n                            //vm.getChildSignIn(vm.childs[i].uid,vm.childs[i].name);\n                        }\n                        vm.parent.title=title;\n                    }\n                    //vm.fingerprintLogs.sort(function(a,b){return a.log-b.log});\n                });\n            };\n\n            vm.change = function(){\n                if(vm.simpleFilterSelect==='-1'){\n                    vm.simpleFilter=\"\";\n                }else if(vm.simpleFilterSelect==='0'){\n                    vm.simpleFilter={datatype:'2'};\n                }else if(vm.simpleFilterSelect==='1'){\n                    vm.simpleFilter={datatype:'1',InfoType:'1'};\n                }else if(vm.simpleFilterSelect==='2'){\n                    vm.simpleFilter={datatype:'1',InfoType:'2'};\n                }else if(vm.simpleFilterSelect==='3'){\n                    vm.simpleFilter={datatype:'1',InfoType:'3'};\n                }else if(vm.simpleFilterSelect==='4'){\n                    vm.simpleFilter={datatype:'1',InfoType:'4'};\n                }else if(vm.simpleFilterSelect==='5'){\n                    vm.simpleFilter={datatype:'1',InfoType:'5'};\n                }else if(vm.simpleFilterSelect==='6'){\n                    vm.simpleFilter={datatype:'1',InfoType:'6'};\n                }\n            };\n\n            vm.getImages=function(msg){\n                vm.imgCount=0;\n                if(msg.PhotoLink1!=null && msg.PhotoLink1!=\"\"){\n                    var data={src:msg.PhotoLink1,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.PhotoLink2!=null && msg.PhotoLink2!=\"\"){\n                    var data={src:msg.PhotoLink2,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.PhotoLink3!=null && msg.PhotoLink3!=\"\"){\n                    var data={src:msg.PhotoLink3,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.PhotoLink4!=null && msg.PhotoLink4!=\"\"){\n                    var data={src:msg.PhotoLink4,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.PhotoLink5!=null && msg.PhotoLink5!=\"\"){\n                    var data={src:msg.PhotoLink5,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.PhotoLink6!=null && msg.PhotoLink6!=\"\"){\n                    var data={src:msg.PhotoLink6,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                console.log(vm.images);\n            };\n\n            $ionicModal.fromTemplateUrl('message/image-modal.html', {\n                scope: $scope,\n                animation: 'slide-in-up'\n            }).then(function(modal) {\n                $scope.modal = modal;\n            });\n\n            $scope.openModal = function() {\n                $ionicSlideBoxDelegate.slide(0);\n                $scope.modal.show();\n            };\n\n            $scope.closeModal = function() {\n                $scope.modal.hide();\n            };\n\n            // Cleanup the modal when we're done with it!\n            $scope.$on('$destroy', function() {\n                $scope.modal.remove();\n            });\n            // Execute action on hide modal\n            $scope.$on('modal.hide', function() {\n                // Execute action\n            });\n            // Execute action on remove modal\n            $scope.$on('modal.removed', function() {\n                // Execute action\n            });\n            $scope.$on('modal.shown', function() {\n                console.log('Modal is shown!');\n            });\n\n            // Call this functions if you need to manually control the slides\n            $scope.next = function() {\n                $ionicSlideBoxDelegate.next();\n            };\n\n            $scope.previous = function() {\n                $ionicSlideBoxDelegate.previous();\n            };\n\n            $scope.goToSlide = function(index,msg) {\n                vm.images=[];\n                vm.getImages(msg);\n                $scope.modal.show();\n                $ionicSlideBoxDelegate.slide(index);\n            };\n\n            // Called each time the slide changes\n            $scope.slideChanged = function(index) {\n                $scope.slideIndex = index;\n            };\n\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('childrenRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.children', {\n        url: \"/children\",\n          views: {\n            'tab-children': {\n              templateUrl: 'children/children.html',\n              controller: 'childrenCtrl',\n              controllerAs: 'vm'\n            }\n          }\n      })\n      .state('tabs.childrenSignIn', {\n        url: \"/childrenSignIn\",\n        views: {\n          'tab-children': {\n            templateUrl: 'children/childrenSignIn.html',\n            controller: 'childrenCtrl',\n            controllerAs: 'vm'\n          }\n        }\n      });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('childrenService', [])\n    .factory('childrenService', childrenService);\n\n  function childrenService( $q, $http,Constants,ResultHandler) {\n    'ngInject';\n    var service = {\n      getMsg:getMsg,\n      getChildrenMsg:getChildrenMsg,\n      getChildren:getChildren,\n      getChildSignIn:getChildSignIn,\n      getChildrenSignIn:getChildrenSignIn,\n      getWechatInfo:getWechatInfo,\n      getChildrenAllInfo:getChildrenAllInfo\n    };\n\n    //\t\t\n    //InfoID \tint64 \t\n    //PublisherID \tint64 \t\n    //DepositID \tint64 \t\n    //Longitude \tfloat \t\n    //Latitude \tfloat \t\n    //ClickCount \tint64 \t\n    //InfoType \tint32 \t1234\n    //Description \tvarchar2 \t1000\n    //PhotoLink1 \tvarchar2 \t/1\n    //PhotoLink2 \tvarchar2 \t/2\n    //PhotoLink3 \tvarchar2 \t/3\n    //PhotoLink4 \tvarchar2 \t/4\n    //PhotoLink5 \tvarchar2 \t/5\n    //PhotoLink6 \tvarchar2 \t/6\n    //Status\tint\t1:2:,\n    //CreateTime \tdatetime \t\n\n\n    /*\n     GET /api/v1/children/information/{$childuid}\n     return\n     {\n     \"errno\":0,\n     \"error\":\"\",\n     \"data\":{\n     \"childuid\":41000001,\n     \"childname\":\"xxx\",\n     \"childavatarlink\":\"http://xxxxxxx.jpg\",\n     \"timeline\":[\n     {\n     \"timestamp\":1468051200,\n     \"actiontype\":0,\n     \"actionname\":\"signin\",\n     \"actiondata\":{}\n     },\n     {\n     \"timestamp\":146805200,\n     \"actiontype\":1,\n     \"actionname\":\"dining\",\n     \"actiondata\":{\n     \"imgs\":[\"http://xxxxxxxxxx1.jpg\", \"http://xxxxxxxxx2.jpg\",...],\n     \"desc\":\"\"\n     }\n     },\n     ]\n     \"signin\":1468051200,\n     \"name\":\"yyy\",\n     \"avatarlink\":\"http://yyyyyyyyyyy.jpg\",\n     }\n     ]\n     }\n     */\n    function getMsg(childId) {\n        var url = Constants.serverUrl + 'parent/children/information/'+childId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    /*\n     GET /api/v1/parent/childrenlist/{$parentuid}\n     return\n     {\n     \"errno\":0,\n     \"error\":\"\",\n     \"data\":[\n     {\n     \"uid\":41000001,\n     \"name\":\"xxx\",\n     \"avatarlink\":\"http://xxxxxxx.jpg\",\n     },\n     {\n     \"uid\":41000002,\n     \"name\":\"yyy\",\n     \"avatarlink\":\"http://yyyyyyyyyyy.jpg\",\n     }\n     ]\n     }\n     */\n    function getChildren(parentId) {\n        var url = Constants.serverUrl + 'parent/childrenList/'+parentId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getChildSignIn(childId) {\n        var url = Constants.serverUrl + 'parent/children/signin/'+childId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getChildrenMsg(parentId) {\n        var url = Constants.serverUrl + 'parent/children/allInformation/'+parentId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getChildrenSignIn(parentId) {\n        var url = Constants.serverUrl + 'parent/children/allSignin/'+parentId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getChildrenAllInfo(parentId,offset,count){\n        var url = Constants.serverUrl + 'parent/childrenInformation/fetch/'+parentId+'?offset='+offset+'&limitcount='+count;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    }\n\n    function getWechatInfo(wid) {\n        var url = Constants.serverUrl + 'wechat/'+wid;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n\n  }\n\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('depositChildrenModule', [\n    'depositChildrenCtrl',\n    'teacherDepositChildrenCtrl',\n    'depositChildrenRouter',\n    'depositChildrenService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('depositChildrenCtrl', [])\n        .controller('depositChildrenCtrl', function($scope,Constants,StateService,depositChildrenService,AuthService,MessageToaster) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.queryChildren();\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.goTo=function(id,item){\n                //\n                StateService.go('teacherEdit',{cid:id,type:0});\n            };\n\n            vm.queryChildren = function(){\n                depositChildrenService.queryDepositChildren(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.children = data.data;\n                    }else{\n                        MessageToaster.error(\" \"+response.error);\n                    }\n                });\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('depositChildrenRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.depositChildren', {\n        url: \"/depositChildren\",\n        views: {\n          'tab-depositChildren': {\n            templateUrl: 'depositChildren/depositChildren.html',\n            controller: 'teacherDepositChildrenCtrl',\n            controllerAs: 'vm'\n          }\n        }\n      })\n      .state('depositChildren', {\n        url: \"/depositChildren\",\n        templateUrl: 'depositChildren/depositChildren.html',\n        controller: 'depositChildrenCtrl',\n        controllerAs: 'vm'\n      })\n    ;\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('depositChildrenService', [])\n    .factory('depositChildrenService', depositChildrenService);\n\n  function depositChildrenService( $q, $http, Constants, ResultHandler) {\n    'ngInject';\n    var service = {\n      queryDepositChildren:queryDepositChildren\n    };\n\n    //'/deposit/children/:depositid',\n    function queryDepositChildren(id) {\n      var url = Constants.serverUrl + 'deposit/children/'+id;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n\n  }\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('teacherDepositChildrenCtrl', [])\n        .controller('teacherDepositChildrenCtrl', function($scope,Constants,StateService,depositChildrenService,AuthService,MessageToaster,teacherService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                teacherService.queryTeacherDeposit(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        if(data.data!=null&&data.data.length>0) {\n                            vm.teacher = data.data[0];\n                            vm.queryChildren(vm.teacher.depositid);\n                        }\n                    } else {\n                        MessageToaster.error(\" \" + data.error);\n                    }\n                });\n\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.goTo=function(id,item){\n                //\n                StateService.go('teacherEdit',{cid:id,type:0});\n            };\n\n            vm.queryChildren = function(id){\n                depositChildrenService.queryDepositChildren(id).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.children = data.data;\n                    }else{\n                        MessageToaster.error(\" \"+response.error);\n                    }\n                });\n            };\n        });\n}());\n","(function() {\n  \"use strict\";\n  angular.module('eshopEntryModule', [\n    'eshopEntryRouter',\n    'eshopEntryCtrl',\n    'eshopService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('eshopEntryCtrl', [])\n        .controller('eshopEntryCtrl', function($scope, $sce, Constants, $location, StateService) {\n            'ngInject';\n            window.location.href='./eshop/index.html';\n            \n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                //vm.src = $sce.trustAsResourceUrl('./eshop/index.html');//iframe redirect\n                //$location.path(\"myEShop/index.html\");\n                //$location.replace();\n            }\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('eshopEntryRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.eshop', {\n        url: \"/eshop\",\n          views: {\n            'tab-eshop': {\n              templateUrl: 'eshop/eshopEntry.html',\n              controller: 'eshopEntryCtrl',\n              controllerAs: 'vm'\n            }\n          }\n      });\n  }\n}());\n","/**\r\n * API\r\n */\r\n\r\nangular.module('eshopService', [])\n  .service('eshopService', function ($q, $http, $window, Constants) {\r\n\r\n      /**\r\n        * \r\n        * @param {*} userName  \r\n        * @param {*} password  \r\n        * @param {*} email     \r\n        */\r\n      function _signup(userName, password, email) {\r\n          var defer = $q.defer(),\r\n           apiUrl = Constants.eshopApiUrl + 'ecapi.auth.default.signup';\r\n\r\n          var singUpInfo = {\r\n              username: userName,\r\n              password: password,\r\n              email: email\r\n          };\r\n\r\n          $http({\r\n              method: 'POST',\r\n              url: apiUrl,\r\n              params: null,\r\n              data: singUpInfo\r\n          }).success(function (data) {\r\n              if (!!data[\"error_code\"] && data[\"error_code\"] > 0) {\r\n                  defer.reject(data[\"error_desc\"]);\r\n              } else {\r\n                  $window.localStorage.setItem(\"eshop_auth\", JSON.stringify(data));\r\n                  defer.resolve(data);\r\n              }\r\n          }).error(function (err) {\r\n              defer.reject(err);\r\n          });\r\n\r\n          return defer.promise;\r\n      }\r\n\r\n      /**\r\n        * \r\n        * @param {*} userName  \r\n        * @param {*} password  \r\n        */\r\n      function _signin(userName, password) {\r\n          var defer = $q.defer(),\r\n           apiUrl = Constants.eshopApiUrl + 'ecapi.auth.signin';\r\n\r\n          var singInInfo = {\r\n              username: userName,\r\n              password: password,\r\n          };\r\n\r\n          $http({\r\n              method: 'POST',\r\n              url: apiUrl,\r\n              params: null,\r\n              data: singInInfo\r\n          }).success(function (data) {\r\n              if (!!data[\"error_code\"] && data[\"error_code\"] > 0) {\r\n                  defer.reject(data[\"error_desc\"]);\r\n              } else {\r\n                  $window.localStorage.setItem(\"eshop_auth\", JSON.stringify(data));\r\n                  defer.resolve(data);\r\n              }\r\n          }).error(function (err) {\r\n              defer.reject(err);\r\n          });\r\n\r\n          return defer.promise;\r\n      }\r\n\r\n\r\n\r\n      /**\r\n        * \r\n        * @param {*} oldPassword  \r\n        * @param {*} password  \r\n        */\r\n      function _changePassword(oldPassword, password) {\r\n          var defer = $q.defer(),\r\n           apiUrl = Constants.eshopApiUrl + 'ecapi.user.password.update';\r\n\r\n          var changePwdInfo = {\r\n              old_password: oldPassword,\r\n              password: password,\r\n          };\r\n\r\n          var header=null,\r\n              authInfo = $window.localStorage.getItem(\"eshop_auth\");\r\n          if (!!authInfo) {\r\n              authInfo = JSON.parse(authInfo);\r\n              header={\"X-ECAPI-Authorization\":authInfo.token};\r\n          }\r\n\r\n          $http({\r\n              method: 'POST',\r\n              url: apiUrl,\r\n              params: null,\r\n              data: changePwdInfo,\r\n              headers: header\r\n          })\r\n          .success(function (data) {\r\n              if (!!data[\"error_code\"] && data[\"error_code\"] > 0) {\r\n                  defer.reject(data[\"error_desc\"]);\r\n              } else {\r\n                  defer.resolve();\r\n              }\r\n          }).error(function (err) {\r\n              defer.reject(err);\r\n          });\r\n\r\n          return defer.promise;\r\n      }\r\n\r\n      /**\r\n       * \r\n       */\r\n      function _signout() {\r\n          $window.localStorage.removeItem(\"eshop_auth\");\r\n      }\r\n\r\n      return {\r\n          signup: _signup,\r\n          signin: _signin,\r\n          changePassword: _changePassword,\r\n          signout: _signout\r\n      };\r\n  });\r\n","(function() {\n  \"use strict\";\n  angular.module('estimateModule', [\n    'estimateCtrl',\n    'estimateDepositCtrl',\n    'estimateRouter'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('estimateCtrl', [])\n        .controller('estimateCtrl', function($scope, Constants, StateService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            };\n\n            vm.goTo = function(addr){\n                console.log('go to path : '+addr);\n                StateService.go(addr);\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('estimateDepositCtrl', [])\n        .controller('estimateDepositCtrl', function($scope, Constants, StateService, BaiduService, AuthService, childrenSteamService, MessageToaster, $ionicModal) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n\n            $scope.$on('$ionicView.afterEnter', activate);\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.list=[];\n                vm.getChildrenDeposit();\n            };\n\n            vm.getChildrenDeposit = function(){\n              childrenSteamService.getChildrenDeposit(AuthService.getLoginID()).then(function(data) {\n                  if (data.errno == 0) {\n                      console.log(data.data);\n                      var de=data.data;\n                      for(var i=0;i<de.length;i++){\n                        console.log(de[i]);\n                        if(de[i].DepositID!=null){\n                          BaiduService.getDepositInfoWithComments(de[i].DepositID).then(function (depositInfo) {\n                              console.log(depositInfo);\n                              depositInfo.show=false;\n                              vm.list.push(depositInfo);\n                          }, function (err) {\n                              //ionicToast.show('!', 'middle', false, 3000);\n                              //MessageToaster.error(\"!\");\n                          })\n                        }\n                      }\n                  }\n              });\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.gotoEdit=function(did){\n              StateService.go('depositComment', {id: did,type:1});\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('estimateRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n        .state('estimate', {\n          url: \"/estimate\",\n          templateUrl: 'estimate/estimate.html',\n          controller: 'estimateCtrl',\n          controllerAs: 'vm'\n        })\n        .state('myEstimate', {\n          url: \"/myEstimate\",\n          templateUrl: 'estimate/myEstimateDeposit.html',\n          controller: 'estimateDepositCtrl',\n          controllerAs: 'vm'\n        })\n        .state('estimateDeposit', {\n          url: \"/estimateDeposit\",\n          templateUrl: 'estimate/estimateDeposit.html',\n          controller: 'estimateDepositCtrl',\n          controllerAs: 'vm'\n        })\n  }\n}());\n","(function() {\n  \"use strict\";\n  angular.module('exitModule', [\n    'exitCtrl',\n    'exitRouter',\n    'exitService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('exitCtrl', [])\n        .controller('exitCtrl', function($scope, $state, Constants, StateService,exitService,AuthService,MessageToaster,Session) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            vm.text='';//'...';\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.exit=function(){\n                vm.text='...';\n                if(AuthService.getLoginID().substring(0,1)=='2'){\n                  Session.destroy();\n                  StateService.clearAllAndGo(\"login\");\n                }else{\n                  exitService.exit(AuthService.getLoginID()).then(function(data) {\n                      if (data.errno == 0) {\n                          console.log(data.data);\n                          vm.text='';\n                          //\n                          Session.destroy();\n                          StateService.clearAllAndGo(\"register\");\n                          //StateService.clearAllAndGo(AuthService.getNextPath());\n                      }else{\n                          console.log(data.error);\n                          vm.text='';\n                          MessageToaster.error('');\n                      }\n                  },function(error){\n                      console.log(error);\n                      vm.text='';\n                  });\n               }\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('exitRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n        .state('exit', {\n          url: \"/exit\",\n          templateUrl: 'exit/exit.html',\n          controller: 'exitCtrl',\n          controllerAs: 'vm'\n        })\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('exitService', [])\n    .factory('exitService', eService);\n\n  function eService( $q, $http,Constants,ResultHandler) {\n    'ngInject';\n    var service = {\n      exit:exit\n    };\n\n    function exit(id) {\n        var url;\n        if(id.substring(0,1)=='3'){\n          url = Constants.serverUrl + 'exitTeacher/'+id;\n        }else if(id.substring(0,1)=='1'){\n          url = Constants.serverUrl + 'exitDeposit/'+id;\n        }else{\n          return $q.reject('');\n        }\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('helpModule', [\n    'helpCtrl',\n    'helpDocCtrl',\n    'helpRouter'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('helpCtrl', [])\n        .controller('helpCtrl', function($scope, Constants, StateService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.goTo = function(addr){\n                console.log('go to path : '+addr);\n                StateService.go(addr);\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('helpDocCtrl', [])\n        .controller('helpDocCtrl', function($scope, Constants, StateService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.goTo = function(addr){\n                console.log('go to path : '+addr);\n                StateService.go(addr);\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('helpRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n        .state('help', {\n          url: \"/help\",\n          templateUrl: 'help/help.html',\n          controller: 'helpCtrl',\n          controllerAs: 'vm'\n        })\n        .state('helpDoc', {\n          url: \"/helpDoc\",\n          templateUrl: 'help/helpDoc.html',\n          controller: 'helpDocCtrl',\n          controllerAs: 'vm'\n        })\n  }\n}());\n","(function() {\n    \"use strict\";\n    angular.module('LoginModule', [\n        'LoginCtrl',\n        'resetPswCtrl',\n        'LoginRouter',\n        'LoginService'\n    ])\n}());\n","(function () {\r\n    \"use strict\";\n    angular.module('LoginCtrl', [])\n        .controller('LoginCtrl', function (Constants, AuthService, MessageToaster, LoginService, $timeout, $scope, Session, $stateParams, StateService, $ionicModal, Role, $http, eshopService) {\r\n            'ngInject';\n\n            var vm = this;\n            vm.isDev = Constants.ENVIRONMENT == 'dev' ? true : false;\n            vm.type = '2';\n            $scope.$on('$ionicView.beforeEnter', validate);\n            //vm.user = { userId: 18603070911, password: \"82267049\" }\n            function validate() {\r\n                if (Session.getData('userId') && Session.getData('token') && Session.getData('userId') != '-1') {\n                    //AuthService.setSession(response.data.uid, response.data.token, response.data.eshop, response.data.type);\n                    $http.defaults.headers.common.token = Session.getData('token');\n                    StateService.clearAllAndGo(AuthService.getNextPath());\r\n                } else {\r\n                    console.log(\"normal login\");\r\n                }\r\n            }\n\n            //WeuiModalLoading\n            vm.login = function (user) {\n                //test\n                //AuthService.setSession('1', '123', '1');\n                //StateService.go(AuthService.getNextPath());\n                //test\n                if (user) {\r\n                    LoginService.login(user.userId, user.password).then(function (response) {\r\n                        console.log(response);\n                        if (response.errno == 0) {\n\n                            AuthService.setSession(response.data.uid, response.data.token, response.data.eshop, response.data.type);\n                            StateService.clearAllAndGo(AuthService.getNextPath());\n\n                        } else {\r\n                            //MessageToaster.error(response.error);\r\n                            MessageToaster.error(\"\");\r\n                        }\r\n                    },\n                    function (error) {\r\n                        MessageToaster.error(error);\r\n                    }).finally(function () {\n                        //WeuiModalLoading.hide();\n                    });\r\n                } else {\r\n                    MessageToaster.error(\"\");\r\n                }\r\n            }\n\n            vm.reset = function(){\n              StateService.go(\"resetPsw\");\n            }\n\n            vm.visit = function () {\r\n                AuthService.setSession('-1', '-1', '-1', '-1');\n                StateService.clearAllAndGo(AuthService.getNextPath());\r\n            }\n\n            vm.register = function () {\r\n                StateService.clearAllAndGo(\"register\", { type: vm.type });\r\n            }\r\n\n\n        });\r\n}());\n","(function() {\n  'use strict';\n\n  angular.module('LoginRouter', [])\n    .config(LoginRouter);\n\n\n  function LoginRouter($stateProvider,$urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n    .state('login', {\n      url: \"/login\",\n      templateUrl: 'Login/login.html',\n      controller: 'LoginCtrl',\n      controllerAs: 'vm'\n    })\n    .state('resetPsw', {\n      url: \"/resetPsw\",\n      templateUrl: 'Login/resetPsw.html',\n      controller: 'resetPswCtrl',\n      controllerAs: 'vm'\n    });\n    ;\n  }\n}());\n","(function() {\n    'use strict';\n\n    angular.module('LoginService', [])\n        .factory('LoginService', LoginService);\n\n    function LoginService($q, $http, ResultHandler, Constants) {\n        'ngInject';\n        var service = {\n            login: login,\n            logout: logout\n        };\n\n        function logout() {\n\n        }\n\n        function login(userId, password) {\n            var data = {\n                username: userId,\n                password: password,\n                type: 2\n            };\n            var url = Constants.serverUrl + 'parentLogin';\n            console.log(url);\n            return $http({\n                method: 'post',\n                url: url,\n                data: data\n            }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n        }\n\n        return service;\n\n\n    }\n\n}());\n","(function () {\r\n    \"use strict\";\n    angular.module('resetPswCtrl', [])\n        .controller('resetPswCtrl', function (Constants, AuthService, MessageToaster, LoginService, $timeout, $scope, Session, $stateParams, StateService, $ionicModal, Role, $http, parentService) {\r\n            'ngInject';\n\n            var vm = this;\n            $scope.$on('$ionicView.beforeEnter', validate);\n            function validate() {\r\n                vm.mobile = \"\";\n            }\n\n            vm.back = function () {\r\n                StateService.back();\n            }\n\n            vm.reset = function () {\r\n                if (vm.mobile != \"\") {\r\n                parentService.resetPsw(vm.mobile).then(function(data) {\r\n                    console.log(data);\r\n                    if(data.errno==0){\r\n                        StateService.back();\r\n                        MessageToaster.info(\"\");\r\n                    }else{\r\n                        if(data.errno==10009){\r\n                            MessageToaster.error(\"\");\r\n                        }else if(data.errno==10010){\r\n                          MessageToaster.error(\"\");\r\n                        }else if(data.errno==10002){\r\n                          MessageToaster.error(\"\");\r\n                        }else{\r\n                          MessageToaster.error(data.error);\r\n                        }\r\n                    }\r\n                });\r\n              }else{\r\n                MessageToaster.error(\"\");\r\n              }\r\n            }\r\n        });\r\n}());\n","(function() {\n    \"use strict\";\n    angular.module('MapModule', [\n        'MapCtrl',\n        'MapRouter',\n        'MapService'\n    ])\n}());\n","(function() {\n    \"use strict\";\n    angular.module('MapCtrl', [])\n        .controller('MapCtrl', function($scope, $state, $stateParams,Constants, StateService, $ionicModal, $window,BaiduService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n            $scope.mapOpts = {\n                apiKey: 'IGp7UfrinXNxV6IwrQTC0PWoDCQlf0TR',\n                center: {longitude:113.271,latitude:23.1353},\n                keywords: ['','',''],\n                zoom: 16,\n                onlyShowList:false,\n                onMapLoadFailded: function () {\n                    //ionicToast.show('!', 'middle', false, 3000)\n                    console.log('');\n                }\n            };\n            vm.type = $stateParams.type;\n            vm.nav = $stateParams.nav;\n            console.log(\"vm.type = \"+vm.type+\" vm.nav = \"+vm.nav);\n            if (vm.type == 1) {\r\n                $scope.mapOpts.mode = 2;\r\n               // $scope.mapOpts.onlyShowList = true;\r\n            } \n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.goTo = function(addr){\n                console.log(addr);\n                StateService.go(addr);\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('MapRouter', [])\n    .config(MapRouter);\n\n\n  function MapRouter($stateProvider,$urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n    .state('tabs.map', {\n        url: \"/map?:type\",\n      views: {\n        'tab-map': {\n          templateUrl: 'map/map.html',\n          controller: 'MapCtrl',\n          controllerAs: 'vm'\n        }\n      }\n    })\n    .state('orgmap', {\n      url: \"/orgmap?:type&:nav\",\n      templateUrl: 'map/map.html',\n      params:{\n        type:0,\n        nav:false\n      },\n      controller: 'MapCtrl',\n      controllerAs: 'vm'\n    }).state('nearbyorgmap', {\r\n        url: \"/nearbyorgmap?:type&:nav\",\n        templateUrl: 'map/map.html',\n        params: {\r\n            type: 0,\n            nav: false\r\n        },\n        controller: 'MapCtrl',\n        controllerAs: 'vm'\r\n    });\n\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('MapService', [])\n    .factory('MapService', mapService);\n\n  function mapService( $q, $http) {\n    'ngInject';\n    var service = {\n    };\n    return service;\n\n\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('messageModule', [\n    'messageCtrl',\n    'newMessageCtrl',\n    'messageRouter',\n    'messageService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('messageCtrl', [])\n        .controller('messageCtrl', function($scope, Constants, messageService, AuthService, StateService,Session,$ionicModal, $ionicSlideBoxDelegate) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                messageService.getMsg(AuthService.getLoginID()).then(function(data) {\n                    console.log(data);\n                    vm.msg=data.data;\n                });\n            }\n\n            vm.goPhoto=function(msgIndex,index){\n                Session.setData('temp',vm.msg[msgIndex]);\n                StateService.go(\"photo\",{index:index});\n            };\n\n            vm.new=function(id){\n                //\n                StateService.go('newMessage');\n            };\n\n            vm.getImages=function(msg){\n                vm.imgCount=0;\n                if(msg.photolink1!=null && msg.photolink1!=\"\"){\n                    var data={src:msg.photolink1,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.photolink2!=null && msg.photolink2!=\"\"){\n                    var data={src:msg.photolink2,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.photolink3!=null && msg.photolink3!=\"\"){\n                    var data={src:msg.photolink3,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.photolink4!=null && msg.photolink4!=\"\"){\n                    var data={src:msg.photolink4,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.photolink5!=null && msg.photolink5!=\"\"){\n                    var data={src:msg.photolink5,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                if(msg.photolink6!=null && msg.photolink6!=\"\"){\n                    var data={src:msg.photolink6,msg:''};\n                    vm.images[vm.imgCount]=data;\n                    vm.imgCount++;\n                }\n                console.log(vm.images);\n            };\n\n            $ionicModal.fromTemplateUrl('message/image-modal.html', {\n                scope: $scope,\n                animation: 'slide-in-up'\n            }).then(function(modal) {\n                $scope.modal = modal;\n            });\n\n            $scope.openModal = function() {\n                $ionicSlideBoxDelegate.slide(0);\n                $scope.modal.show();\n            };\n\n            $scope.closeModal = function() {\n                $scope.modal.hide();\n            };\n\n            // Cleanup the modal when we're done with it!\n            $scope.$on('$destroy', function() {\n                $scope.modal.remove();\n            });\n            // Execute action on hide modal\n            $scope.$on('modal.hide', function() {\n                // Execute action\n            });\n            // Execute action on remove modal\n            $scope.$on('modal.removed', function() {\n                // Execute action\n            });\n            $scope.$on('modal.shown', function() {\n                console.log('Modal is shown!');\n            });\n\n            // Call this functions if you need to manually control the slides\n            $scope.next = function() {\n                $ionicSlideBoxDelegate.next();\n            };\n\n            $scope.previous = function() {\n                $ionicSlideBoxDelegate.previous();\n            };\n\n            $scope.goToSlide = function(index,msg) {\n                vm.images=[];\n                vm.getImages(msg);\n                $scope.modal.show();\n                $ionicSlideBoxDelegate.slide(index);\n            };\n\n            // Called each time the slide changes\n            $scope.slideChanged = function(index) {\n                $scope.slideIndex = index;\n            };\n\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('messageRouter', [])\n    .config(myRouter);\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.message', {\n        url: \"/message\",\n          views: {\n            'tab-message': {\n              templateUrl: 'message/message.html',\n              controller: 'messageCtrl',\n              controllerAs: 'vm'\n            }\n          }\n      })\n      .state('newMessage', {\n          url: \"/newMessage\",\n          templateUrl: 'message/newMessage.html',\n          controller: 'newMessageCtrl',\n          controllerAs: 'vm'\n      });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('messageService', [])\n    .factory('messageService', messageService);\n\n  function messageService($http,Constants,ResultHandler) {\n    'ngInject';\n    var service = {\n      getMsg:getMsg,\n      newMsg:newMsg,\n      postPhoto:postPhoto\n    };\n\n    function getMsg(depositid) {\n      var url = Constants.serverUrl + 'deposit/allInformation/'+depositid;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function newMsg(data) {\n      var url = Constants.serverUrl + 'deposit/publish';\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    //function postPhoto(data){\n    //  var url = Constants.serverUrl + 'upload?filename=photo'+new Date().getTime()+'.jpg';\n    //  return $http({\n    //    method: 'put',\n    //    url: url,\n    //    data: data\n    //  }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    //};\n    //\"Content-Type\": \"multipart/form-data\"\n   // Content-Type\tmultipart/form-data; boundary=----WebKitFormBoundaryVCKz6Byvi4TF2rpa\n    function postPhoto(data){\n      var fd = new FormData();\n      fd.append('file', data);\n      var url = Constants.dfsUrl + 'upload';\n      console.log(fd);\n      return $http({\n        method: 'post',\n        url: url,\n        data: fd,\n        headers:{\n          'Content-Type':undefined\n        },\n        transformRequest: angular.identity\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n\n    return service;\n\n\n  }\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('newMessageCtrl', [])\n        .controller('newMessageCtrl', function($scope, Constants, messageService, AuthService, StateService, teacherService, MessageToaster) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n            vm.id=AuthService.getLoginID();\n            vm.dailyType='3';\n            vm.desc=\"\";\n            vm.imgPosition=0;\n            vm.imgCal=0;\n            vm.imgs=[];\n            vm.imgshow=[];\n            vm.isClicked=false;\n            vm.btnText='';\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                teacherService.queryTeacherDeposit(vm.id).then(function(data) {\n                    console.log(data);\n                    if(data!=null && data.data !=null && data.data.length>0)vm.deposit=data.data[0];\n                    else MessageToaster.error('');\n                });\n            }\n\n            vm.save=function(which){\n                if (vm.imgs.length > 0) {\n                    vm.isClicked = true;\n                    vm.btnText='';\n                    MessageToaster.info('...');\n                    var data = vm.imgs[which];\n                    if (data != null)messageService.postPhoto(data).then(function (e) {\n                        console.log(e);\n                        console.log(e.data.fileurl);\n                        vm.imgs[vm.imgCal] = e.data.fileurl;\n                        vm.imgCal++;\n                        if (vm.imgCal == vm.imgs.length) {\n                            console.log(vm.imgs);\n                            vm.saveData();\n                        } else {\n                            vm.save(vm.imgCal);\n                        }\n                    });\n                } else {\n                    vm.saveData();\n                }\n            };\n\n            //infotype:1234\n            vm.saveData=function(){\n                var data={\n                    \"depositid\": Number(vm.deposit.depositid),\n                    \"publisherid\": Number(vm.id),\n                    \"infotype\":Number(vm.dailyType),\n                    \"latitude\":0,\n                    \"longitude\":0,\n                    \"description\":vm.desc,\n                    \"imgs\":vm.imgs\n                };\n                messageService.newMsg(data).then(function(data) {\n                    console.log(data);\n                    vm.isClicked=false;\n                    vm.btnText='';\n                    if(data.errno==0){\n                        StateService.back();\n                    }else{\n                        MessageToaster.error(data.error);\n                    }\n                });\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            $scope.fileSelect=function(event){\n                //console.log(event);\n                var files = event.target.files;\n                $scope.fileName=files[0].name;\n                var fileReader = new FileReader();\n                console.log(files);\n                vm.imgs[vm.imgPosition] = files[0];\n                console.log(files[0]);\n                //vm.imgPosition++;\n                $scope.$apply();\n                fileReader.readAsDataURL(files[0]);\n                fileReader.onload = function(e) {\n                    //console.log(e);\n                    vm.imgshow[vm.imgPosition] = this.result;\n                    //console.log(this.result);\n                    vm.imgPosition++;\n                    $scope.$apply();\n                };\n            }\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('depositCommentCtrl', [])\n        .controller('depositCommentCtrl', function($scope, Constants,$stateParams,StateService,AuthService,depositCommentService,MessageToaster) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            vm.item = {\n                \"scores\":{\n                    \"kitchen\":8,\n                    \"food\":8,\n                    \"roadsafety\":8,\n                    \"edufiresafety\":8,\n                    \"teacherresp\":8\n                },\n                \"commenttext\":\"\"\n            };\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                console.log($stateParams);\n                vm.cid = $stateParams.id;\n                vm.type = $stateParams.type;\n                if(vm.type==1)vm.edit();\n                //vm.cid='10000002';//test\n                console.log(\"deposit id = \"+vm.cid);\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.getComment(AuthService.getLoginID(),vm.cid);\n                //vm.getCommentScores(vm.cid);//test\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.cancel=function(){\n                vm.isEditing=false;\n                //data return\n                vm.item=angular.copy(vm.itembackup);\n                vm.itembackup=null;\n            };\n\n            vm.edit=function(){\n                vm.isEditing=true;;\n                vm.itembackup=angular.copy(vm.item);\n            };\n\n            vm.save=function(){\n                //check data\n                vm.item.depositid=vm.cid;\n                vm.item.parentid=AuthService.getLoginID();\n                depositCommentService.saveDepositComment(vm.item).then(function(data) {\n                    console.log(data);\n                    if (data.errno == 0) {\n                        //vm.item = data.data;\n                        vm.isEditing=false;\n                        vm.itembackup=null;\n                        MessageToaster.success(\"\");\n                        vm.getComment(AuthService.getLoginID(),vm.cid);\n                    }else{\n                        console.log('error,get comment fail');\n                        console.log(data);\n                    }\n                });\n\n            };\n\n            vm.getComment=function(pid,did){\n                depositCommentService.getDepositComment(pid,did).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.item = data.data;\n                    }else{\n                        console.log(data);\n                        if(data.errno==10003){\n                            vm.edit();\n                        }else{\n                            console.log('error,get comment fail');\n                        }\n                    }\n                });\n            };\n\n            vm.getCommentScores=function(id){\n                depositCommentService.getTotalDepositScore(id).then(function(data) {\n                        console.log(data);\n                });\n            };\n        });\n}());\n","(function() {\n    'use strict';\n\n    angular.module('depositCommentService', [])\n        .factory('depositCommentService', myService);\n\n    function myService( $q, $http,Constants,ResultHandler) {\n        'ngInject';\n        var service = {\n            saveDepositComment:saveDepositComment,\n            getDepositComment:getDepositComment,\n            getTotalDepositScore:getTotalDepositScore\n        };\n\n\n        //1.\n        //POST\n        //URL: /api/v1/comments/parent/deposit\n        //Request Body:\n        //{\n        //    \"depositid\":10000001,\n        //    \"parentid\": 31000001,\n        //    \"scores\":{\n        //    \"kitchen\":8,\n        //        \"food\":8,\n        //        \"road_safety\":8,\n        //        \"edu_fire_safety\":8,\n        //        \"teacher_responsibility\":8\n        //      },\n        //    \"comments_text\":\"\"\n        //}\n        function saveDepositComment(data) {\n            var url = Constants.serverUrl + 'comments/parent/deposit';\n            return $http({\n                method: 'post',\n                url: url,\n                data: data\n            }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n        };\n\n        //2.\n        //GET\n        //URL: /api/v1/comments/parent/deposit/?parentid=30000001&depositid=10000001\n        //    Response Body:\n        //{\n        //    \"errno\":0,\n        //    \"error\":\"\",\n        //    \"data\":{\n        //    \"scores\":{\n        //        \"kitchen\":8,\n        //            \"food\":8,\n        //            \"road_safety\":8,\n        //            \"edu_fire_safety\":8,\n        //            \"teacher_responsibility\":8\n        //        },\n        //    \"comments_text\":\"\"\n        //    }\n        //}\n        function getDepositComment(pid,did) {\n            var url = Constants.serverUrl + 'comments/parent/deposit?parentid='+pid+\"&depositid=\"+did;\n            return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n        };\n\n        //3.\n        //  =  * 40% +  * 60%\n        //GET\n        //URL: /api/v1/comments/deposit/?depositid=10000001\n        //Response Body:\n        //{\n        //    \"errno\":0,\n        //    \"error\":\"\",\n        //    \"data\":{\n        //        \"scores\":8\n        //    }\n        //}\n        function getTotalDepositScore(did) {\n            var url = Constants.serverUrl + 'comments/deposit?depositid='+did;\n            console.log(url);\n            return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n        };\n\n        return service;\n\n\n    }\n\n}());","(function() {\n  \"use strict\";\n  angular.module('nearbyModule', [\n    'nearbyCtrl',\n    'nearbyListCtrl',\n    'nearbyDepositInfoCtrl',\n    'depositCommentCtrl',\n    'nearbyRouter',\n    'depositCommentService',\n    'nearbyService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('nearbyCtrl', [])\n        .controller('nearbyCtrl', function($scope, Constants,nearbyService,MessageToaster,StateService,CacheData) {\n            'ngInject';\n\n            var vm = this;\n            vm.activated = false;\n            vm.map = null;\n            vm.point = null;\n            vm.city = 'shenzhen';\n            vm.show=false;\n            vm.distance = 5000;\n            vm.changeName = '';\n            $scope.temp={mine:null,baidu:null};\n            vm.list=[];\n\n            var watch = $scope.$watchGroup(['temp.mine','temp.baidu'],function(newValue, oldValue, scope){\n                console.log(newValue);\n                //console.log(oldValue);\n                if(newValue[0]!=null && newValue[1]!=null){\n                    console.log('ok ,do it');\n                    //10000\n                    for(var i=0;i<newValue[0].length;i++){\n                        if(newValue[0][i].Dist < vm.distance*2){\n                            vm.list.push(newValue[0][i]);\n                            var marker = new BMap.Marker(new BMap.Point(newValue[0][i].Longitude,newValue[0][i].Latitude));  // \n                            var number = vm.list.length;\n                            var label=new BMap.Label(''+number);\n                            var margin=4;\n                            if(number>9)margin=0;\n                            label.setStyle({\n                                \"color\":\"white\",\n                                \"background\":\"none\",\n                                \"fontSize\":\"14px\",\n                                \"margin-left\":margin+\"px\",\n                                \"border\":\"0\"});\n                            marker.setLabel(label);\n                            var content=vm.getOrgContent(newValue[0][i]);\n                            marker.setTitle(newValue[0][i].OrgName);\n                            vm.map.addOverlay(marker);\n                            vm.addClickHandler(content,marker);\n                        }\n                    }\n\n                    console.log(vm.list);\n                    //\n                    //\n                    for(var i=0;i<newValue[1].length;i++){\n                            var tmp={\n                                AccountID: i,\n                                Address: newValue[1][i].address,\n                                Dist: vm.map.getDistance(vm.point,newValue[1][i].point).toFixed(0),\n                                FrontDeskLink: \"./img/place.png\",\n                                Latitude: newValue[1][i].point.lat,\n                                Longitude:newValue[1][i].point.lng,\n                                OrgName: newValue[1][i].title\n                            };\n                            vm.list.push(tmp);\n                        var marker = new BMap.Marker(newValue[1][i].point);  // \n                        var number = vm.list.length;\n                        var label=new BMap.Label(''+number);\n                        var margin=4;\n                        var content=vm.getOrgContent(tmp);\n                        if(number>9)margin=0;\n                        label.setStyle({\n                            \"color\":\"white\",\n                            \"background\":\"none\",\n                            \"fontSize\":\"14px\",\n                            \"margin-left\":margin+\"px\",\n                            \"border\":\"0\"});\n                        marker.setLabel(label);\n                        marker.setTitle(newValue[1][i].title);\n                        vm.map.addOverlay(marker);              // \n                        vm.addClickHandler(content,marker);\n                    }\n                    console.log(vm.list);\n                    //tmp\n                    $scope.temp={mine:null,baidu:null};\n                    //vm.show=true;\n                    //\n\n                    //\n                }else if(newValue[0]!=null){\n                    console.log('get babyplan data');\n                }else if(newValue[1]!=null){\n                    console.log('get baidu map data');\n                }\n            });\n\n            vm.addClickHandler=function(content,marker){\n                marker.addEventListener(\"click\",function(e){\n                        vm.openInfo(content,e)}\n                );\n            };\n\n            vm.openInfo=function(content,e){\n                var p = e.target;\n                var point = new BMap.Point(p.getPosition().lng, p.getPosition().lat);\n                var infoWindow = new BMap.InfoWindow(content,{enableCloseOnClick:true});  // \n                vm.map.openInfoWindow(infoWindow,point); //\n            };\n\n            vm.getOrgContent = function(org){\n                var sContent =\n                    \"<h4 style='margin:0 0 5px 0;padding:0.2em 0'>\"+org.OrgName+\"</h4>\" +\n                    \"<img style='margin:4px' id='imgDemo' src='\"+org.FrontDeskLink+\"' width='139' height='104' title='\"+org.OrgName+\"'/>\" +\n                    \"<p style='margin:0;line-height:1.5;font-size:13px;text-indent:2em'>\"+org.Address+\"</p>\" ;\n                if(org.AccountID.length==8){\n                    sContent+=\"<a class='button' href='#nearbyDepositInfo?id=\"+org.AccountID+\"' target='_self' ></a>\";\n                }\n                return sContent;\n            };\n\n            vm.search=function(){\n                vm.list=[];\n                vm.searchOurInfo();\n                vm.searchNearBy(vm.inputData);\n            };\n\n            vm.change=function(){\n                vm.show=!vm.show;\n                if(vm.show){\n                    vm.changeName = '';\n                }else {\n                    vm.changeName = '';\n                }\n            };\n\n            vm.searchOurInfo=function(){\n                if(vm.point != null) {\n                    nearbyService.findNearbyDeposit(vm.point.lng, vm.point.lat).then(function (data) {\n                        if (data.errno == 0) {\n                            console.log(data.data);\n                            //\n                            $scope.temp.mine = data.data;\n                        } else {\n                            console.log('error,find nearby deposit fail');\n                            console.log(data);\n                        }\n                    });\n                }else{\n                    MessageToaster.error(\"\");\n                }\n            };\n\n            //renderOptions: {map: vm.map, panel: \"r-result\"},\n            vm.searchNearBy=function(data){\n                var myPoint=null;\n                if(data!=null) {\n                    var myGeo = new BMap.Geocoder();\n                    // ,\n                    console.log(data);\n                    myGeo.getPoint(data, function (point) {\n                        if (point) {\n                            console.log(\"change address point\");\n                            console.log(point);\n                            myPoint=point;\n                            vm.map.clearOverlays();\n                            vm.map.centerAndZoom(point, 15);\n                            vm.map.addOverlay(new BMap.Marker(point));\n                            vm.map.panTo(point);\n\n                            var local = new BMap.LocalSearch(vm.map, {\n                                renderOptions:{},\n                                onSearchComplete: vm.onSearchComplete\n                            });\n                            local.searchNearby('',myPoint, vm.distance);\n                        } else {\n                            alert(\"!\");\n                        }\n                    }, vm.city);\n                }else{\n                    myPoint=vm.point;\n                }\n                var local = new BMap.LocalSearch(vm.map, {\n                    renderOptions:{},\n                    onSearchComplete: vm.onSearchComplete\n                    });\n                local.searchNearby('',myPoint, vm.distance);\n                //local.search(\"\");\n            };\n\n            vm.onSearchComplete=function(results){\n                console.log(results);\n                $scope.temp.baidu = results.wr;\n            };\n\n            vm.setMapControl=function(map){\n                // \n                var geolocationControl = new BMap.GeolocationControl();\n                geolocationControl.addEventListener(\"locationSuccess\", function(e){\n                    // \n                    var address = '';\n                    address += e.addressComponent.province;\n                    address += e.addressComponent.city;\n                    address += e.addressComponent.district;\n                    address += e.addressComponent.street;\n                    address += e.addressComponent.streetNumber;\n                    alert(\"\" + address);\n\n                });\n                geolocationControl.addEventListener(\"locationError\",function(e){\n                    // \n                    alert(e.message);\n                });\n                map.addControl(geolocationControl);\n\n                //\n                map.addControl(new BMap.MapTypeControl());\n            };\n\n            vm.setBaiduMap=function(){\n                vm.map = new BMap.Map(\"allmap\");    // Map\n                vm.setMapControl(vm.map);\n                //get position\n                var geolocation = new BMap.Geolocation();\n                geolocation.getCurrentPosition(function(r){\n                    if(this.getStatus() == BMAP_STATUS_SUCCESS){\n                        vm.city = r.address.city;\n                        vm.map.setCurrentCity(vm.city);\n                        vm.point = r.point;\n                        vm.map.centerAndZoom(vm.point , 15);  // ,\n                        var myIcon = new BMap.Icon(\"http://api.map.baidu.com/img/markers.png\", new BMap.Size(23, 25), {\n                            offset: new BMap.Size(10, 25), // \n                            imageOffset: new BMap.Size(0, 0 - 10 * 25) // \n                        });\n                        var mk = new BMap.Marker(r.point,{icon:myIcon});\n                        vm.map.addOverlay(mk);\n                        vm.map.panTo(r.point);\n                    } else {\n                        alert('failed'+this.getStatus());\n                    }\n                },{enableHighAccuracy: true})\n            };\n\n            vm.goto=function(item){\n                if(item.AccountID.length!=8){\n                    MessageToaster.error(\"\");\n                }else {\n                    CacheData.putObject(item.AccountID, item);\n                    StateService.go('nearbyDepositInfo', {id: item.AccountID});\n                }\n            };\n\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.setBaiduMap();\n            }\n        });\n\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('nearbyDepositInfoCtrl', [])\n        .controller('nearbyDepositInfoCtrl', function($scope, Constants,nearbyService,CacheData,$stateParams,StateService,organizerService,depositCommentService,parentService,AuthService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                console.log($stateParams);\n                vm.cid = $stateParams.id;\n                console.log(\"id = \"+vm.cid);\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.item =CacheData.getObject(vm.cid);\n                console.log(vm.item);\n                vm.getMoreInfo(vm.cid);\n                vm.getComment(vm.cid);\n                vm.getParentChildren();\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.gotoDepositComment=function(){\n                if(vm.access) {\n                    StateService.go('depositComment', {id: vm.cid});\n                }else{\n                    console.log('not allow');\n                }\n            };\n\n            vm.getParentChildren=function() {\n                parentService.queryChildren(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.deposits = data.data;\n                        for(var i=0;i<vm.deposits.length;i++){\n                            if( vm.cid == vm.deposits[i].depositid){\n                                vm.access=true;\n                                break;\n                            }\n                        }\n\n                    }else{\n                        console.log(data);\n                    }\n                });\n            };\n\n            vm.getMoreInfo=function(id){\n                organizerService.queryDepositInfo(id).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.more = data.data;\n                    }else{\n                        console.log('error,find nearby deposit fail');\n                        console.log(data);\n                    }\n                });\n            };\n\n            vm.getComment=function(id){\n                depositCommentService.getTotalDepositScore(id).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.scores = data.data.scores;\n                    }else{\n                        console.log(data);\n                        if(data.errno==10003){\n                            vm.scores=0;\n                        }else{\n                            console.log('error,get comment fail');\n                        }\n                    }\n                });\n            };\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('nearbyListCtrl', [])\n        .controller('nearbyListCtrl', function($scope, Constants,nearbyService,StateService,CacheData) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            vm.isMapMode=true;\n\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            $scope.offlineOpts = {\n                retryInterval: 10000,\n                txt: 'Offline Mode'\n            };\n            var longitude = 114.2;\n            var latitude = 22.5;\n            $scope.mapOptions = {\n                center: {\n                    longitude: longitude,\n                    latitude: latitude\n                },\n                zoom: 11,\n                city: 'ShenZhen',\n                markers: [{\n                    longitude: longitude,\n                    latitude: latitude,\n                    icon: 'img/mappiont.png',\n                    width: 49,\n                    height: 60,\n                    title: 'Where',\n                    content: ''\n                }]\n            };\n\n            $scope.loadMap = function(map) {\n                console.log(map);//gets called while map instance created\n            };\n\n            vm.loadData=function(longitude,latitude){\n                nearbyService.findNearbyDeposit(longitude,latitude).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.list = data.data;\n                    }else{\n                        console.log('error,find nearby deposit fail');\n                        console.log(data);\n                    }\n                });\n            };\n\n            vm.goto=function(item){\n                CacheData.putObject(item.AccountID,item);\n                StateService.go('nearbyDepositInfo',{id:item.AccountID});\n            };\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.loadData(longitude,latitude);\n            }\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('nearbyRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.nearbyList', {\n        url: \"/nearbyList\",\n          views: {\n            'tab-nearby': {\n              templateUrl: 'nearby/nearbyList.html',\n              controller: 'nearbyListCtrl',\n              controllerAs: 'vm'\n            }\n          }\n      })\n      .state('tabs.nearby', {\n        url: \"/nearby\",\n        views: {\n          'tab-nearby': {\n            templateUrl: 'nearby/nearby.html',\n            controller: 'nearbyCtrl',\n            controllerAs: 'vm'\n          }\n        }\n      })\n      .state('nearbyDepositInfo', {\n        url: \"/nearbyDepositInfo?:id\",\n        params: {\n          id : null\n        },\n        templateUrl: 'nearby/nearbyDepositInfo.html',\n        controller: 'nearbyDepositInfoCtrl',\n        controllerAs: 'vm'\n      })\n      .state('depositComment', {\n        url: \"/depositComment?:id\",\n        params: {\n          id : null,\n          type : 0\n        },\n        templateUrl: 'nearby/depositComment.html',\n        controller: 'depositCommentCtrl',\n        controllerAs: 'vm'\n      });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('nearbyService', [])\n    .factory('nearbyService', myService);\n\n  function myService( $q, $http,Constants,ResultHandler) {\n    'ngInject';\n    var service = {\n      findNearbyDeposit:findNearbyDeposit\n    };\n\n    //http://172.18.1.166/api/v1/nearbyDepositList/113.271/23.1353     \n    function findNearbyDeposit(x,y) {\n      var url = Constants.serverUrl + 'nearbyDepositList/'+x+\"/\"+y;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('organizerModule', [\n    'organizerCtrl',\n    'organizerInfoCtrl',\n    'organizerEditCtrl',\n    'organizerRouter',\n    'organizerService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('organizerCtrl', [])\n        .controller('organizerCtrl', function($scope, Constants, StateService,organizerService,AuthService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.goTo = function(addr){\n                StateService.go(addr);\n            };\n\n            vm.getOrganizer = function(){\n                organizerService.queryOrganizer(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        vm.organizer = data.data;\n                    }\n                });\n            };\n\n            vm.getChildren = function(){\n                organizerService.queryTeacher(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        vm.teacher = data.data;\n                    }\n                });\n            };\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('organizerEditCtrl', [])\n        .controller('organizerEditCtrl', function($scope, $stateParams, Constants, MessageToaster, AuthService, StateService, organizerService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n\n                vm.getOrganizer();\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.save=function(){\n                var data={\n                    contactphone: vm.organizer.ContactPhone,\n                    address:vm.organizer.Address,\n                    contactname:vm.organizer.ContactName,\n                    remark:\"\"\n                };\n                if(angular.isUndefined(vm.organizer.Address)||vm.organizer.Address==null||vm.organizer.Address.length==0){\n                    MessageToaster.error(\"\");\n                    return ;\n                }\n                if(angular.isUndefined(vm.organizer.ContactName)||vm.organizer.ContactName==null||vm.organizer.ContactName.length==0){\n                    MessageToaster.error(\"\");\n                    return ;\n                }\n                if(angular.isUndefined(vm.organizer.ContactPhone)||vm.organizer.ContactPhone==null||vm.organizer.ContactPhone.length==0\n                    ||vm.organizer.ContactPhone.length!=11){\n                    MessageToaster.error(\"\");\n                    return ;\n                }\n                organizerService.updateOrganizer(AuthService.getLoginID(),data).then(function(response) {\n                    console.log(response);\n                    if(response.errno==0)\n                        MessageToaster.success(\"\");\n                    else\n                        MessageToaster.error(\"\");\n                    return ;\n                }).finally(function() {\n                    StateService.back();\n                });\n\n            };\n\n            vm.getOrganizer = function(){\n                organizerService.queryOrganizer(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.organizer = data.data;\n                    }\n                });\n            };\n\n\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('organizerInfoCtrl', [])\n        .controller('organizerInfoCtrl', function($scope,Constants,StateService,organizerService,AuthService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                //vm.organizer = {name:'abc ',contactName:\"sam\",contactPhone:\"15986632761\"};\n                vm.getOrganizer();\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.edit=function(id){\n                //\n                StateService.go('organizerEdit');\n            };\n\n            vm.getOrganizer = function(){\n                organizerService.queryOrganizer(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.organizer = data.data;\n                    }\n                });\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('organizerRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.organizer', {\n        url: \"/organizer\",\n          views: {\n            'tab-orgnize': {\n              templateUrl: 'organizer/organizer.html',\n              controller: 'organizerCtrl',\n              controllerAs: 'vm'\n            }\n          }\n      })\n      .state('organizerInfo', {\n        url: \"/organizerInfo\",\n        templateUrl: 'organizer/organizerInfo.html',\n        controller: 'organizerInfoCtrl',\n        controllerAs: 'vm'\n      })\n      .state('organizerEdit', {\n        url: \"/organizerEdit\",\n        templateUrl: 'organizer/organizerEdit.html',\n        controller: 'organizerEditCtrl',\n        controllerAs: 'vm'\n      })\n    ;\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('organizerService', [])\n    .factory('organizerService', organizerService);\n\n  function organizerService($q, $http,Constants,ResultHandler) {\n      'ngInject';\n      var service = {\n        queryOrganizer:queryOrganizer,\n        queryDepositInfo:queryDepositInfo,\n        updateOrganizer:updateOrganizer\n      };\n\n\n      //GET /api/v1/account/query/deposit/{deposit_accnt_id}\n      //return\n      //{\n      //  \"errno\":0,\n      //  \"error\":\"\",\n      //  \"data\":{\n      //    \"uid\":10000001,\n      //     \n      //  }\n      //}\n      function queryOrganizer(id) {\n        var url = Constants.serverUrl + 'account/query/deposit/'+id;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n      };\n\n\n      //post /api/v1/account/deposit/{deposit_accnt_id}/update\n      //  {\n      //    \"orgname\": \"\",\n      //    \"contactphone\": \"13812345678\",\n      //    \"password\":\"abcd\",\n      //    \"weixinno\":\"\",\n      //    \"address\":\"\",\n      //    \"contactname\":\"\",\n      //    \"remark\":\"\"\n      //  };\n      //return\n      //{\n      //  \"errno\":0,\n      //    \"error\":\"\",\n      //    \"data\":{\n      //      \"uid\":11000001\n      //    }\n      //}\n      function updateOrganizer(id,data) {\n          var url = Constants.serverUrl + 'account/deposit/'+id+'/update';\n          return $http({\n            method: 'post',\n            url: url,\n            data: data\n          }).then(function (response) {\n            return response.data;\n          }, function (error) {\n            return $q.reject(error);\n          });\n      };\n\n      function queryDepositInfo(id) {\n          //http://172.18.1.166/api/v1/depositInfo/fetch/:depositid\n          var url = Constants.serverUrl + 'depositInfo/fetch/'+id;\n          return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n      };\n\n      return service;\n\n\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('parentModule', [\n    'parentCtrl',\n    'parentEditCtrl',\n    'parentRouter',\n    'parentService',\n    'parentInfoCtrl'\n  ]);\n\n}());\n","(function () {\r\n    \"use strict\";\r\n    angular.module('parentCtrl', [])\r\n        .controller('parentCtrl', function ($scope, $q, $cordovaImagePicker, $ionicActionSheet, $ionicListDelegate,\r\n            $ionicPopup, $ionicLoading, Session, Constants, MessageToaster, AuthService, StateService, parentService, childrenSettingService) {\r\n            'ngInject';\r\n            var vm = this;\r\n            vm.activated = false;\r\n            vm.shouldShowDelete = false;\r\n            vm.shouldShowReorder = false;\r\n            vm.listCanSwipe = true\r\n            vm.parentInfo = {\r\n              //name: \"\",\r\n              //nickName: \"\",\r\n              //sex: 1,\r\n              //mobile: '1342222235',\r\n              //childrens: [\r\n              //    {\r\n              //        name: '',\r\n              //        sex:1\r\n              //    },\r\n              //    {\r\n              //        name: '',\r\n              //        sex: 1\r\n              //    }\r\n              //]\r\n            };\r\n\r\n            //\r\n            $scope.$on('$ionicView.afterEnter', activate);\r\n            function activate() {\r\n                vm.activated = true;\r\n                vm.version = Constants.buildID;\r\n                init();\r\n            };\r\n\r\n            //\r\n            function init() {\r\n                var pId = AuthService.getLoginID();\r\n                var queryParentPromise = parentService.queryParent(pId);\r\n                var queryChildrensPromise = parentService.queryChildren(pId);\r\n\r\n                $q.all([queryParentPromise, queryChildrensPromise]).then(function (results) {\r\n                    vm.parentInfo = results[0].data || {},\r\n                   vm.parentInfo.childrens = results[1].data || [];\r\n                }, function (err) {\r\n                    MessageToaster.error(\"!\");\r\n                });\r\n            };\r\n\r\n\r\n            // \r\n            vm.showImageUploadChoices = function (prop) {\r\n                var hideSheet = $ionicActionSheet.show({\r\n                    buttons: [{\r\n                        text: ''\r\n                    }, {\r\n                        text: ''\r\n                    }],\r\n                    titleText: '',\r\n                    cancelText: ' ',\r\n                    cancel: function () {\r\n                    },\r\n                    buttonClicked: function (index) {\r\n                        //\r\n                        if (index == 1) {\r\n                            vm.readalbum(prop);\r\n                        } else if (index == 0) {\r\n                            //\r\n                            vn.takePicture(prop);\r\n                        }\r\n                        return true;\r\n                    }\r\n                });\r\n            };\r\n\r\n            //\r\n            vm.readalbum = function (prop) {\r\n                if (!window.imagePicker) {\r\n                    MessageToaster.error(\"!\");\r\n                    return;\r\n                }\r\n\r\n                var options = {\r\n                    maximumImagesCount: 1,\r\n                    width: 800,\r\n                    height: 800,\r\n                    quality: 80\r\n                };\r\n\r\n                $cordovaImagePicker.getPictures(options).then(function (results) {\r\n                    var uri = results[0],\r\n                        name = uri;\r\n                    if (name.indexOf('/')) {\r\n                        var i = name.lastIndexOf('/');\r\n                        name = name.substring(i + 1);\r\n                    }\r\n\r\n                    vm.uploadimage(uri, prop);\r\n\r\n                }, function (error) {\r\n                    MessageToaster.error(\":!\");\r\n                });\r\n            };\r\n\r\n\r\n            //\r\n            vm.takePicture = function (prop) {\r\n                if (!navigator.camera) {\r\n                    MessageToaster.error(\"!\");\r\n                    return;\r\n                }\r\n\r\n                var options = {\r\n                    quality: 75,\r\n                    targetWidth: 800,\r\n                    targetHeight: 800,\r\n                    saveToPhotoAlbum: false\r\n                };\r\n\r\n                navigator.camera.getPicture(function (imageURI) {\r\n                    vm.uploadimage(imageURI);\r\n                }, function (err) {\r\n                    MessageToaster.error(\":!\");\r\n                }, options);\r\n\r\n            }\r\n\r\n            //\r\n            vm.uploadimage = function (uri) {\r\n                var fileURL = uri;\r\n\r\n                var options = new FileUploadOptions();\r\n                options.fileKey = \"file\";\r\n                options.fileName = fileURL.substr(fileURL.lastIndexOf('/') + 1);\r\n                options.mimeType = \"image/jpeg\";\r\n                options.chunkedMode = true;\r\n\r\n                var ft = new FileTransfer();\r\n                $ionicLoading.show({\r\n                    template: '...'\r\n                });\r\n                ft.upload(fileURL, \"http://wx.zxing-tech.cn/upload\", function (data) {\r\n                    //\r\n                    var resp = JSON.parse(data.response);\r\n                    vm.parentInfo.avatarlink = resp.data.fileurl;\r\n\r\n                    parentService.updateParent(vm.parentInfo).then(function (res) {\r\n                        MessageToaster.error(\"!\");\r\n                        $ionicLoading.hide();\r\n                    }, function (err) {\r\n                        MessageToaster.error(\"!\");\r\n                        $ionicLoading.hide();\r\n                    })\r\n\r\n                }, function (error) {\r\n                    $ionicLoading.hide();\r\n                }, options);\r\n            };\r\n\r\n\r\n            //,\r\n            vm.addChild = function () {\r\n                $ionicListDelegate.closeOptionButtons();\r\n                StateService.go('childrenAdd');\r\n            };\r\n\r\n            //\r\n            vm.editChild = function (child) {\r\n                $ionicListDelegate.closeOptionButtons();\r\n                Session.setData('temp', child);\r\n                StateService.go('childrenEdit', { cid: child.uid, type: 2 });\r\n            };\r\n\r\n            //\r\n            vm.delChild = function (child) {\r\n\r\n                $ionicListDelegate.closeOptionButtons();\r\n\r\n                var confirmPopup = $ionicPopup.confirm({\r\n                    title: ':' + child.name,\r\n                    buttons: [\r\n                        { text: '', type: 'button-positive' },\r\n                        { text: '', type: 'button-assertive', onTap: function (e) { return true } }\r\n                    ]\r\n                });\r\n                confirmPopup.then(function (result) {\r\n                    if (result) {\r\n                        childrenSettingService.deleteChild(child.uid).then(function (data) {\r\n                            console.log(data);\r\n                            if (data.errno == 0) {\r\n\r\n                                console.log(data.data);\r\n\r\n                                var idx = vm.parentInfo.childrens.indexOf(child);\r\n                                vm.parentInfo.childrens.splice(idx, 1);\r\n\r\n                                MessageToaster.error(\"!\");\r\n                            }\r\n                        });\r\n                    } else {\r\n                        console.log('cancel delete');\r\n                    }\r\n                });\r\n            };\r\n\r\n            //\r\n            vm.goTo = function (addr) {\r\n                console.log('go to path : ' + addr);\r\n                StateService.go(addr);\r\n            };\r\n\r\n            //\r\n            vm.back = function () {\r\n                StateService.back();\r\n            };\r\n        });\r\n}());\r\n","(function() {\n    \"use strict\";\n    angular.module('parentEditCtrl', [])\n        .controller('parentEditCtrl', function ($scope, Constants, AuthService, parentService, StateService, MessageToaster) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            vm.parentInfo = {\r\n                //name: \"\",\r\n                //nickName: \"\",\r\n                //sex: 1,\r\n                //mobile: '1342222235'\r\n            };\n\n            //\n            $scope.$on('$ionicView.afterEnter', activate);\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                init();\n            }\n\n            //\n            function init() {\r\n                var pId = AuthService.getLoginID();\r\n                var queryParentPromise = parentService.queryParent(pId).then(function (res) {\r\n                    vm.parentInfo = res.data || {}\r\n                }, function (err) {\r\n                    MessageToaster.error(\"!\");\r\n                });\r\n            }\n\n            //\n            vm.save = function () {\n                if (!vm.parentInfo.name) {\r\n                    MessageToaster.error(\"!\");\r\n                    return;\r\n                }\n\n                parentService.updateParent(vm.parentInfo).then(function (res) {\r\n                    vm.back();\r\n                    MessageToaster.info(\"!\");\r\n                }, function (err) {\r\n                    MessageToaster.error(\"!\");\n                })\n            };\n\n            //\n            vm.back = function () {\r\n                StateService.back();\r\n            };\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('parentInfoCtrl', [])\n        .controller('parentInfoCtrl', function ($scope, $q,$window, $cordovaImagePicker, $ionicActionSheet, $ionicListDelegate,\n            $ionicPopup, $ionicLoading, Session, Constants, MessageToaster, AuthService, StateService, parentService, childrenSettingService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            vm.shouldShowDelete = false;\r\n            vm.shouldShowReorder = false;\r\n            vm.listCanSwipe = true\n            vm.parentInfo = {\r\n                //name: \"\",\r\n                //nickName: \"\",\r\n                //sex: 1,\r\n                //mobile: '1342222235',\r\n                //childrens: [\r\n                //    {\r\n                //        name: '',\r\n                //        sex:1\r\n                //    },\r\n                //    {\r\n                //        name: '',\r\n                //        sex: 1\r\n                //    }\r\n                //]\r\n            };\n\n            //\n            $scope.$on('$ionicView.afterEnter', activate);\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                init();\n            };\n\n            //\n            function init() {\r\n                var pId = AuthService.getLoginID();\r\n                var queryParentPromise = parentService.queryParent(pId);\r\n                var queryChildrensPromise = parentService.queryChildren(pId);\r\n\r\n                $q.all([queryParentPromise, queryChildrensPromise]).then(function (results) {\r\n                    vm.parentInfo = results[0].data || {},\r\n                   vm.parentInfo.childrens = results[1].data || [];\r\n                }, function (err) {\r\n                    MessageToaster.error(\"!\");\r\n                });\r\n            };\n\n\n            // \n            vm.showImageUploadChoices = function (prop) {\r\n                var hideSheet = $ionicActionSheet.show({\r\n                    buttons: [{\r\n                        text: ''\r\n                    }, {\r\n                        text: ''\r\n                    }],\n                    titleText: '',\n                    cancelText: ' ',\n                    cancel: function () {\n                    },\n                    buttonClicked: function (index) {\n                        // \n                        if (index == 1) {\r\n                            vm.readalbum(prop);\r\n                        } else if (index == 0) {\n                            // \n                            vm.takePicture(prop);\r\n                        }\n                        return true;\r\n                    }\r\n                });\r\n            };\n\n            //\n            vm.readalbum = function (prop) {\r\n                if (!navigator.camera) {\r\n                    MessageToaster.error(\"!\");\r\n                    return;\r\n                }\n\n                var options = {\r\n                    maximumImagesCount: 1,\n                    sourceType: 2,\n                    targetWidth: 80,\n                    targetHeight: 80,\n                    allowEdit: true,\n                    quality: 80\r\n                };\n                navigator.camera.getPicture(function (imageURI) {\r\n                    vm.uploadImage(imageURI);\r\n                }, function (error) {\r\n                    // MessageToaster.error(\":!\");\r\n                }, options);\r\n            };\n\n\n            // \n            vm.takePicture = function (prop) {\r\n\r\n                if (!navigator.camera) {\r\n                    MessageToaster.error(\"!\");\r\n                    return;\r\n                }\n\n                var options = {\r\n                    quality: 100,\n                    targetWidth: 80,\n                    targetHeight: 80,\n                    allowEdit: true,\n                    saveToPhotoAlbum: true\r\n                };\n\n\n                navigator.camera.getPicture(function (imageURI) {\n                    vm.uploadImage(imageURI);\r\n                }, function (err) {\r\n                  // MessageToaster.error(\":!\");\r\n                }, options);\n            }\n\n            // \n            vm.uploadImage = function (uri) {\r\n                var fileURL = uri;\n\n                var options = new FileUploadOptions();\n                options.fileKey = \"file\";\n                options.fileName = fileURL.substr(fileURL.lastIndexOf('/') + 1);\n                options.mimeType = \"image/jpeg\";\n                options.chunkedMode = true;\n\n                var ft = new FileTransfer();\n                $ionicLoading.show({\r\n                    template: '...'\r\n                });\n                ft.upload(fileURL, \"http://wx.zxing-tech.cn/upload\", function (data) {\n                    // \n                    var resp = JSON.parse(data.response);\n                    vm.parentInfo.avatarlink = resp.data.fileurl;\n\n                    parentService.updateParent(vm.parentInfo).then(function (res) {\r\n                        MessageToaster.info(\"!\");\r\n                        $ionicLoading.hide();\r\n                    }, function (err) {\r\n                        MessageToaster.error(\"!\");\r\n                        $ionicLoading.hide();\r\n                    })\r\n\r\n                }, function (error) {\r\n                    MessageToaster.error(\"!\");\r\n                    $ionicLoading.hide();\r\n                }, options);\r\n            };\n\n\n            //,\n            vm.addChild = function () {\n                $ionicListDelegate.closeOptionButtons();\n                StateService.go('childrenAdd');\r\n            };\n\n            //\n            vm.editChild = function ( child) {\n                $ionicListDelegate.closeOptionButtons();\n                Session.setData('temp', child);\n                StateService.go('childrenEdit', { cid: child.uid, type: 2 });\r\n            };\n\n            //\n            vm.delChild = function (child) {\n               \n                $ionicListDelegate.closeOptionButtons();\n\n                var confirmPopup = $ionicPopup.confirm({\r\n                    title: ':' + child.name,\n                    buttons: [\n                        { text: '', type: 'button-positive' },\n                        { text: '', type: 'button-assertive', onTap: function (e) { return true } }\n                    ]\r\n                });\n                confirmPopup.then(function (result) {\r\n                    if (result) {\r\n                        childrenSettingService.deleteChild(child.uid).then(function (data) {\r\n                            console.log(data);\n                            if (data.errno == 0) {\r\n\r\n                                console.log(data.data);\r\n\r\n                                var idx = vm.parentInfo.childrens.indexOf(child);\r\n                                vm.parentInfo.childrens.splice(idx, 1);\r\n\r\n                                MessageToaster.info(\"!\");\r\n                            }\r\n                        });\r\n                    } else {\r\n                        console.log('cancel delete');\r\n                    }\r\n                });\r\n            };\n\n            //\n            vm.goTo = function (addr) {\r\n                console.log('go to path : ' + addr);\n                StateService.go(addr);\r\n            };\n\n            //\n            vm.back=function(){\n                StateService.back();\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('parentRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n    .state('parentInfo', {\n        url: \"/parentInfo\",\n        templateUrl: 'parent/parentInfo.html',\n        controller: 'parentInfoCtrl',\n        controllerAs: 'vm'\n      })\n      .state('parent', {\n        url: \"/parent\",\n        templateUrl: 'parent/parent.html',\n        controller: 'parentCtrl',\n        controllerAs: 'vm'\n      })\n      .state('parentEdit', {\n        url: \"/parentEdit\",\n        templateUrl: 'parent/parentEdit.html',\n        controller: 'parentEditCtrl',\n        controllerAs: 'vm'\n      })\n    ;\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('parentService', [])\n    .factory('parentService', parentService);\n\n  function parentService( $q, $http, Session, Constants, ResultHandler) {\n    'ngInject';\n    var service = {\n      queryParent:queryParent,\n      updateParent:updateParent,\n      queryChildren:queryChildren,\n      resetPsw:resetPsw\n    };\n\n    //-----HTTP Header => Authorization: Bearer-{$token}-----//\n\n    //GET /api/v1/account/query/parent/{parent_accnt_id}\n    //return\n    //{\n    //  \"errno\":0,\n    //  \"error\":\"\",\n    //  \"data\":{\n    //  \"uid\":10000001,\n    //      \"name\":\"\",\n    //      \"sex\":1,\n    //      \"mobile\":\"18612345678\",\n    //      \"nick\":\"sam\"\n    //  }\n    //}\n    function queryParent(id) {\n        console.log($http.defaults.headers);\n        var url = Constants.serverUrl + 'account/query/parent/'+id;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function updateParent(data) {\n        var url = Constants.serverUrl + 'account/parent/' + data.uid;\n        return $http({\n            method: 'post',\n            url: url,\n            data: data\n        }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n\n\n    //GET /api/v1/account/query/parentChildren/{parent_accnt_id}\n    //return\n    //{\n    //  \"errno\":0,\n    //  \"error\":\"\",\n    //  \"data\":[\n    //    {\n    //      \"uid\":10000001,\n    //      \"relationship\":1,\n    //      \"name\":\"\",\n    //      \"sex\":1,\n    //      \"fingerfeature\":\"xxxxx\",\n    //      \"remark\":\"xxxx\"\n    //    },\n    //    ...\n    //  ]\n    //}\n    function queryChildren(id) {\n      var url = Constants.serverUrl + 'account/query/parentChildren/'+id;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function resetPsw(mobile){\n     // var authInfo = JSON.parse(Session.getData(\"eshop_auth\"));\n     // console.log(authInfo);\n     // var data = {eshopToken:authInfo.token};\n        var url = Constants.serverUrl + 'account/resetPsw/' + mobile;\n      return $http({\n        method: 'post',\n        url: url\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n  };\n}());\n","(function() {\n    \"use strict\";\n    angular.module('depositListctrl', [])\n        .controller('depositListctrl', function($scope,Constants,StateService,$ionicListDelegate,$ionicPopup,AuthService,parentService,vipBuyService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.getRecords();\n            };\n\n            vm.getDeposits = function(){\n                parentService.queryChildren(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.deposits = [];\n                        var array=[];\n                        //deposits\n                        data.data.forEach(function(item){\n                            var obj={};\n                            obj.depositid=item.depositid;\n                            obj.orgname=item.orgname;\n                            //console.log(array);\n                            // console.log(item.depositid);\n                            if(!array.includes(item.depositid)&& item.depositid ){\n                                array[array.length]=item.depositid;\n                                vm.deposits[vm.deposits.length]=obj;\n                            }\n                            //\n                        });\n                    }\n                });\n            };\n\n            vm.getRecords = function () {\n                vipBuyService.getOrders(AuthService.getLoginID()).then(function(data) {\n                    var isDO=false;\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        data.data.forEach(function(item){\n                            if(item.PayStatus==1){\n                                if(!isDO) {\n                                    vm.getDeposits();\n                                    isDO = true;\n                                }\n                            }\n\n                        });\n                        return false;\n                    }\n                });\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.goToDepositComment=function(did){\n                StateService.go('depositComment', {id: did});\n            };\n\n        });\n}());\n","(function() {\n  \"use strict\";\n  angular.module('orderModule', [\n    'orderCtrl',\n    'depositListctrl',\n    'orderRouter',\n    'orderService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('orderCtrl', [])\n        .controller('orderCtrl', function($scope, Constants, StateService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            console.log(\"tabs come\");\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.goTo=function(where){\n                StateService.go(where);\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('orderRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.order', {\n        url: \"/order\",\n          views: {\n            'tab-order': {\n              templateUrl: 'order/order.html',\n              controller: 'orderCtrl',\n              controllerAs: 'vm'\n            }\n          }\n      })\n      .state('orders', {\n        url: \"/orders\",\n        templateUrl: 'order/order.html',\n        controller: 'orderCtrl',\n        controllerAs: 'vm'\n      })\n      .state('vipOrg', {\n        url: \"/vipOrg\",\n        templateUrl: 'order/depositList.html',\n        controller: 'depositListctrl',\n        controllerAs: 'vm'\n      })\n    ;\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('orderService', [])\n    .factory('orderService', orderService);\n\n  function orderService( $q, $http) {\n    'ngInject';\n    var service = {\n    };\n    return service;\n\n\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('profileModule', [\n    'profileCtrl',\n    'profileRouter',\n    'profileService'\n  ]);\n\n}());\n","(function () {\r\n    \"use strict\";\n    angular.module('profileCtrl', [])\n            .controller('profileCtrl', function ($scope, $q, $window, $cordovaImagePicker, $ionicActionSheet, $ionicListDelegate,\n           $ionicPopup, $ionicLoading, Session, Constants, MessageToaster, AuthService, StateService, parentService, childrenSettingService) {\r\n\n                'ngInject';\n                var vm = this;\n                vm.activated = false;\n                $scope.$on('$ionicView.afterEnter', activate);\n\n                function activate() {\r\n                    vm.activated = true;\n                    vm.version = Constants.buildID;\n                    vm.getParent();\n                    vm.getChildren();\r\n                };\n\n                vm.getParent = function () {\r\n                    parentService.queryParent(AuthService.getLoginID()).then(function (data) {\r\n                        if (data.errno == 0) {\r\n                            console.log(data.data);\n                            vm.parent = data.data;\r\n                        }\r\n                    });\r\n                };\n\n                vm.getChildren = function () {\r\n                    parentService.queryChildren(AuthService.getLoginID()).then(function (data) {\r\n                        if (data.errno == 0) {\r\n                            console.log(data.data);\n                            vm.children = data.data;\n                            var children = \"\";\n                            for (var i = 0; i < vm.children.length; i++) {\r\n                                if (children == \"\")\n                                    children += vm.children[i].name\n                                else {\r\n                                    children += \",\" + vm.children[i].name\r\n                                }\r\n                            }\n                            vm.childrenName = children;\r\n                        }\r\n                    });\r\n                };\n\n                vm.goTo = function (addr, params) {\r\n                    console.log('go to path : ' + addr);\n                    if (params) console.log(params);\n                    StateService.go(addr, params);\r\n                };\n\n\n\n                // \n                vm.showImageUploadChoices = function (prop) {\r\n                    var hideSheet = $ionicActionSheet.show({\r\n                        buttons: [{\r\n                            text: ''\r\n                        }, {\r\n                            text: ''\r\n                        }],\n                        titleText: '',\n                        cancelText: ' ',\n                        cancel: function () {\r\n                        },\n                        buttonClicked: function (index) {\n                            // \n                            if (index == 1) {\r\n                                vm.readalbum(prop);\r\n                            } else if (index == 0) {\n                                // \n                                vm.takePicture(prop);\r\n                            }\n                            return true;\r\n                        }\r\n                    });\r\n                };\n\n                //\n                vm.readalbum = function (prop) {\r\n                    if (!navigator.camera) {\r\n                        MessageToaster.error(\"!\");\r\n                        return;\r\n                    }\n\n                    var options = {\r\n                        maximumImagesCount: 1,\n                        sourceType: 2,\n                        targetWidth: 80,\n                        targetHeight: 80,\n                        allowEdit: true,\n                        quality: 80\r\n                    };\n                    navigator.camera.getPicture(function (imageURI) {\r\n                        vm.uploadImage(imageURI);\r\n                    }, function (error) {\r\n                        // MessageToaster.error(\":!\");\r\n                    }, options);\r\n                };\n\n\n                // \n                vm.takePicture = function (prop) {\r\n\r\n                    if (!navigator.camera) {\r\n                        MessageToaster.error(\"!\");\r\n                        return;\r\n                    }\n\n                    var options = {\r\n                        quality: 100,\n                        targetWidth: 80,\n                        targetHeight: 80,\n                        allowEdit: true,\n                        saveToPhotoAlbum: true\r\n                    };\n\n\n                    navigator.camera.getPicture(function (imageURI) {\r\n                        vm.uploadImage(imageURI);\r\n                    }, function (err) {\r\n                        // MessageToaster.error(\":!\");\r\n                    }, options);\r\n                }\n\n                // \n                vm.uploadImage = function (uri) {\r\n                    var fileURL = uri;\n\n                    var options = new FileUploadOptions();\n                    options.fileKey = \"file\";\n                    options.fileName = fileURL.substr(fileURL.lastIndexOf('/') + 1);\n                    options.mimeType = \"image/jpeg\";\n                    options.chunkedMode = true;\n\n                    var ft = new FileTransfer();\n                    $ionicLoading.show({\r\n                        template: '...'\r\n                    });\n                    ft.upload(fileURL, \"http://wx.zxing-tech.cn/upload\", function (data) {\n                        // \n                        var resp = JSON.parse(data.response);\n                        vm.parentInfo.avatarlink = resp.data.fileurl;\n\n                        parentService.updateParent(vm.parentInfo).then(function (res) {\r\n                            MessageToaster.info(\"!\");\r\n                            $ionicLoading.hide();\r\n                        }, function (err) {\r\n                            MessageToaster.error(\"!\");\r\n                            $ionicLoading.hide();\r\n                        })\r\n\r\n                    }, function (error) {\r\n                        MessageToaster.error(\"!\");\r\n                        $ionicLoading.hide();\r\n                    }, options);\r\n                };\r\n\n\n            });\r\n}());\n","(function() {\n  'use strict';\n\n  angular.module('profileRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.profile', {\n        url: \"/profile\",\n          views: {\n            'tab-profile': {\n              templateUrl: 'profile/profile.html',\n              controller: 'profileCtrl',\n              controllerAs: 'vm'\n            }\n          }\n      });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('profileService', [])\n    .factory('profileService', profileService);\n\n  function profileService( $q, $http) {\n    'ngInject';\n    var service = {\n    };\n    return service;\n\n\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('photoModule', [\n    'photoCtrl',\n    'photoRouter'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('photoCtrl', [])\n        .controller('photoCtrl', function($scope, Constants,$stateParams,Session,StateService,$ionicSlideBoxDelegate,$timeout) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.msg=Session.getData('temp');\n                vm.images=[];\n                vm.imgCount=0;\n                if(vm.msg.photolink1!=null && vm.msg.photolink1!=\"\"){\n                    vm.images[vm.imgCount]=vm.msg.photolink1;\n                    vm.imgCount++;\n                }\n                if(vm.msg.photolink2!=null && vm.msg.photolink2!=\"\"){\n                    vm.images[vm.imgCount]=vm.msg.photolink2;\n                    vm.imgCount++;\n                }\n                if(vm.msg.photolink3!=null && vm.msg.photolink3!=\"\"){\n                    vm.images[vm.imgCount]=vm.msg.photolink3;\n                    vm.imgCount++;\n                }\n                if(vm.msg.photolink4!=null && vm.msg.photolink4!=\"\"){\n                    vm.images[vm.imgCount]=vm.msg.photolink4;\n                    vm.imgCount++;\n                }\n                if(vm.msg.photolink5!=null && vm.msg.photolink5!=\"\"){\n                    vm.images[vm.imgCount]=vm.msg.photolink5;\n                    vm.imgCount++;\n                }\n                if(vm.msg.photolink6!=null && vm.msg.photolink6!=\"\"){\n                    vm.images[vm.imgCount]=vm.msg.photolink6;\n                    vm.imgCount++;\n                }\n                console.log(vm.images);\n                vm.index=$stateParams.index;\n                console.log(vm.index);\n                //vm.image=vm.images[vm.index];\n                $timeout(function(){\n                    $scope.slider.slideTo(vm.index);\n                    $scope.slider.updateLoop();\n                    //$ionicSlideBoxDelegate.enableSlide(true);\n                    //$ionicSlideBoxDelegate.slide(vm.index);\n                    //console.log($ionicSlideBoxDelegate.currentIndex()+\" - \"+$ionicSlideBoxDelegate.slidesCount());\n                }, 300);\n\n            }\n            vm.back=function(){\n                StateService.back();\n            };\n\n            $scope.options = {\n                loop: false\n            }\n\n            $scope.$on(\"$ionicSlides.sliderInitialized\", function(event, data){\n                // data.slider is the instance of Swiper\n                console.log(data);\n                $scope.slider = data.slider;\n            });\n\n            $scope.$on(\"$ionicSlides.slideChangeStart\", function(event, data){\n                console.log('Slide change is beginning');\n                //console.log(event);\n                //console.log(data);\n            });\n\n            $scope.$on(\"$ionicSlides.slideChangeEnd\", function(event, data){\n                // note: the indexes are 0-based\n                //console.log(event);\n                console.log($scope.slider.activeIndex+\" - \"+$scope.slider.previousIndex);\n                //$scope.activeIndex = data.activeIndex;\n                //$scope.previousIndex = data.previousIndex;\n                //console.log('Slide from '+data.previousIndex +' to '+data.activeIndex);\n            });\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('photoRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n        .state('photo', {\n          url: \"/photo?:index\",\n          params:{\n            index:0\n          },\n          templateUrl: 'photo/photo.html',\n          controller: 'photoCtrl',\n          controllerAs: 'vm'\n        })\n      ;\n  }\n}());\n","(function() {\n  \"use strict\";\n  angular.module('registerModule', [\n    'registerCtrl',\n    'registerRouter',\n    'registerService'\n  ]);\n\n}());\n","(function () {\r\n    \"use strict\";\n    angular.module('registerCtrl', [])\n        .controller('registerCtrl', function ($scope, Constants, StateService, Session, AuthService, registerService, LoginService, eshopService, $stateParams, MessageToaster) {\r\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            vm.count = 0;\n            vm.isLock = false;\n            vm.org = { mobile: '', password: '' };\n            //uid\n            vm.user = { gendar: '1', name: '', mobile: '', password: '', pswConfirm: '', wechat: AuthService.getWechatId(), email: '' };\n            vm.error = null;\n            vm.isParent = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\r\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.type = $stateParams.type;\n                //console.log(\"user type = \"+vm.type);\n                //if(vm.type==2) {\n                //    vm.roleType = '2';\n                //    vm.isParent = true;\n                //}else{\n                //    vm.roleType = '3';\n                //    vm.isParent = false;\n                //}\n\n                vm.roleType = '2';\n                vm.isParent = true;\r\n\n            };\n\n            $scope.$watch('vm.user.name', function (newValue, oldValue) {\r\n                if (vm.user.name != undefined) {\r\n                    if (vm.user.name.length < 1) {\r\n                        vm.error = '';\r\n                    } else {\r\n                        vm.error = null;\r\n                    }\r\n                } else {\r\n                    vm.error = '';\r\n                }\r\n            });\n            $scope.$watch('vm.user.mobile', function (newValue, oldValue) {\r\n                if (vm.user.mobile != undefined) {\r\n                    if (vm.user.mobile.length != 11) {\r\n                        vm.error = '11';\r\n                    } else {\r\n                        vm.error = null;\r\n                    }\r\n                } else {\r\n                    vm.error = '';\r\n                }\r\n            });\n            $scope.$watch('vm.user.email', function (newValue, oldValue) {\r\n                if (vm.user.email != undefined) {\r\n                    if (vm.user.email.search(/^\\w+((-\\w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+$/) != -1) {\r\n                        vm.error = null;\r\n                    } else {\r\n                        vm.error = '';\r\n                    }\r\n                } else {\r\n                    vm.error = '';\r\n                }\r\n            });\n            $scope.$watch('vm.user.password', function (newValue, oldValue) {\r\n                if (vm.user.password != undefined) {\r\n                    if (vm.user.password.length < 6) {\r\n                        vm.error = '6';\r\n                    } else {\r\n                        vm.error = null;\r\n                    }\r\n                } else {\r\n                    vm.error = '';\r\n                }\r\n            });\n            $scope.$watch('vm.user.pswConfirm', function (newValue, oldValue) {\r\n                if (vm.user.pswConfirm != undefined) {\r\n                    if (vm.user.password != '' && vm.user.password.length >= 6 && vm.user.pswConfirm != vm.user.password) {\r\n                        vm.error = '';\r\n                    } else {\r\n                        vm.error = null;\r\n                    }\r\n                } else {\r\n                    vm.error = '';\r\n                }\r\n            });\n\n            vm.check = function () {\r\n                if (vm.error != null) {\r\n                    vm.error = '!';\n                    return false;\r\n                }\n                else {\r\n                    if (vm.user.password.length >= 6 && vm.user.pswConfirm.length >= 6\n                        && vm.user.name.length > 0 && vm.user.mobile.length == 11\n                        && vm.user.email.length > 0 && vm.user.email.length > 3\n                        && vm.user.password == vm.user.pswConfirm) return true;\n                    else vm.error = '!';\r\n                }\r\n            };\n\n\n            function login(userid, pwd) {\r\n                LoginService.login(userid, pwd).then(function (response) {\r\n                    console.log(response);\n                    if (response.errno == 0) {\n\n                        //ESHOP\n                        eshopService.signin(userid, pwd).then(function (data) {\r\n                            AuthService.setSession(response.data.uid, response.data.token, data, response.data.type);\n                            StateService.clearAllAndGo(AuthService.getNextPath());\r\n                        }, function (ex) {\r\n                            MessageToaster.error(ex);\r\n                        })\r\n                    } else {\r\n                        MessageToaster.error(response.error);\r\n                    }\r\n                },\n               function (error) {\r\n                   MessageToaster.error(error);\r\n               }).finally(function () {\n                   //WeuiModalLoading.hide();\n               });\n            };\n\n\n            vm.register = function () {\n                //\n                if (!vm.check()) return;\n                //\n                vm.user.weixinno = '';\n                vm.user.wechat = '';\n\n                registerService.registerParent(vm.user).then(function (data) {\r\n                    console.log(data);\n                    if (data.errno == 0) {\r\n                        LoginService.login(vm.user.mobile, vm.user.password).then(function (response) {\r\n                            if (response.errno == 0) {\r\n                                AuthService.setSession(response.data.uid, response.data.token, data.data.eshop, response.data.type);\n                                StateService.clearAllAndGo(AuthService.getNextPath());\r\n                            } else {\r\n                                MessageToaster.error(response.error);\r\n                            }\r\n                        },function (error) {\r\n                              MessageToaster.error(error);\r\n                          });\r\n\r\n                    } else {\r\n                        //vm.error = data.error;\r\n                        if (data.errno == 10008) {\r\n                            MessageToaster.error(\"\");\r\n                        } else {\r\n                            MessageToaster.error(\"\");\r\n                        }\r\n                    }\r\n                });\n\n                //,token,\n                //Session.userId=\"70000103\";\n                //Session.token='111';\n                //Session.userRole='2';\n                //var userId=\"70000103\";\n                //var token='111';\n                //var userRole='2';\n                //AuthService.setSession(userId, token, userRole);\n\n                //StateService.clearAllAndGo(AuthService.getNextPath());\n                //if(vm.roleType=='1') {\n                //    StateService.go('organizerEdit');\n                //}else if(vm.roleType=='2'){\n                //    StateService.go('parentEdit');\n                //}else if(vm.roleType=='3'){\n                //    StateService.go('teacherEdit');\n                //}\n            };\r\n        });\r\n}());\n","(function() {\n  'use strict';\n\n  angular.module('registerRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('register', {\n        url: \"/register?type\",\n        params:{\n          type:1\n        },\n        templateUrl: 'register/register.html',\n        controller: 'registerCtrl',\n        controllerAs: 'vm'\n      });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('registerService', [])\n    .factory('registerService', registerService);\n\n  function registerService($http, Constants, ResultHandler) {\n    'ngInject';\n    var service = {\n      registerTeacher:registerTeacher,\n      registerParent:registerParent,\n      bindTeacher:bindTeacher,\n      bindOrganizer:bindOrganizer\n    };\n\n    //POST URL: /api/v1/account/register/parent\n    //{\n    //  \"weixinno\": \"xxxxxx\",\n    //    \"name\": \"\",\n    //    \"sex\":1,\n    //    \"mobile\": \"13812345678\",\n    //    \"nick\":\"\",\n    //    \"password\":\"abcd\"\n    //}\n    //return\n    //{\n    //  \"errno\":0,\n    //    \"error\":\"\",\n    //    \"data\":{\n    //       \"uid\":21000001\n    //    }\n    //}\n    function registerParent(user) {\n      console.log(user);\n      var data = {\n        \"weixinno\": user.wechat,\n        \"name\": user.name,\n        \"sex\": user.gendar,\n        \"mobile\": user.mobile,\n        \"password\" : user.password,\n        \"email\":user.email\n      };\n      var url = Constants.serverUrl + 'account/parentRegister';\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    //POST URL: /api/v1/account/register/teacher\n    //{\n    //  \"name\":\"\",\n    //    \"sex\":1,\n    //    \"mobile\":\"value\",\n    //    \"weixinno\":\"laoshi\",\n    //    \"teachage\":5,\n    //    \"age\":29,\n    //    \"photolink\":\"url\",\n    //    \"password\":\"123456\"\n    //}\n    //return\n    //{\n    //  \"errno\":0,\n    //    \"error\":\"\",\n    //    \"data\":{\n    //       \"uid\":30000001\n    //    }\n    //}\n    function registerTeacher(user) {\n      var data = {\n        \"weixinno\": user.wechat,\n        \"name\": user.name,\n        \"sex\": user.gendar,\n        \"mobile\": user.mobile,\n        \"password\" : user.password\n      };\n      var url = Constants.serverUrl + 'account/register/teacher';\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function bindTeacher(user,wechatId) {\n      var data = {\n        \"weixinno\": wechatId,\n        \"account\": user.account,\n        \"password\" : user.password\n      };\n      var url = Constants.serverUrl + 'account/teacher/bind';\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function bindOrganizer(org,wechatId) {\n      var data = {\n        \"weixinno\": wechatId,\n        \"account\": org.account,\n        \"password\" : org.password\n      };\n      var url = Constants.serverUrl + 'account/deposit/bind';\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n\n    return service;\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('tabsModule', [\n    'tabsCtrl',\n    'tabsRouter',\n    'tabsService'\n  ]);\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('tabsCtrl', [])\n    .controller('tabsCtrl', function($scope,tabsService,StateService,AuthService) {\n      'ngInject';\n      var vm = this;\n      vm.activated = false;\n\n      vm.who=AuthService.getUserRole();\n      //vm.slideBoxImgs = homeService.getSlideBoxImgs();\n      //vm.homeOptions = homeService.getHomeOptions();\n      vm.goState = StateService.go;\n      $scope.$on('$ionicView.afterEnter', activate);\n      function activate() {\n        vm.activated = true;\n      }\n      function goState(state){\n        StateService.go(state);\n      }\n    });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('tabsRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs', {\n        url: '/tabs',\n        abstract: true,\n        templateUrl: 'tabs/tabs.html',\n        controller: 'tabsCtrl',\n        controllerAs: 'vm'\n      })\n  }\n\n}());\n","(function() {\n    'use strict';\n\n    angular.module('tabsService', [])\n        .factory('tabsService', tabsService);\n\n    function tabsService($q, $http) {\n        'ngInject';\n        var service = {\n\n        };\n\n        return service;\n\n\n    }\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('aboutCtrl', [])\n        .controller('aboutCtrl', function($scope, Constants, Session,StateService, MessageToaster, parentService, AuthService ) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.name = Constants.appTitle;\n                vm.company = Constants.company;\n            }\n\n            vm.goTo = function(addr){\n                console.log('go to path : '+addr);\n                StateService.go(addr);\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('changePswCtrl', [])\n        .controller('changePswCtrl', function($scope, Constants, Session,StateService, MessageToaster, parentService, AuthService ) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.goTo = function(addr){\n                console.log('go to path : '+addr);\n                StateService.go(addr);\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            $scope.$watch('vm.originPsw', function(newValue, oldValue) {\n              if(vm.originPsw!=undefined) {\n                  if (vm.originPsw.length < 6) {\n                      vm.error = '6';\n                  } else {\n                      vm.error = null;\n                  }\n              }else{\n                  vm.error = '';\n              }\n            });\n            $scope.$watch('vm.password', function(newValue, oldValue) {\n                if(vm.password!=undefined) {\n                    if (vm.password.length < 6) {\n                        vm.error = '6';\n                    } else {\n                        vm.error = null;\n                    }\n                }else{\n                    vm.error = '';\n                }\n            });\n            $scope.$watch('vm.pswConfirm', function(newValue, oldValue) {\n                if(vm.pswConfirm!=undefined) {\n                    if (vm.password != '' && vm.password.length >= 6  && vm.pswConfirm != vm.password) {\n                        vm.error = '';\n                    } else {\n                        vm.error = null;\n                    }\n                }else{\n                    vm.error = '';\n                }\n            });\n\n            vm.check = function(){\n                if(vm.error!=null){\n                    vm.error = '!';\n                    return false;\n                }\n                else {\n                    if(vm.password.length >= 6 && vm.pswConfirm.length >= 6 && vm.originPsw.length >= 6 && vm.password == vm.pswConfirm){\n                        vm.error = '';\r\n                        return true;\r\n                    }\n                    else vm.error = '!';\n                }\n            };\n\n            vm.changePsw = function() {\n                if(!vm.check())return;\n                var json={\n                  uid:AuthService.getLoginID(),\n                  password:vm.pswConfirm\n                };\n                parentService.updateParent(json).then(function (res) {\n                    //vm.back();\n                    Session.destroy();\n                    StateService.clearAllAndGo(\"login\");\n                    MessageToaster.info(\"!\");\n                }, function (err) {\n                    MessageToaster.error(\"!\");\n                })\n            };\n\n        });\n}());\n","(function() {\n  \"use strict\";\n  angular.module('settingsModule', [\n    'settingsCtrl',\n    'changePswCtrl',\n    'aboutCtrl',\n    'settingsRouter'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('settingsCtrl', [])\n        .controller('settingsCtrl', function($scope, Constants, StateService, $ionicPopup, MessageToaster) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.goTo = function(addr){\n                console.log('go to path : '+addr);\n                StateService.go(addr);\n            };\n\n            vm.askClearCache = function() {\n              var confirmPopup = $ionicPopup.confirm({\n                  title: '',\n                  buttons: [\n                      {text: '', type: 'button-positive'},\n                      {text: '', type: 'button-assertive',onTap: function(e) { return true}}\n                  ]\n              });\n              confirmPopup.then(function(result) {\n                  if(result) {\n                      console.log('confirm to clear cache');\n                      console.log(result);\n                      //delete(id);\n                      window.CacheClear(function(data){\n                        console.log(data);\n                        MessageToaster.info(''+JSON.stringify(data));\n                      }, function(errordata){\n                        console.log(errordata);\n                        MessageToaster.error(''+JSON.stringify(errordata));\n                      });\n                  } else {\n                      console.log('cancel delete');\n                  }\n              });\n            };\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.changePsw=function(){\n                StateService.go('changePsw');\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('settingsRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n        .state('settings', {\n          url: \"/settings\",\n          templateUrl: 'settings/settings.html',\n          controller: 'settingsCtrl',\n          controllerAs: 'vm'\n        })\n        .state('about', {\n          url: \"/about\",\n          templateUrl: 'settings/about.html',\n          controller: 'aboutCtrl',\n          controllerAs: 'vm'\n        })\n        .state('changePsw', {\n          url: \"/changePsw\",\n          templateUrl: 'settings/changePsw.html',\n          controller: 'changePswCtrl',\n          controllerAs: 'vm'\n        })\n  }\n}());\n","(function() {\n    \"use strict\";\n    angular.module('buyAppCtrl', [])\n        .controller('buyAppCtrl', function($scope, $state, $stateParams, Constants, StateService, vipBuyService, AuthService, MessageToaster, Session) {\n            'ngInject';\n            var vm = this;\n\n            vm.activated = false;\n            vm.information = \"\";\n\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                console.log($stateParams);\n                vm.index = $stateParams.index;\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.query(vm.index);\n                Wechat.isInstalled(function (installed) {\n                    console.log(\"Wechat installed: \" + (installed ? \"Yes\" : \"No\"));\n                }, function (reason) {\n                    console.log(':Wechat.isInstalled is fail '+reason);\n                    alert(\"\" + reason);\n                });\n            }\n\n\n            vm.query = function(id){\n                console.log(\" index = \"+id);\n                var temp=JSON.parse(Session.getData('temp'));\n                console.log(temp);\n                if(temp.businessid == id)\n                    vm.item=temp;\n                console.log(vm.item);\n            };\n\n            vm.back = function(){\n                StateService.back();\n                Session.rmData('temp');\n            };\n\n            vm.getEndDate = function(payTime,numOfDays){\n                var date=new Date(payTime.substring(0,4),Number(payTime.substring(4,6))-1,payTime.substring(6,8),payTime.substring(8,10),payTime.substring(10,12),payTime.substring(14,16));\n                date.setTime(date.getTime()+numOfDays*24*60*60*1000);\n                return date.getTime();\n                //return \"\"+date.getFullYear()+(date.getMonth()+1)+(date.getDate()>9?date.getDate():('0'+date.getDate()))+'235959';\n            };\n\n            vm.pay=function(){\n                var parentId=AuthService.getLoginID();\n                //alert(parentId);\n                vipBuyService.createOrder2(parentId, vm.index)\n                    .then(function (response) {\n                        //alert(JSON.stringify(response));\n                        if (response.errno == 0) {\n                            var result=response.data;\n                            var orderId=result.orderId;\n                            //vm.information = JSON.stringify(result);\n                            var params = {\n                                mch_id: result.partnerid, // merchant id\n                                prepay_id: result.prepayid, // prepay id\n                                nonce: result.noncestr, // nonce\n                                timestamp: result.timestamp, // timestamp\n                                sign: result.pay_sign, // signed string\n                            };\n\n                            //alert(JSON.stringify(params));\n                            Wechat.sendPaymentRequest(params, function () {\n                                //alert(\"Success\");\n                                //check order make sure user had pay the order ready.\n                                //alert(\"orderId=\"+orderId);\n                                vipBuyService.checkOrder(orderId).then(\n                                    function(result) {\n                                        //{\"errno\":0,\"error\":\"\",\n                                        // \"data\":{\"orderId\":\"139630530220161103152842\",\"wechatOrderId\":\"4003682001201611038611986947\",\n                                        // \"totalFee\":\"1\",\"payState\":\"SUCCESS\",\"payTime\":\"20161103152851\"}}\n                                        //alert(JSON.stringify(result));\n                                        if(result.errno == 0 ){\n                                            MessageToaster.info(\"\");\n                                            StateService.clearAllAndGo(AuthService.getNextPath());\n                                        }\n                                      },\n                                      function (reason) {\n                                          alert(\"checkOrder error \"+JSON.stringify(reason));\n                                      }\n                                  );\n                            }, function (reason) {\n                                //alert(\"Failed: \" + reason);\n                                MessageToaster.error(reason);\n                            });\n                          }else{\n                            MessageToaster.error(response.error);\n                          }\n                    }, function (error) {\n                        //alert(JSON.stringify(error));\n                        vm.information += \"  \" + JSON.stringify(error);\n                    });\n            };\n\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('buyCtrl', [])\n        .controller('buyCtrl', function($scope, $state, $stateParams, Constants, StateService, vipBuyService, AuthService, MessageToaster, Session,Wechat) {\n            'ngInject';\n            var vm = this;\n\n            vm.activated = false;\n            //vm.wechatPayReady = false;\n            vm.information = \"\";\n\n            // $scope.onBridgeReady=function () {\n            //     //alert('wechat ok');\n            //     vm.wechatPayReady=true;\n            // };\n\n            // if (typeof WeixinJSBridge == \"undefined\"){\n            //     console.log(\"not found WeixinJSBridge\");\n            //     if(document.addEventListener){\n            //         document.addEventListener('WeixinJSBridgeReady', $scope.onBridgeReady, false);\n            //     }else if (document.attachEvent){\n            //         document.attachEvent('WeixinJSBridgeReady', $scope.onBridgeReady);\n            //         document.attachEvent('onWeixinJSBridgeReady', $scope.onBridgeReady);\n            //     }\n            //     console.log(\"add event listener for WeixinJSBridge\");\n            // }else{\n            //     console.log(\"WeixinJSBridge exist\");\n            //     $scope.onBridgeReady();\n            // }\n\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                console.log($stateParams);\n                vm.index = $stateParams.index;\n\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.query(vm.index);\n                vm.wechatInit();\n            }\n\n            vm.wechatInit = function(){};\n\n            vm.query = function(id){\n                console.log(\" index = \"+id);\n                var temp=Session.getData('temp');\n                if(temp.businessid == id)\n                    vm.item=temp;\n\n            };\n\n            vm.back = function(){\n                StateService.back();\n                Session.rmData('temp');\n            };\n\n            vm.getEndDate = function(payTime,numOfDays){\n                var date=new Date(payTime.substring(0,4),Number(payTime.substring(4,6))-1,payTime.substring(6,8),payTime.substring(8,10),payTime.substring(10,12),payTime.substring(14,16));\n                date.setTime(date.getTime()+numOfDays*24*60*60*1000);\n                return date.getTime();\n                //return \"\"+date.getFullYear()+(date.getMonth()+1)+(date.getDate()>9?date.getDate():('0'+date.getDate()))+'235959';\n            };\n\n            vm.pay=function(){\n                var parentId=AuthService.getLoginID();\n                alert(parentId);\n                vipBuyService.createOrder2(parentId, vm.item.businessid)\n                    .then(function (response) {\n                        var result=response.data;\n                        var orderId=result.orderId;\n                        //vm.information = JSON.stringify(result);\n                        //alert(JSON.stringify(result));\n                        var params = {\n                            partnerid: result.partnerid, // merchant id\n                            prepayid: result.prepay_id, // prepay id\n                            noncestr: result.nonceStr, // nonce\n                            timestamp: \"\"+result.timeStamp, // timestamp\n                            sign: result.paySign // signed string\n                        };\n                        alert(JSON.parse(params));\n                        Wechat.sendPaymentRequest(params, function (res) {\n                            alert(\"Success\");\n                            alert(JSON.prase(res));\n                            var msg = res.err_msg;\n                            //alert(msg);\n\n                            if(msg == \"get_brand_wcpay_request:ok\" ) {\n                                //\n                                //check order make sure user had pay the order ready.\n                                vipBuyService.checkOrder(orderId).then(\n                                    function(result) {\n                                        //{\"errno\":0,\"error\":\"\",\n                                        // \"data\":{\"orderId\":\"139630530220161103152842\",\"wechatOrderId\":\"4003682001201611038611986947\",\n                                        // \"totalFee\":\"1\",\"payState\":\"SUCCESS\",\"payTime\":\"20161103152851\"}}\n                                        alert(JSON.stringify(result));\n                                        if(result.errno == 0 ){\n                                            MessageToaster.info(\"\");\n                                            StateService.clearAllAndGo(AuthService.getNextPath());\n                                        }\n                                      },\n                                      function (reason) {\n                                          alert(\"checkOrder error \"+JSON.stringify(reason));\n                                      }\n                                  );\n                              //}else if(msg == \"get_brand_wcpay_request:cancel\"){\n                              } else if(msg.endsWith(\"cancel\")) {\n                                  //alert(\"\");\n                                  //vm.information=\"\";\n                                  MessageToaster.info(\"\");\n                              //}else if(msg == \"get_brand_wcpay_request:fail\"){\n                              } else if(msg.endsWith(\"fail\")) {\n                                  alert(\"\");\n                              }\n\n                        }, function (reason) {\n                            alert(\"Failed sendPaymentRequest: \" + reason);\n                            vm.information += \"  \" + reason;\n                        });\n                      }, function (reason) {\n                            alert(\"Failed createOrder2: \" + reason);\n                            vm.information += \"  \" + reason;\n                      }\n                    );\n                        /*\n                        if(vm.wechatPayReady){\n                            WeixinJSBridge.invoke(\n                                'getBrandWCPayRequest',\n                                {\n                                    \"appId\":result.appId,\n                                    \"timeStamp\":\"\"+result.timeStamp,\n                                    \"nonceStr\":result.nonceStr,\n                                    \"package\":\"prepay_id=\"+result.prepay_id,\n                                    \"signType\":\"MD5\",\n                                    \"paySign\":result.paySign\n                                },\n                                function(res){\n                                    //alert(JSON.stringify(res));\n                                    var msg = res.err_msg;\n                                    //alert(msg);\n\n                                    if(msg == \"get_brand_wcpay_request:ok\" ) {\n                                        //\n                                        //check order make sure user had pay the order ready.\n                                        vipBuyService.checkOrder(orderId).then(\n                                            function(result) {\n                                                //{\"errno\":0,\"error\":\"\",\n                                                // \"data\":{\"orderId\":\"139630530220161103152842\",\"wechatOrderId\":\"4003682001201611038611986947\",\n                                                // \"totalFee\":\"1\",\"payState\":\"SUCCESS\",\"payTime\":\"20161103152851\"}}\n                                                //alert(JSON.stringify(result));\n                                                if(result.errno == 0 ){\n                                                    MessageToaster.info(\"\");\n                                                    StateService.clearAllAndGo(AuthService.getNextPath());\n                                                }\n                                                //var status = result.data.payState;\n                                                /*\n                                                var payTime=result.data.payTime;\n                                                var endDate=vm.getEndDate(payTime,vm.item.numofdays);\n                                                if(status === 'SUCCESS'){\n                                                    //\n                                                    vipBuyService.updatePayedOrder(parentId,orderId,payTime,endDate).then(\n                                                        function(updateResult) {\n                                                            //alert(\"updatePayedOrder sucess \"+JSON.stringify(updateResult));\n                                                            //vm.information += \" udpate success \";\n                                                            //\n                                                            if(updateResult.errno===0) {\n                                                                MessageToaster.info(\"\");\n                                                                StateService.clearAllAndGo(AuthService.getNextPath());\n                                                            }\n                                                        },\n                                                        function(error) {\n                                                            alert(\"updatePayedOrder error \"+JSON.stringify(error));\n                                                        }\n                                                    );\n                                                }\n                                                */\n                                          /*  },\n                                            function (reason) {\n                                                alert(\"checkOrder error \"+JSON.stringify(reason));\n                                            }\n                                        );\n                                    //}else if(msg == \"get_brand_wcpay_request:cancel\"){\n                                    }else if(msg.endsWith(\"cancel\")){\n                                        //alert(\"\");\n                                        //vm.information=\"\";\n                                        MessageToaster.info(\"\");\n                                    //}else if(msg == \"get_brand_wcpay_request:fail\"){\n                                    }else if(msg.endsWith(\"fail\")){\n                                        alert(\"\");\n                                    }\n                                }\n                            );\n                        }\n                    }, function (error) {\n                        //alert(JSON.stringify(error));\n                        vm.information += \"  \" + error;\n                    });\n                    */\n          //  };\n\n        };\n    });\n}());\n","(function() {\n  \"use strict\";\n  angular.module('vipBuyModule', [\n    'vipBuyCtrl',\n    'buyCtrl',\n    'buyAppCtrl',\n    'vipBuyRouter',\n    'vipBuyService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('vipBuyCtrl', [])\n        .controller('vipBuyCtrl', function($scope, $state, Constants, StateService,vipBuyService,AuthService,MessageToaster,Session) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            vm.isSelected=-1;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.getMenu();\n            }\n\n            vm.gotoBuy = function(){\n                var where = vm.menu[vm.isSelected];\n                Session.setData('temp',JSON.stringify(where));\n                StateService.go('buy',{index:where.businessid});\n            };\n\n            vm.back = function(){\n                StateService.back();\n            };\n\n            vm.getMenu = function(){\n                vipBuyService.getMenu().then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.menu = data.data;\n                    }\n                });\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('vipBuyRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n        .state('vipBuy', {\n          url: \"/vipBuy\",\n          templateUrl: 'vipBuy/vipBuy.html',\n          controller: 'vipBuyCtrl',\n          controllerAs: 'vm'\n        })\n        .state('buy', {\n          url: \"/buy?:index\",\n          params:{\n              index:0\n          },\n          templateUrl: 'vipBuy/buy.html',\n          controller: 'buyAppCtrl',\n          controllerAs: 'vm'\n        });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('vipBuyService', [])\n    .factory('vipBuyService', myService);\n\n  function myService($http,Constants,ResultHandler) {\n    'ngInject';\n\n    var service = {\n      getMenu:getMenu,\n      getOrders:getOrders,\n      checkOrder:checkOrder,\n      createOrder:createOrder,\n      createOrder2:createOrder2,\n      updatePayedOrder:updatePayedOrder\n    };\n\n    function getMenu(){\n      var url = Constants.serverUrl + 'charge/fetch/menuList';\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getOrders(parentId) {\n      var url = Constants.serverUrl + 'charge/order/fetch/'+parentId;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function checkOrder(orderId){\n      var url = Constants.serverUrl + 'wechatPay/order/'+orderId;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function createOrder(parentId,wxId,goodsId){\n      var data = {\n        goodsId:goodsId,\n        userId:parentId,\n        wxId:wxId\n      };\n      var url = Constants.serverUrl + 'wechatPay/order';\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function createOrder2(parentId,goodsId){\n      var data = {\n        goodsId:goodsId,\n        userId:parentId\n      };\n      var url = Constants.serverUrl + 'wechatPay/appOrder';\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function updatePayedOrder(parentId,orderId,payTime,endDate){\n        //  \"cutofftime\":endDate, //\n        var data = {\n        \"paystatus\":1,\n        \"paytime\":payTime,\n        \"orderid\":orderId\n      };\n      var url = Constants.serverUrl + 'charge/order/update/'+parentId;\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('teacherModule', [\n    'teacherCtrl',\n    'teacherEditCtrl',\n    'teacherRouter',\n    'teacherService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('teacherCtrl', [])\n        .controller('teacherCtrl', function($scope,Constants,StateService,$ionicListDelegate,$ionicPopup,teacherService,AuthService,CacheData) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.getOrganizerTeachers();\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.goTo=function(id,item){\n                //\n                $ionicListDelegate.closeOptionButtons();\n                CacheData.putObject(id,item);\n                StateService.go('teacherEdit',{cid:id,type:0});\n            };\n\n            vm.new=function(){\n                //\n                $ionicListDelegate.closeOptionButtons();\n                StateService.go('teacherEdit',{type:1});\n            };\n\n            vm.edit=function(id){\n                //\n                $ionicListDelegate.closeOptionButtons();\n                StateService.go('teacherEdit',{cid:id,type:2});\n            };\n\n            vm.del=function(item){\n                //\n                $ionicListDelegate.closeOptionButtons();\n\n                var confirmPopup = $ionicPopup.confirm({\n                    title: ':'+item.name,\n                    buttons: [\n                        {text: '', type: 'button-positive'},\n                        {text: '', type: 'button-assertive',onTap: function(e) { return true}}\n                    ]\n                });\n                confirmPopup.then(function(result) {\n                    if(result) {\n                        console.log('confirm to del this teacher '+item.sid);\n                        //delete(id);\n                    } else {\n                        console.log('cancel delete');\n                    }\n                });\n            };\n\n            vm.getOrganizerTeachers = function(){\n                teacherService.queryTeacher(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.teachers = data.data;\n                    }\n                });\n            };\n        });\n}());\n","(function() {\n    \"use strict\";\n    angular.module('teacherEditCtrl', [])\n        .controller('teacherEditCtrl', function($scope, $stateParams, Constants, StateService, teacherService, AuthService, CacheData,MessageToaster) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n\n            vm.query = function(id){\n                vm.item =CacheData.getObject(vm.cid);\n                console.log(vm.item);\n                //vm.item = {name:'girl B',gendar:'2',sid:id,remark:'abcdefg'};\n            };\n\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                console.log($stateParams);\n                vm.cid = $stateParams.cid;\n                //0:query 1:create 2:update\n                vm.type = $stateParams.type;\n\n                if(vm.type=='0')vm.isEditing = false;\n                else vm.isEditing = true;\n\n                vm.activated = true;\n                vm.version = Constants.buildID;\n\n                if(vm.type!='1')vm.query(vm.cid);\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.save=function(){\n                console.log(vm.item);\n                //create\n                teacherService.createTeacher(vm.item,AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        //var userId = data.data.uid;\n                        //wxlogin(vm.user.wechat);\n                        StateService.back();\n                    }else{\n                        //MessageToaster.error(data.error);\n                        MessageToaster.error('');\n                    }\n                },function(data){\n                    MessageToaster.error(data);\n                });\n            };\n\n\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('teacherRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('teacher', {\n        url: \"/teacher\",\n        templateUrl: 'teacher/teacher.html',\n        controller: 'teacherCtrl',\n        controllerAs: 'vm'\n      })\n      .state('teacherEdit', {\n        url: \"/teacherEdit?:cid&:type\",\n        params: {\n          cid : null,\n          type : '0'\n        },\n        templateUrl: 'teacher/teacherEdit.html',\n        controller: 'teacherEditCtrl',\n        controllerAs: 'vm'\n      })\n    ;\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('teacherService', [])\n    .factory('teacherService', teacherService);\n\n  function teacherService( $q, $http, Constants, ResultHandler) {\n    'ngInject';\n    var service = {\n      createTeacher:createTeacher,\n      updateTeacher:updateTeacher,\n      queryTeacher:queryTeacher,\n      queryTeacherDeposit:queryTeacherDeposit\n    };\n\n\n    //POST /api/v1/account/teacher/{$teacher_accnt_id}/update //\n    //Request Body: { \"name\":\"\", \"sex\":1, \"mobile\":\"13300001111\", \"teachage\":5, \"age\":29, \"photolink\":\"url\", \"password\":\"123456\" }\n    //Response Body: { \"errno\":0, \"error\":\"\", \"data\":{ \"uid\":30000001 } }\n    function updateTeacher(teacher, teacherId) {\n      var data = {};\n      if(teacher.name!=null)data.name=teacher.name;\n      if(teacher.sex!=null)data.sex=teacher.sex;\n      if(teacher.mobile!=null)data.mobile=teacher.mobile;\n      if(teacher.teachage!=null)data.teachage=teacher.teachage;\n      if(teacher.age!=null)data.age=teacher.age;\n      if(teacher.url!=null)data.photolink=teacher.url;\n      if(teacher.password!=null)data.password=teacher.password;\n      if(teacher.remark!=null)data.remark=teacher.remark;\n\n      var url = Constants.serverUrl + \"account/teacher/\"+teacherId+\"/update\";\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    }\n\n    //POST /api/v1/deposit/{$deposit_accnt_id}/addteacher\n    //Request Body: { \"mobile\":\"13300001111\" }\n    //Response Body: { \"errno\":0, \"error\":\"\", \"data\":{ \"teacheruid\":30000001, \"passwd\":\"123456\" } }\n    function createTeacher(teacher, orgId) {\n      var data = {\n        \"name\":teacher.name,\n        \"sex\":teacher.sex,\n        \"mobile\":teacher.mobile,\n        \"teachage\":teacher.teachage,\n        \"age\":teacher.age\n      };\n      var url = Constants.serverUrl + \"deposit/\"+orgId+\"/addteacher\";\n      return $http({\n        method: 'post',\n        url: url,\n        data: data\n      }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    //GET /api/v1/account/query/depositTeacher/{deposit_accnt_id}\n    //return\n    //{\n    //  \"errno\":0,\n    //  \"error\":\"\",\n    //  \"data\":[\n    //    {\n    //      \"uid\":10000001,\n    //      \"name\":\"\",\n    //      \"sex\":1,\n    //      \"mobile\":\"15032145678\",\n    //      \"teachage\":10,\n    //      \"age\":32,\n    //      \"photolink\":\"xxxxx\"\n    //      \"remark\":\"xxxx\"\n    //    },\n    //    \n    //  ]\n    //}\n    function queryTeacher(id) {\n      var url = Constants.serverUrl + 'account/query/depositTeacher/'+id;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n\n    function queryTeacherDeposit(id) {\n      var url = Constants.serverUrl + 'deposit/teacher/'+id;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('teacherSettingModule', [\n    'teacherSettingCtrl',\n    'teacherSettingRouter',\n    'teacherSettingService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('teacherSettingCtrl', [])\n        .controller('teacherSettingCtrl', function($scope, $state, Constants, StateService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.goTo = function(addr){\n                console.log(addr);\n                StateService.go(addr);\n            };\n\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('teacherSettingRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.teacherSetting', {\n        url: \"/teacherSetting\",\n          views: {\n            'tab-teacherSetting': {\n              templateUrl: 'teacherSetting/teacherSetting.html',\n              controller: 'teacherSettingCtrl',\n              controllerAs: 'vm'\n            }\n          }\n      });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('teacherSettingService', [])\n    .factory('teacherSettingService', myService);\n\n  function myService( $q, $http) {\n    'ngInject';\n    var service = {\n    };\n    return service;\n\n\n  }\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('WxLoginModule', [\n        'WxLoginCtrl',\n        'WxLoginRouter',\n        'WxLoginService'\n    ]).run(function($rootScope, Session, StateService,$location,tools) {\n        $rootScope.$on('$stateChangeStart', function(event, next) {\n          console.log(\"stateChangeStart\");\n          console.log(next);\n\n          if (next.url.indexOf('wxlogin')>0 ) {\n              console.log(\"wxlogin\");\n              //alert($location.absUrl());\n              var url = $location.absUrl();\n              //ticketangualrhttp://10.20.68.73:8080/casOauth/?ticket=ST-16-HzIjcAlxbKvlyJQAX2XI-cas01.sustc.edu.cn#/login\n              var start = url.indexOf('user=') + 5;\n              var end = url.indexOf('&type=');\n              if(!start<=5 && end <= 0){\n                StateService.clearAllAndGo('login');\n              }else{\n                //http://10.20.68.73:8080/casOauth?ticket=ST-16-HzIjcAlxbKvlyJQAX2XI-cas01.sustc.edu.cn\n                //http://10.20.68.73:8080/casOauth/#/login?ticket=ST-16-HzIjcAlxbKvlyJQAX2XI-cas01.sustc.edu.cn\n                if (end == -1 || end < start) end = url.length;\n                console.log(\"wxlogin 1\" + start + \" - \" + end);\n                var myUser = url.toString().substring(start, end);\n                console.log(\"get user = \" + myUser);\n\n                var start = url.indexOf('&type=') + 6;\n                var end = url.indexOf('#/wxlogin');\n                if (end == -1 || end < start) end = url.length;\n                console.log(\"wxlogin 2\" + start + \" - \" + end);\n                var myType = url.toString().substring(start, end);\n                console.log(\"get type = \" + myType);\n                StateService.clearAllAndGo('wxlogin',{user:myUser,type:myType});\n              }\n          }else if(next.url.indexOf('login')>0){\n              console.log(\"login\");\n          }else if(next.url.indexOf('register')>0){\n              //,\n              console.log(\"register\");\n          }else if(next.url.indexOf('resetPsw')>0){\n              console.log(\"resetPsw\");\n          }else{\n            if (Session.getData('userId') && Session.getData('token')) {\n                //login successed\n            } else {\n                console.log(\"user not login with \");\n                event.preventDefault();\n                if (tools.getAgent() != 'wx')\n                    StateService.clearAllAndGo('login');\n                else\n                    StateService.clearAllAndGo('wxlogin');\n            }\n          }\n        });\n\n    });\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('WxLoginCtrl', [])\n        .controller('WxLoginCtrl', function(Constants, AuthService, MessageToaster, LoginService, $timeout, $scope, Session, $stateParams, StateService, $ionicModal, Role) {\n            'ngInject';\n\n            var vm = this;\n            vm.wxlogin = wxlogin;\n            vm.isDev = Constants.ENVIRONMENT == 'dev' ? true : false;\n            $scope.$on('$ionicView.beforeEnter', validate);\n\n            function validate() {\n                vm.user = $stateParams.user;\n                vm.type = $stateParams.type;\n                console.log(\"vm.type = \"+vm.type+\" with \"+vm.user);\n            /////////////////////////////////////////////////////////\n            //    vm.user = \"o_Nkcw4CsZh5dbE2v8XVLUxfd96A\";//\"oVyGDuNPkAbtljfJKusP4oaCrYG0\";//test\n            //    vm.type = 2;//test\n            ////////////////////////////////////////////////////////\n                //MessageToaster.info('user = '+vm.user);\n                if (vm.user) {\n                    //login failed\n                    //MessageToaster.info('logining....');\n                    vm.info = \"...\";\n                    vm.showLoginModal = showLoginModal;\n                    //vm.roleList = [{type:1,user:'1111'}];//test\n                    vm.showChooseModal = showChooseModal;\n                    vm.login = login;\n                    vm.select = selectChoose;\n                    //uid\n                    if(vm.type){\n                        vm.wxlogin(vm.user,vm.type);\n                    }else{\n                        vm.showChooseModal();\n                    }\n                }\n            }\n\n            function wxlogin(userid,type) {\n                console.log(userid+\"  type = \"+type);\n                //MessageToaster.info('');\n                LoginService.wxLogin(userid,type).then(function(response) {\n                    console.log(response);\n                    if(response.errno==0) {\n                        var result = response.data;\n                        if (result instanceof Array && result.length > 1) {\n                            //modal select type\n                            vm.roleList=result;\n                            //MessageToaster.info(\"have select \"+result.length);\n                            vm.showChooseModal();\n                        }else{\n                            var u=result[0];\n                            if (u.uid != null && u.token != null && u.type != null) {\n                                AuthService.setSession(u.uid, u.token, u.eshop, u.type,userid);\n                                StateService.clearAllAndGo(AuthService.getNextPath());\n                            }\n                        }\n                    }else{\n                        if(response.errno==12004){\n                            //no data found\n                            AuthService.setSession(null, null, null, Role.unknown,userid);\n\n                            StateService.clearAllAndGo(\"register\",{type:vm.type});\n                        }\n                        //MessageToaster.error(response.error);\n                    }\n                });\n            };\n\n            //WeuiModalLoading\n            function login(user) {\n                //WeuiModalLoading.show();\n                //test\n                AuthService.setSession('1', '123', '1');\n                StateService.go(AuthService.getNextPath());\n                //test\n\n                LoginService.login(user.userId, user.password).then(function(response) {\n                    if (vm.modal)\n                        vm.closeDetailsModal();\n                    MessageToaster.success(response.message);\n                    AuthService.setSession(response.data.uid, response.data.token,response.data.eshop,response.data.type);\n                    StateService.clearAllAndGo(AuthService.getNextPath());\n                }).finally(function() {\n                    //WeuiModalLoading.hide();\n                });\n            }\n\n            function showLoginModal() {\n                $ionicModal.fromTemplateUrl('Login/LoginModal.html', {\n                    scope: $scope,\n                    animation: 'slide-in-up'\n                }).then(function(modal) {\n                    vm.modal = modal;\n                    vm.modal.show();\n                });\n\n                vm.closeDetailsModal = function() {\n                    vm.modal.remove();\n                };\n                $scope.$on('$ionicView.leave', function() {\n                    vm.modal.remove();\n                });\n            }\n\n            function showChooseModal() {\n                $ionicModal.fromTemplateUrl('Login/ChooseModal.html', {\n                    scope: $scope,\n                    animation: 'slide-in-up'\n                }).then(function(modal) {\n                    vm.cmodal = modal;\n                    vm.cmodal.show();\n                });\n\n                vm.closeChooseModal = function() {\n                    vm.cmodal.remove();\n                };\n                $scope.$on('$ionicView.leave', function() {\n                    vm.cmodal.remove();\n                });\n            }\n\n            function selectChoose(){\n                if(vm.choose!=null){\n                    //know user choose then login agin with type\n                    wxlogin(vm.user, vm.choose);\n                }\n            }\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('WxLoginRouter', [])\n    .config(wxLoginRouter);\n\n\n  function wxLoginRouter($stateProvider,$urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n    .state('wxlogin', {\n      url: \"/wxlogin?:user&:type\",\n      params:{\n        user:null,\n        type:0\n      },\n      templateUrl: 'WxLogin/wxlogin.html',\n      controller: 'WxLoginCtrl',\n      controllerAs: 'vm'\n    });\n    // $urlRouterProvider.when('', '/wxlogin');\n    //$urlRouterProvider.otherwise('/wxlogin');\n    $urlRouterProvider.otherwise(function($injector, $location) {\n          //console.log(\"Could not find \" + $location);\n          $location.path('/login');\n    });\n\n  }\n}());\n","(function() {\n    'use strict';\n\n    angular.module('WxLoginService', [])\n        .factory('WxLoginService', wxLoginService);\n\n    function wxLoginService($q, $http, ResultHandler, Constants) {\n        'ngInject';\n        var service = {\n            login: login,\n            logout: logout,\n            wxLogin: wxLogin\n        };\n\n        function logout() {\n\n        }\n\n        function login(userId, password) {\n            var data = {\n                id: md5(userId),\n                psw: md5(password)\n            };\n            var url = Constants.serverUrl + 'login';\n            return $http({\n                method: 'post',\n                url: url,\n                data: data\n            }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n        }\n\n        //POST /api/v1/login\n        //Request Body:\n        //{\n        //    \"weixinno\": \"xxxxxx\"\n        //}\n        //Response Body:\n        //{\n        //    \"errno\":0,\n        //    \"error\":\"\",\n        //    \"data\":{\n        //        \"token\":\"fdddsdsdddsssssdfff\",\n        //        \"uid\":\"id\",\n        //        \"type\":\"\"   uid\n        //    }\n        //}\n        function wxLogin(wxId,type) {\n            var data = {\n                weixinno: wxId\n            };\n            var end=\"\";\n            if(type!=null){\n                //console.log(\"include type \"+type);\n                data.type=type;\n                end=\"?type=\"+type;\n            }\n            var url = Constants.serverUrl + 'login'+end;\n            return $http({\n                method: 'post',\n                url: url,\n                data: data\n            }).then(function (response) {\n                return response.data;\n            }, function (error) {\n                return $q.reject(error);\n            });\n        }\n\n\n        return service;\n\n\n    }\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('recordCtrl', [])\n        .controller('recordCtrl', function($scope, $state, $stateParams, Constants, StateService, vipBuyService, AuthService, MessageToaster, Session) {\n            'ngInject';\n            var vm = this;\n\n            vm.activated = false;\n\n\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                console.log($stateParams);\n                vm.index = $stateParams.index;\n\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.query(vm.index);\n            }\n\n            vm.query = function(id){\n                console.log(\" index = \"+id);\n                var temp=Session.getData('temp');\n                if(temp.OrderID == id)\n                    vm.item=temp;\n\n            };\n\n            vm.back = function(){\n                StateService.back();\n                Session.rmData('temp');\n            };\n\n\n        });\n}());\n","(function() {\n  \"use strict\";\n  angular.module('vipRecordModule', [\n    'vipRecordCtrl',\n    'recordCtrl',\n    'vipRecordRouter',\n    'vipRecordService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('vipRecordCtrl', [])\n        .controller('vipRecordCtrl', function($scope, $state, Constants, StateService,vipBuyService,AuthService,MessageToaster,Session) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n\n            $scope.$on('$ionicView.afterEnter', activate);\n\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.getRecords();\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.goTo=function(id,item){\n                Session.setData('temp',item);\n                StateService.go('record',{index:id});\n            };\n\n            vm.getRecords = function () {\n                vipBuyService.getOrders(AuthService.getLoginID()).then(function(data) {\n                    if (data.errno == 0) {\n                        console.log(data.data);\n                        vm.records = data.data;\n                    }\n                });\n            };\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('vipRecordRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n        .state('vipRecord', {\n          url: \"/vipRecord\",\n          templateUrl: 'vipRecord/vipRecord.html',\n          controller: 'vipRecordCtrl',\n          controllerAs: 'vm'\n        })\n        .state('record', {\n          url: \"/record?:index\",\n          params:{\n            index:0\n          },\n          templateUrl: 'vipRecord/record.html',\n          controller: 'recordCtrl',\n          controllerAs: 'vm'\n        });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('vipRecordService', [])\n    .factory('vipRecordService', eService);\n\n  function eService( $q, $http,Constants,ResultHandler) {\n    'ngInject';\n    var service = {\n      exit:exit\n    };\n\n    function exit(id) {\n      var url = Constants.serverUrl + 'account/exit/'+id;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('vipTipsModule', [\n    'vipTipsCtrl',\n    'vipTipsRouter',\n    'vipTipsService'\n  ]);\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('vipTipsCtrl', [])\n        .controller('vipTipsCtrl', function($scope, $state, Constants, StateService) {\n            'ngInject';\n            var vm = this;\n            vm.activated = false;\n            $scope.$on('$ionicView.afterEnter', activate);\n            vm.expend1=false;\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n            }\n\n            vm.back=function(){\n                StateService.back();\n            };\n\n            vm.test=function(){\n                console.log('test');\n            }\n        });\n}());\n","(function() {\n  'use strict';\n\n  angular.module('vipTipsRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n        .state('vipTips', {\n          url: \"/vipTips\",\n          templateUrl: 'vipTips/vipTips.html',\n          controller: 'vipTipsCtrl',\n          controllerAs: 'vm'\n        })\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('vipTipsService', [])\n    .factory('vipTipsService', eService);\n\n  function eService( $q, $http,Constants,ResultHandler) {\n    'ngInject';\n    var service = {\n      exit:exit\n    };\n\n    function exit(id) {\n      var url = Constants.serverUrl + 'account/exit/'+id;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n\n  }\n\n}());\n","(function() {\n  \"use strict\";\n  angular.module('childrenSteamModule', [\n    'childrenSteamCtrl',\n    'childrenSteamRouter',\n    'childrenSteamService',\n    'videoCtrl'\n  ]);\n\n}());\n","(function () {\r\n    \"use strict\";\n    angular.module('childrenSteamCtrl', [])\n        .controller('childrenSteamCtrl', function ($scope, $ionicPopup, $sce,$stateParams, Constants, childrenService, childrenSteamService, AuthService, Session, StateService, $ionicModal, $ionicSlideBoxDelegate) {\r\n            'ngInject';\n            console.log(\"childrenSteamCtrl\");\n            var vm = this;\n            vm.activated = false;\n            vm.parent = {};\n            vm.deposits = {};\n            vm.fingerprintLogs = [];\n            vm.messages = [];\n            vm.cameras = [];\n            vm.unPaid = false,\n            vm.myComment;\n            vm.simpleFilter = '';\n            vm.offset = [0, 0, 0];\n            vm.limit = 30;\n            vm.error = '';\n            vm.canLoadMore = true;\n            $scope.$on('$ionicView.afterEnter', activate);\n            vm.steam = 0;\n            function activate() {\r\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.user = AuthService.getLoginID();\n                //\n                //vm.getWechatInfo(AuthService.getWechatId());\n                //vm.parent.wechat={\n                //    \"nickname\": \"Band\",\n                //    \"sex\": 1,\n                //    \"language\": \"zh_CN\",\n                //    \"city\": \"\",\n                //    \"province\": \"\",\n                //    \"country\": \"\",\n                //    \"headimgurl\":  \"http://wx.qlogo.cn/mmopen/g3MonUZtNHkdmzicIlibx6iaFqAc56vxLSUfpb6n5WKSYVY0ChQKkiaJSgQ1dZuTOgvLLrhJbERQQ4eMsv84eavHiaiceqxibJxCfHe/0\"\n                //};\n                //vm.getChildrenInfo(AuthService.getLoginID(),vm.offset,vm.limit);\n                //vm.getChildren();\n                vm.getChildrenDeposit();\n\n                //\n                var index = $stateParams.index;;\n                vm.steam =index || Session.getData('steam');\n                if (vm.steam === null) {\r\n                    vm.steam = 1;\n                    console.log('steam = ' + vm.steam);\r\n                }\n\n                //\n                vm.steam = parseInt(vm.steam);\n\n\n                vm.changeSteam(vm.steam);\r\n            };\n\n            vm.changeSteam = function (index) {\r\n                vm.steam = index;\n                Session.setData('steam', index);\n                vm.canLoadMore = true;\n                if (index === 0) {\r\n                    vm.showCamera = true;\n                    vm.showFingerPrint = false;\n                    vm.showNotificatin = false;\n                    if (vm.cameras.length === 0) vm.getCamera();\r\n                } else if (index === 1) {\r\n                    vm.showCamera = false;\n                    vm.showFingerPrint = true;\n                    vm.showNotificatin = false;\n                    console.log('fingerprintLogs = ' + vm.fingerprintLogs);\n                    if (vm.fingerprintLogs.length === 0) vm.getFingerPrint(0, vm.limit);\r\n                } else if (index === 2) {\r\n                    vm.showCamera = false;\n                    vm.showFingerPrint = false;\n                    vm.showNotificatin = true;\n                    if (vm.messages.length === 0) vm.getMessage(0, vm.limit);\r\n                }\r\n            };\n\n            vm.watchVideo = function (video, name) {\r\n                video.deposit_name = name;\n                Session.setData('video', JSON.stringify(video));\n                StateService.go('video');\r\n            };\n\n            vm.getChildrenDeposit = function () {\r\n                childrenSteamService.getChildrenDeposit(AuthService.getLoginID()).then(function (data) {\r\n                    if (data.errno == 0) {\r\n                        console.log(data.data);\n                        vm.deposits = data.data;\r\n                    }else {\r\n                        vm.unPaid = true;\r\n                        vm.error = data.error;\r\n                    }\r\n                });\r\n            };\n\n            vm.getCamera = function () {\n              console.log(\"getCamera \"+ vm.steam);\n                var count = 1,\n                    depositsCount = vm.deposits.length;\n                vm.canLoadMore = false;\n                vm.cameras = [];\n                if(typeof(depositsCount) == \"undefined\"){\n                    console.log(\"Camera = \"+ depositsCount);\n                    vm.canLoadMore = false;\n                    $scope.$broadcast('scroll.refreshComplete');\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\n                }\n                //\n                for (var i = 0; i < depositsCount; i++) {\r\n                    var id = vm.deposits[i].DepositID;\n                    //get camera\n                    if (id != null) {\n                        //console.log('http://v.zxing-tech.cn/?v='+id);\n                        //vm.cameraSrc = $sce.trustAsResourceUrl('http://v.zxing-tech.cn/?v='+id);\n                        childrenSteamService.getCamera(id).then(function (data) {\r\n                            //if(data.data.length<vm.limit){vm.canLoadMore = false;}\r\n                            vm.cameras[vm.cameras.length] = data.data;\r\n\r\n                            if (data.errno === 16005) {\r\n                                vm.unPaid = true;\r\n\r\n                            }\r\n\r\n                            count += 1;\r\n                            if (count === depositsCount) {\r\n                                $scope.$broadcast('scroll.refreshComplete');\n                                $scope.$broadcast('scroll.infiniteScrollComplete');\r\n                            }\r\n\r\n                        }, function (e) {\r\n                            count += 1;\r\n                            if (count === depositsCount) {\r\n                                $scope.$broadcast('scroll.refreshComplete');\n                                $scope.$broadcast('scroll.infiniteScrollComplete');\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            };\n\n            vm.getFingerPrint = function (offset, limit) {\r\n                console.log(\"getFingerPrint\");\n                childrenSteamService.getAllChildrenSignIn(AuthService.getLoginID(), offset, limit).then(function (data) {\r\n                    if (data.errno == 0) {\r\n                        console.log(data.data);\n                        if(offset==0)vm.fingerprintLogs=[];\n                        if (vm.fingerprintLogs.length == 0)\n                            vm.fingerprintLogs = data.data;\n                        else\n                            vm.fingerprintLogs = vm.fingerprintLogs.concat(data.data);\n                        console.log(vm.fingerprintLogs);\n                        vm.offset[1] += data.data.length;\n                        if (data.data.length < vm.limit) {\r\n                            console.log(\"it is the last data\");\n                            vm.canLoadMore = false;\r\n                        } else {\r\n                            vm.canLoadMore = true;\r\n                        }\r\n                    } else {\r\n                        console.log(data);\r\n                        if (data.errno === 16005) {\r\n                            vm.unPaid = true;\r\n                        }\r\n                        vm.canLoadMore = false;\r\n                    }\r\n\r\n                    //\r\n                    $scope.$broadcast('scroll.refreshComplete');\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\r\n\r\n                }, function () {\r\n                    //\r\n                    vm.canLoadMore = false;\r\n                    $scope.$broadcast('scroll.refreshComplete');\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\r\n                })\r\n            };\n\n            vm.getMessage = function (offset, limit) {\r\n                console.log(\"getMessage\");\n                childrenSteamService.getAllChildrenMsg(AuthService.getLoginID(), offset, limit).then(function (data) {\r\n                    if (data.errno == 0) {\r\n                        console.log(data.data);\n                        if(offset==0)vm.messages=[];\n                        var start = 0;\n                        if (vm.messages.length == 0)\n                            vm.messages = data.data;\n                        else {\r\n                            start = vm.messages.length;\n                            vm.messages = vm.messages.concat(data.data);\r\n                        }\n                        console.log(vm.messages);\n                        //update comment\n                        for (var i = 0; i < data.data.length; i++) {\n                            //vm.messages[start+i]\n                            childrenSteamService.getDailyComment(vm.messages[start + i].InfoID, start + i).then(function (sdata) {\r\n                                if (data.errno == 0) {\r\n                                    console.log(\"getDailyComment: \");\n                                    console.log(sdata.data);\n                                    var index = sdata.data.index;\n                                    vm.messages[index].comments = sdata.data.comments;\n                                    vm.messages[index].likes = sdata.data.likes;\r\n                                }\r\n                            });\r\n                        }\n                        vm.offset[2] += data.data.length;\n                        if (data.data.length < vm.limit) {\r\n                            console.log(\"it is the last data\");\n                            vm.canLoadMore = false;\r\n                        } else {\r\n                            vm.canLoadMore = true;\r\n                        }\n                        //$scope.$broadcast('scroll.refreshComplete');\n                        //$scope.$broadcast('scroll.infiniteScrollComplete');\r\n                    } else {\r\n                        console.log(data);\r\n                        if (data.errno == 16005) {\r\n                            vm.unPaid = true;\r\n                        }\r\n                        vm.canLoadMore = false;\r\n                    }\r\n\r\n                    //\r\n                    $scope.$broadcast('scroll.refreshComplete');\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\r\n\r\n                }, function () {\r\n                    //\r\n                    $scope.$broadcast('scroll.refreshComplete');\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\r\n                });\r\n            };\n\n            vm.doRefresh = function (type, offset) {\r\n              console.log(vm.steam +\" - \"+type+\" = \"+offset);\r\n                if (vm.steam === 0) {\r\n                    vm.getCamera();\r\n                } else if (vm.steam === 1) {\r\n                    vm.getFingerPrint(offset, vm.limit);\r\n                } else if (vm.steam === 2) {\r\n                    vm.getMessage(offset, vm.limit);\r\n                }\r\n            };\n\n            vm.getChildrenInfo = function (pId, offset, limit) {\r\n                childrenService.getChildrenAllInfo(pId, offset, limit).then(function (data) {\r\n                    if (data.errno == 0) {\r\n                        console.log(\"getChildrenAllInfo: \");\n                        console.log(data.data);\n                        if (vm.messages.length == 0)\n                            vm.messages = data.data;\n                        else\n                            vm.messages = vm.messages.concat(data.data);\n                        console.log(vm.messages);\n                        vm.offset += data.data.length;\n                        if (data.data.length < vm.limit) {\r\n                            console.log(\"it is the last data\");\n                            vm.canLoadMore = false;\r\n                        } else {\r\n                            vm.canLoadMore = true;\r\n                        }\n                        $scope.$broadcast('scroll.refreshComplete');\n                        $scope.$broadcast('scroll.infiniteScrollComplete');\r\n                    } else {\r\n                        console.log(data);\r\n                    }\r\n                });\r\n            };\n\n            vm.getWechatInfo = function (wId) {\r\n                console.log(\"wechat id : \" + wId);\n                childrenService.getWechatInfo(wId).then(function (data) {\r\n                    if (data.errno == 0) {\r\n                        console.log(\"wechat info: \");\n                        console.log(data.data);\n                        vm.parent.wechat = data.data;\r\n                    }\r\n                });\r\n            };\n\n            vm.getImg = function (type) {\r\n                if (type == 1) {\r\n                    return { name: \"\", src: \"img/dinner.png\" };\r\n                } else if (type == 2) {\r\n                    return { name: \"\", src: \"img/traning.png\" };\r\n                } else if (type == 3) {\r\n                    return { name: \"\", src: \"img/play.png\" };\r\n                } else if (type == 4) {\r\n                    return { name: \"\", src: \"img/homework.png\" };\r\n                } else if (type == 5) {\r\n                    return { name: \"\", src: \"img/login.png\" };\r\n                } else if (type == 6) {\r\n                    return { name: \"\", src: \"img/logout.png\" };\r\n                } else {\r\n                    return { name: \"\", src: \"img/unknown.png\" };\r\n                }\r\n            };\n\n            vm.goPhoto = function (msgIndex, index) {\r\n                Session.setData('temp', vm.msg[msgIndex]);\n                StateService.go(\"photo\", { index: index });\r\n            };\n\n            vm.star = function () {\r\n                console.log(\"add star\");\r\n            };\n\n            vm.getDailyComments = function (infoid, index) {\r\n                console.log(\"getDailyComments index = \" + index);\n                childrenSteamService.getDailyComment(infoid, index).then(function (sdata) {\r\n                    if (sdata.errno == 0) {\r\n                        console.log(\"getDailyComment: \");\n                        console.log(sdata.data);\n                        var sindex = sdata.data.index;\n                        vm.messages[sindex].comments = sdata.data.comments;\n                        vm.messages[sindex].likes = sdata.data.likes;\r\n                    }\r\n                });\r\n            };\n\n            vm.like = function (info, index) {\n                //likelike\n                //likelike\n                console.log(info + \" and index=\" + index);\n                var needAdd = true;\n                for (var i = 0; i < info.likes.length; i++) {\r\n                    if (info.likes[i].CommentBy == vm.user) {\n                        //remove\n                        needAdd = false;\n                        childrenSteamService.delDailyComment(info.likes[i].CommentID).then(function (data) {\r\n                            console.log('rmComment likes');\n                            console.log(data);\n                            vm.getDailyComments(info.InfoID, index);\n                            return;\r\n                        });\r\n                    }\r\n                }\n                //add\n                if (needAdd) {\r\n                    var comment = { infoid: info.InfoID, commentby: vm.user, commentdata: null };\n                    childrenSteamService.createDailyComment(comment).then(function (data) {\r\n                        console.log('addComment likes');\n                        console.log(data);\n                        vm.getDailyComments(info.InfoID, index);\n                        return;\r\n                    });\r\n                }\r\n            };\n\n            vm.comment = function (info, index) {\r\n                console.log(info + \" and index=\" + index);\n                vm.showPopup(info, index);\r\n            };\n\n            vm.rmComment = function (comment, index) {\r\n                childrenSteamService.delDailyComment(comment.CommentID).then(function (data) {\r\n                    console.log('rmComment');\n                    console.log(data);\n                    vm.getDailyComments(comment.InfoID, index);\r\n                });\r\n            };\n\n            vm.showPopup = function (info, index) {\r\n                var myPopup = $ionicPopup.show({\r\n                    template: '<input type=\"edittext\" ng-model=\"vm.myComment\">',\n                    title: '',\n                    scope: $scope,\n                    buttons: [\n                      { text: '' },\n                      {\r\n                          text: '<b></b>',\n                          type: 'button-positive',\n                          onTap: function (e) {\r\n                              if (!vm.myComment) {\r\n                                  e.preventDefault();\r\n                              } else {\r\n                                  return vm.myComment;\r\n                              }\r\n                          }\r\n                      }\n                    ]\r\n                });\n\n                myPopup.then(function (res) {\r\n                    console.log('Tapped!', res);\n                    //add comment\n                    if (res.length > 0) {\r\n                        var comment = { infoid: info.InfoID, commentby: vm.user, commentdata: res };\n                        childrenSteamService.createDailyComment(comment).then(function (data) {\r\n                            console.log('addComment comments');\n                            console.log(data);\n                            vm.myComment = null;\n                            vm.getDailyComments(info.InfoID, index);\n                            return;\r\n                        });\r\n                    }\r\n                });\r\n            };\n\n            vm.getChildren = function () {\r\n                childrenService.getChildren(AuthService.getLoginID()).then(function (data) {\r\n                    var title = \"\";\n                    if (data.errno == 0) {\r\n                        console.log(data.data);\n                        vm.childs = data.data;\n                        for (var i = 0; i < vm.childs.length; i++) {\r\n                            if (i == vm.childs.length - 1)\n                                title += (vm.childs[i].name + \"\");\n                            else\n                                title += (vm.childs[i].name + \",\");\n                            //vm.getMsg(vm.childs[i].uid);\n                            //vm.getChildSignIn(vm.childs[i].uid,vm.childs[i].name);\n                        }\n                        vm.parent.title = title;\r\n                    }\n                    //vm.fingerprintLogs.sort(function(a,b){return a.log-b.log});\n                });\r\n            };\n\n            vm.change = function () {\r\n                if (vm.simpleFilterSelect === '-1') {\r\n                    vm.simpleFilter = \"\";\r\n                } else if (vm.simpleFilterSelect === '0') {\r\n                    vm.simpleFilter = { datatype: '2' };\r\n                } else if (vm.simpleFilterSelect === '1') {\r\n                    vm.simpleFilter = { datatype: '1', InfoType: '1' };\r\n                } else if (vm.simpleFilterSelect === '2') {\r\n                    vm.simpleFilter = { datatype: '1', InfoType: '2' };\r\n                } else if (vm.simpleFilterSelect === '3') {\r\n                    vm.simpleFilter = { datatype: '1', InfoType: '3' };\r\n                } else if (vm.simpleFilterSelect === '4') {\r\n                    vm.simpleFilter = { datatype: '1', InfoType: '4' };\r\n                } else if (vm.simpleFilterSelect === '5') {\r\n                    vm.simpleFilter = { datatype: '1', InfoType: '5' };\r\n                } else if (vm.simpleFilterSelect === '6') {\r\n                    vm.simpleFilter = { datatype: '1', InfoType: '6' };\r\n                }\r\n            };\n\n            vm.getImages = function (msg) {\r\n                vm.imgCount = 0;\n                if (msg.PhotoLink1 != null && msg.PhotoLink1 != \"\") {\r\n                    var data = { src: msg.PhotoLink1, msg: '' };\n                    vm.images[vm.imgCount] = data;\n                    vm.imgCount++;\r\n                }\n                if (msg.PhotoLink2 != null && msg.PhotoLink2 != \"\") {\r\n                    var data = { src: msg.PhotoLink2, msg: '' };\n                    vm.images[vm.imgCount] = data;\n                    vm.imgCount++;\r\n                }\n                if (msg.PhotoLink3 != null && msg.PhotoLink3 != \"\") {\r\n                    var data = { src: msg.PhotoLink3, msg: '' };\n                    vm.images[vm.imgCount] = data;\n                    vm.imgCount++;\r\n                }\n                if (msg.PhotoLink4 != null && msg.PhotoLink4 != \"\") {\r\n                    var data = { src: msg.PhotoLink4, msg: '' };\n                    vm.images[vm.imgCount] = data;\n                    vm.imgCount++;\r\n                }\n                if (msg.PhotoLink5 != null && msg.PhotoLink5 != \"\") {\r\n                    var data = { src: msg.PhotoLink5, msg: '' };\n                    vm.images[vm.imgCount] = data;\n                    vm.imgCount++;\r\n                }\n                if (msg.PhotoLink6 != null && msg.PhotoLink6 != \"\") {\r\n                    var data = { src: msg.PhotoLink6, msg: '' };\n                    vm.images[vm.imgCount] = data;\n                    vm.imgCount++;\r\n                }\n                console.log(vm.images);\r\n            };\n\n            $ionicModal.fromTemplateUrl('message/image-modal.html', {\r\n                scope: $scope,\n                animation: 'slide-in-up'\r\n            }).then(function (modal) {\r\n                $scope.modal = modal;\r\n            });\n\n            $scope.openModal = function () {\r\n                $ionicSlideBoxDelegate.slide(0);\n                $scope.modal.show();\r\n            };\n\n            $scope.closeModal = function () {\r\n                $scope.modal.hide();\r\n            };\n\n            // Cleanup the modal when we're done with it!\n            $scope.$on('$destroy', function () {\r\n                $scope.modal.remove();\r\n            });\n            // Execute action on hide modal\n            $scope.$on('modal.hide', function () {\n                // Execute action\n            });\n            // Execute action on remove modal\n            $scope.$on('modal.removed', function () {\n                // Execute action\n            });\n            $scope.$on('modal.shown', function () {\r\n                console.log('Modal is shown!');\r\n            });\n\n            $scope.$on('scroll.refreshComplete', function () {\n                console.log('scroll.refreshComplete is call!');\n            });\n\n            $scope.$on('scroll.infiniteScrollComplete', function () {\n                console.log('scroll.infiniteScrollComplete is call!');\n            });\n\n            // Call this functions if you need to manually control the slides\n            $scope.next = function () {\r\n                $ionicSlideBoxDelegate.next();\r\n            };\n\n            $scope.previous = function () {\r\n                $ionicSlideBoxDelegate.previous();\r\n            };\n\n            $scope.goToSlide = function (index, msg) {\r\n                vm.images = [];\n                vm.getImages(msg);\n                $scope.modal.show();\n                $ionicSlideBoxDelegate.slide(index);\r\n            };\n\n            // Called each time the slide changes\n            $scope.slideChanged = function (index) {\r\n                $scope.slideIndex = index;\r\n            };\r\n\n        });\r\n}());\n","(function() {\n  'use strict';\n\n  angular.module('childrenSteamRouter', [])\n    .config(myRouter);\n\n\n  function myRouter($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider\n      .state('tabs.childrenSteam', {\n          url: \"/childrenSteam?:index\",\n          views: {\n            'tab-childrenSteam': {\n              templateUrl: 'childrenSteam/childrenSteam.html',\n              controller: 'childrenSteamCtrl',\n              controllerAs: 'vm'\n            }\n          }\n      })\n      .state('video', {\n        url: \"/video\",\n        templateUrl: 'childrenSteam/video.html',\n        controller: 'videoCtrl',\n        controllerAs: 'vm'\n      });\n  }\n}());\n","(function() {\n  'use strict';\n\n  angular.module('childrenSteamService', [])\n    .factory('childrenSteamService', childrenSteamService);\n\n  function childrenSteamService( $q, $http,Constants,ResultHandler) {\n    'ngInject';\n    var service = {\n      getMsg:getMsg,\n      getChildrenMsg:getChildrenMsg,\n      getChildren:getChildren,\n      getChildSignIn:getChildSignIn,\n      getChildrenSignIn:getChildrenSignIn,\n      getWechatInfo:getWechatInfo,\n      getChildrenAllInfo:getChildrenAllInfo,\n      getAllChildrenSignIn:getAllChildrenSignIn,\n      getAllChildrenMsg:getAllChildrenMsg,\n      getChildrenDeposit:getChildrenDeposit,\n      getDailyComment:getDailyComment,\n      createDailyComment:createDailyComment,\n      delDailyComment:delDailyComment,\n      getCamera:getCamera\n    };\n\n    //\t\t\n    //InfoID \tint64 \t\n    //PublisherID \tint64 \t\n    //DepositID \tint64 \t\n    //Longitude \tfloat \t\n    //Latitude \tfloat \t\n    //ClickCount \tint64 \t\n    //InfoType \tint32 \t1234\n    //Description \tvarchar2 \t1000\n    //PhotoLink1 \tvarchar2 \t/1\n    //PhotoLink2 \tvarchar2 \t/2\n    //PhotoLink3 \tvarchar2 \t/3\n    //PhotoLink4 \tvarchar2 \t/4\n    //PhotoLink5 \tvarchar2 \t/5\n    //PhotoLink6 \tvarchar2 \t/6\n    //Status\tint\t1:2:,\n    //CreateTime \tdatetime \t\n\n\n    /*\n     GET /api/v1/children/information/{$childuid}\n     return\n     {\n     \"errno\":0,\n     \"error\":\"\",\n     \"data\":{\n     \"childuid\":41000001,\n     \"childname\":\"xxx\",\n     \"childavatarlink\":\"http://xxxxxxx.jpg\",\n     \"timeline\":[\n     {\n     \"timestamp\":1468051200,\n     \"actiontype\":0,\n     \"actionname\":\"signin\",\n     \"actiondata\":{}\n     },\n     {\n     \"timestamp\":146805200,\n     \"actiontype\":1,\n     \"actionname\":\"dining\",\n     \"actiondata\":{\n     \"imgs\":[\"http://xxxxxxxxxx1.jpg\", \"http://xxxxxxxxx2.jpg\",...],\n     \"desc\":\"\"\n     }\n     },\n     ]\n     \"signin\":1468051200,\n     \"name\":\"yyy\",\n     \"avatarlink\":\"http://yyyyyyyyyyy.jpg\",\n     }\n     ]\n     }\n     */\n    function getMsg(childId) {\n        var url = Constants.serverUrl + 'parent/children/information/'+childId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    /*\n     GET /api/v1/parent/childrenlist/{$parentuid}\n     return\n     {\n     \"errno\":0,\n     \"error\":\"\",\n     \"data\":[\n     {\n     \"uid\":41000001,\n     \"name\":\"xxx\",\n     \"avatarlink\":\"http://xxxxxxx.jpg\",\n     },\n     {\n     \"uid\":41000002,\n     \"name\":\"yyy\",\n     \"avatarlink\":\"http://yyyyyyyyyyy.jpg\",\n     }\n     ]\n     }\n     */\n    function getChildren(parentId) {\n        var url = Constants.serverUrl + 'parent/childrenList/'+parentId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getChildSignIn(childId) {\n        var url = Constants.serverUrl + 'parent/children/signin/'+childId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getChildrenMsg(parentId) {\n        var url = Constants.serverUrl + 'parent/children/allInformation/'+parentId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getChildrenSignIn(parentId) {\n        var url = Constants.serverUrl + 'parent/children/allSignin/'+parentId;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getAllChildrenSignIn(parentId,offset,count) {\n        var url = Constants.serverUrl + 'parent/children/fp/'+parentId+'?offset='+offset+'&limitcount='+count;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getAllChildrenMsg(parentId,offset,count){\n        var url = Constants.serverUrl + 'parent/children/msg/'+parentId+'?offset='+offset+'&limitcount='+count;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getChildrenAllInfo(parentId,offset,count){\n        var url = Constants.serverUrl + 'parent/childrenInformation/fetch/'+parentId+'?offset='+offset+'&limitcount='+count;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getWechatInfo(wid) {\n        var url = Constants.serverUrl + 'wechat/'+wid;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getChildrenDeposit(pid) {\n        var url = Constants.serverUrl + 'parent/children/deposit/'+pid;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getDailyComment(infoId,index) {\n        var url = Constants.serverUrl + 'dailyComment/'+infoId+'?index='+index;\n        return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function createDailyComment(data) {\n        var url = Constants.serverUrl + 'dailyComment';\n        return $http({\n            method: 'post',\n            url: url,\n            data: data\n        }).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function delDailyComment(id) {\n        var url = Constants.serverUrl + 'dailyComment/'+id;\n        return $http.delete(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    function getCamera(did){\n      //var url =  Constants.serverUrl +\"cgi-bin/video.pl?did=\"+did;\n      var url =  Constants.serverUrl +\"camera/\"+did;\n      return $http.get(url).then(ResultHandler.successedFuc, ResultHandler.failedFuc);\n    };\n\n    return service;\n\n\n  }\n\n\n}());\n","(function() {\n    \"use strict\";\n    angular.module('videoCtrl', [])\n        .controller('videoCtrl', function($scope, Session, StateService, Constants) {\n            'ngInject';\n\n            var vm = this;\n            vm.activated = false;\n\n            $scope.$on('$ionicView.afterEnter', activate);\n            function activate() {\n                vm.activated = true;\n                vm.version = Constants.buildID;\n                vm.video=JSON.parse(Session.getData('video'));\n\n                console.log(vm.video);\n            }\n\n            vm.back = function(){\n                StateService.back();\n            };\n        });\n}());\n"]}